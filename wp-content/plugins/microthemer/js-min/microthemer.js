jQuery(document).ready(function(e){var t=TvrMT.TvrCom,s=TvrMT.MTF,r=TvrMT.MTdetached,a=TvrMT.detachedWin,o=TvrMT.mod.MTace,n=TvrMT.mod.MTint,i=TvrMT.mod.MTloop,l=TvrMT.mod.MTdd,c=TvrMT.mod.MTsave,d=TvrMT.mod.MTsass,_=TvrMT.mod.MTgrid,u=TvrMT.data.dyn.pref,p=parseInt(u.allow_scss),f=TvrMT.data.dyn.client_scss,g=p&&!f,m=e("body").width();TvrMT.TvrUi={cssFilters:TvrMT.data.prog.CSSFilters,cssProps:TvrMT.data.prog.CSSProps,gatheredCSS:TvrMT.data.prog.gatheredCSS,templates:TvrMT.data.templates,blog_details:TvrMT.data.dyn.blog_details,TVR_DEV_MODE:TVR_DEV_MODE,scss_enabled:p,client_scss:f,server_scss:g,pref:TvrMT.data.dyn.pref,uiData:TvrMT.data.dyn.ui,sass:!1,jsuVersion:6,jsuEvents:{js_css_compilation:3,synced_code_gui:4,imp_only_sh_and_grad_fix:5,property_value_structure:6},sRules:CSSUtilities,reinitRules:!0,tmp:{},uiUrl:e("#ui-url").attr("rel"),pluginUrl:e("#plugin-url").attr("rel"),adminUrl:e("#admin-url").attr("rel"),microUrl:e("#micro-url").attr("rel"),cssMin:e("#css-min").attr("rel"),cssStub:e("#css-stub").attr("rel"),totalSecs:parseInt(e("#total-sec-count").text()),TvrSugCSS:{},highlightEnabled:!1,colorPickerDragging:!1,progStatus:[],intelli:!1,awaitingIFrame:!0,placeholderFrame:!0,compProps:{},grid:{container:!1,items:[]},intelliCompProps:{},nodeCSS:{},intellinodeCSS:{},mixedElKey:0,update_gf_url:!1,g_url:"",comboScrollTopPos:0,pageOrPostID:!1,numSug:100,numRecent:6,numSampled:15,numMiniTiles:12,numSavedTiles:56,numSiteTiles:56,maxSelsPerFolder:41,proGroups:{flexbox:1,grid:1,animation:1,transition:1,transform:1},samplingProps:["font_family","font_size","line_height","color"],gridTrackProps:["grid-template-rows","grid-template-columns","grid-auto-rows","grid-auto-columns"],propAliases:TvrMT.data.prog.propAliases,domChanged:!1,mutationObserver:!1,stat:{win:window,doc:document,$doc:e(document),body:e("body"),tvr:e("#tvr"),vis:e("#visual-view"),styleComponents:e("#style-components"),nav:e("#tvr-nav"),mainMenu:e("#tvr-main-menu"),top:e("#v-top-controls"),code:e("#hand-css-area"),codeInner:e("#tvr-inner-code"),grid:e("#grid-control-wrap"),inlineEditor:e("#inline-editor"),adaptableEditor:e("#adaptable-editor"),view:e("#display-css-code-dialog"),res:e("#responsive-bar"),css_icons:e("#css-group-icons"),slider:e("#v-mq-slider"),opts:e("#tvr-options"),front:e("#v-frontend-wrap"),frontInner:e("#v-frontend"),wiz:e("#advanced-wizard"),wizFolder:e("#wizard_folder"),selNaming:e("#advanced-wizard"),breadcrumbs:e("#full-breadcrumbs"),actStyles:e("#actual-styles"),tools:e("#v-left-controls-wrap"),toolsMenu:e("#v-left-controls"),rightStuff:e("#right-stuff-wrap"),iframe:e("#viframe"),iframeDoc:!1,dialogs:e("#dialogs"),scss_compile_notes:e("#scss-error-notes"),scss_import_compile_notes:e("#scss-import-error-notes"),scss_error_file:e("#scss-error-file"),widthTest:e("#tvr-width-input")},tOut:6e4,hi:{section:"folder-icon tvr-icon",selector:"selector-icon tvr-icon",tab:"edit-media-queries lg-icon"},baseFontSize:26,browser:e("#user-browser").attr("rel"),meta:{},inputWaitingObj:{},timer:{typing:0,quickTarget:0,deferredTarget:0,prog:[]},jumpTo:!1,something_wrong:!1,debugCount:0,wasOpen:!1,leftMenu:!!e("#v-left-controls").hasClass("show"),dataLoading:!1,intelliAfterLoad:!1,ajaxUrl:e("#wpAjaxUrl").attr("rel"),toolbarHeight:0,frameHeight:0,frameWidth:0,previewWidth:0,rulerVal:0,prev:!1,fullWidth:m,resSliderWidth:0,tabsWidth:0,sortableMenuDims:{},mqs:[],totalSels:parseInt(e("#total-sel-count").text()),trial:"1"!=e("#plugin-trial").attr("rel"),trialNotice:TvrLang.trial_notice,gFontTarget:Object(),startSel:!1,selsToLoad:0,totalToLoad:0,pgInFocusWiz:"font",aceTypingInterval:g?500:50,inputTypingInterval:50,beforeSaveInterval:g?300:2e3,beforeAutoConvertInterval:2e3,saveInProgress:!1,pendingAutoSave:0,pendingAutoSaveConfig:{},reSave:!1,siteUrl:e("#site-url").attr("rel"),homeUrl:e("#home-url").attr("rel"),itemAlreadyExpanded:!1,tooltipDelay:e("#tooltip_delay").attr("rel").toLowerCase(),edge_mode:parseInt(e("#edge-mode").attr("rel")),init:function(){window!=window.top&&window.parent.TvrMT&&(window.location=v.homeUrl),TvrMT.init.add_listeners()},ua_detected:function(){v.something_wrong=!1},JSerrors:[],prevJSerrors:[],catch_js_errors:function(){if(window.top.Cypress||!parseInt(v.pref.monitor_js_errors))return!1;window.onerror=function(e,t,s){v.JSerrors.push({error:e,URL:t,line:s,source:TvrLang.interface}),v.instant_show_js_error("ui")}},instantPreviewNotSass:function(){return!parseInt(v.pref.allow_scss)},instant_show_js_error:function(e){var t=v.JSerrors[0].error,s={short:t+=" (line "+v.JSerrors[0].line+")",long:"<p>"+TvrLang.js_error_site+":</p>"+v.js_error_deets(),type:"warning"};"ui"==e?c.update_full_logs(s):c.log(s)},js_error_deets:function(s){t.startT(arguments);var r="",a=s?v.prevJSerrors:v.JSerrors;if(a.length>0){r+="<ol>";for(var o in a)if(a.hasOwnProperty(o)){var n=a[o];r+="<li>";for(var i in n)if(n.hasOwnProperty(i)){var l=n[i];if("URL"==i)l='<a target="_blank" href="'+l+'">'+t.root_rel(l)+"</a>",l+=" (line "+n.line+")";else if("line"==i)continue;r+="<b>"+t.ucwords(i)+":</b> "+l+"<br />"}r+="</li>"}r+="</ol>",v.prevJSerrors=e.extend(!0,[],v.JSerrors),v.JSerrors=[]}return t.endT(arguments),r},isProGroup:function(e){var t=v.get_meta(e,"group");return v.proGroups[t.groupSlug]},isForbiddenProperty:function(e){return!(v.pref.buyer_validated||!t.isDomEl(e)||!e.hasClass("property-input")||!v.isProGroup(e))&&(e.val(""),alert(TvrLang.trial_notice),!0)},adjust_mqs_for_unit:function(e){t.startT(arguments);var s=["min","max"];for(var r in e)if(e.hasOwnProperty(r))for(var a=0;a<s.length;++a){var o=s[a];e[r][o]=parseFloat(e[r][o]),e[r][o+"_unit"]&&"px"!=e[r][o+"_unit"]&&(e[r][o]=parseFloat(e[r][o])*v.baseFontSize)}return t.endT(arguments),e},maybe_pair_class:function(e,s){var r=t.get_pseudo_class(e);if(!r)return!1;var a=r[0];if(!v.get_pseudo_config(r)[a].strip)return!1;var o="mt-"+t.convert_to_param(a);if("class"==s)return o;if("selector"==s||"full"==s){var n=new RegExp(a+"(?!.*"+a+")"),i=e.replace(n,"."+o);return"selector"==s?i:e+", "+i}},get_pseudo_config:function(t){var s={};for(var r in t)t.hasOwnProperty(r)&&(s[t[r]]={});var a=["page_specific","pseudo_elements","pseudo_classes"];for(var o in a)if(a.hasOwnProperty(o)){var n=a[o];for(var i in v.cssFilters[n].items)if(v.cssFilters[n].items.hasOwnProperty(i)){var l=i.replace("::",":");if(s[i]||s[l]){var c=s[l]?l:i;s[c]=e.extend(!0,{},v.cssFilters[n].items[i]),s[c].pCE=i}}}return s},psuedo_is_set:function(){var e=v.stat.tvr.attr("class"),t=["pseudo_classes","page_specific","pseudo_elements"];for(var s in t)if(t.hasOwnProperty(s)&&e.indexOf(t[s])>-1)return!0;return!1},support_sampling:function(e){return t.in_array(e,v.samplingProps)},get_property_tab_control:function(e){var s=e.replace(/_/g,"-");return t.checkObject(TvrMT.data.prog.lh,[s,"tab_control"])},pseudo_class_format:function(e){return"filter-"+e.replace(/[:\(\)]+/g,"")},get_pseudo:function(t,s){if("val"==t){var r=v.pseudo_class_format(s.pseudoCE);return e("#css-filters").find("span.quick-opts-wrap").find("ul.css-filter-list").find("li."+r).find("input").val()}},iframe_loaded:function(e){s=window.TvrMT.MTF,v.stat.fHTML=e,parseInt(v.pref.grid_highlight)&&v.stat.fHTML.addClass("grid_highlight"),"grid"===v.pref.pg_focus&&v.stat.fHTML.addClass("showGridControls"),v.detached_window_available(!0)&&r.iframe_loaded(),v.briefly_highlight_selector()},keyboard_save_action:function(s,r){v.ua_detected();var a=parseInt(v.pref.show_code_editor)?"full":"inline",n="fullSCSSCompile"===r;o.get_focus_editor().session.getMode();if("inline"===a){if(v.selInFocusID){var i=e("#"+v.selInFocusID+"-code-code-css-"+v.get_mq_focus());if(t.isDomEl(i))return c.ajax_save_settings({$editor:v.stat.adaptableEditor,noSaveDelay:!n,$property:i.find("textarea.property-input"),settings:n?{fullSCSSCompile:1}:{}}),s.preventDefault(),!1;var l={},d="All settings saved (Ctrl + S)";n&&(l.fullSCSSCompile=1,d="Full SCSS compile (Ctrl + Alt + P)"),l=c.user_action(l,{items:[d],icon:"save-interface lg-icon"}),c.ajax_save_settings({noSaveDelay:!n,settings:l})}}else o.ace_instant_save(a,o.ace_sync_details.$textarea,v.stat.adaptableEditor,!n,n);s.preventDefault()},setup_keyboard_shortcuts:function(s){t.startT(arguments),function(e,t,s){function r(e,t,s){e.addEventListener?e.addEventListener(t,s,!1):e.attachEvent("on"+t,s)}function a(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return _[e.which]?_[e.which]:u[e.which]?u[e.which]:String.fromCharCode(e.which).toLowerCase()}function o(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function n(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function i(e,t){var s,r,a,o=[];for("+"===(s=e)?s=["+"]:(s=s.replace(/\+{2}/g,"+plus"),s=s.split("+")),a=0;a<s.length;++a)r=s[a],f[r]&&(r=f[r]),t&&"keypress"!=t&&p[r]&&(r=p[r],o.push("shift")),n(r)&&o.push(r);if(s=r,!(a=t)){if(!d){d={};for(var i in _)95<i&&112>i||_.hasOwnProperty(i)&&(d[_[i]]=i)}a=d[s]?"keydown":"keypress"}return"keypress"==a&&o.length&&(a="keydown"),{key:r,modifiers:o,action:a}}function l(e,s){return null!==e&&e!==t&&(e===s||l(e.parentNode,s))}function c(e){function s(e){e=e||{};var t,s=!1;for(t in m)e[t]?s=!0:m[t]=0;s||(b=!1)}function l(e,t,s,r,a,o){var i,l,c=[],d=s.type;if(!f._callbacks[e])return[];for("keyup"==d&&n(e)&&(t=[e]),i=0;i<f._callbacks[e].length;++i)if(l=f._callbacks[e][i],(r||!l.seq||m[l.seq]==l.level)&&d==l.action){var _;(_="keypress"==d&&!s.metaKey&&!s.ctrlKey)||(_=l.modifiers,_=t.sort().join(",")===_.sort().join(",")),_&&(_=r&&l.seq==r&&l.level==o,(!r&&l.combo==a||_)&&f._callbacks[e].splice(i,1),c.push(l))}return c}function d(e,t,s,r){f.stopCallback(t,t.target||t.srcElement,s,r)||!1!==e(t,s)||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)}function _(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=a(e);t&&("keyup"==e.type&&v===t?v=!1:f.handleKey(t,o(e),e))}function u(e,t,r,o){for(var n=m[e]=0;n<t.length;++n){var l=n+1===t.length?function(t){d(r,t,e),"keyup"!==o&&(v=a(t)),setTimeout(s,10)}:function(t){return function(){b=t,++m[e],clearTimeout(g),g=setTimeout(s,1e3)}}(o||i(t[n+1]).action);p(t[n],l,o,e,n)}}function p(e,t,s,r,a){f._directMap[e+":"+s]=t;var o=(e=e.replace(/\s+/g," ")).split(" ");1<o.length?u(e,o,t,s):(s=i(e,s),f._callbacks[s.key]=f._callbacks[s.key]||[],l(s.key,s.modifiers,{type:s.action},r,e,a),f._callbacks[s.key][r?"unshift":"push"]({callback:t,modifiers:s.modifiers,action:s.action,seq:r,level:a,combo:e}))}var f=this;if(e=e||t,!(f instanceof c))return new c(e);f.target=e,f._callbacks={},f._directMap={};var g,m={},v=!1,h=!1,b=!1;f._handleKey=function(e,t,r){var a,o=l(e,t,r);t={};var i=0,c=!1;for(a=0;a<o.length;++a)o[a].seq&&(i=Math.max(i,o[a].level));for(a=0;a<o.length;++a)o[a].seq?o[a].level==i&&(c=!0,t[o[a].seq]=1,d(o[a].callback,r,o[a].combo,o[a].seq)):c||d(o[a].callback,r,o[a].combo);o="keypress"==r.type&&h,r.type!=b||n(e)||o||s(t),h=c&&"keydown"==r.type},f._bindMultiple=function(e,t,s){for(var r=0;r<e.length;++r)p(e[r],t,s)},r(e,"keypress",_),r(e,"keydown",_),r(e,"keyup",_)}if(e){var d,_={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},u={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},p={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},f={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"};for(s=1;20>s;++s)_[111+s]="f"+s;for(s=0;9>=s;++s)_[s+96]=s;c.prototype.bind=function(e,t,s){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,s),this},c.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},c.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},c.prototype.reset=function(){return this._callbacks={},this._directMap={},this},c.prototype.stopCallback=function(e,t){return!(-1<(" "+t.className+" ").indexOf(" tvr-mousetrap ")||l(t,this.target))&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable)},c.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},c.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(_[t]=e[t]);d=null},c.init=function(){var e,s=c(t);for(e in s)"_"!==e.charAt(0)&&(c[e]=function(e){return function(){return s[e].apply(s,arguments)}}(e))},c.init(),e.TvrMousetrap=c,"undefined"!=typeof module&&module.exports&&(module.exports=c),"function"==typeof define&&define.amd&&define(function(){return c})}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?s:null),function(e){var t={},s=e.prototype.stopCallback;e.prototype.stopCallback=function(e,r,a,o){return!!this.paused||!t[a]&&!t[o]&&s.call(this,e,r,a)},e.prototype.bindGlobal=function(e,s,r){if(this.bind(e,s,r),e instanceof Array)for(s=0;s<e.length;s++)t[e[s]]=!0;else t[e]=!0},e.init()}(TvrMousetrap),TvrMousetrap.bindGlobal(["command+s","ctrl+s"],function(e){return v.keyboard_save_action(e,"save"),!1}),TvrMousetrap.bindGlobal(["command+alt+h","ctrl+alt+h"],function(e){return v.keyboard_highlight||v.feature_on(0,"mt_highlight",{offFirst:{fHTML:1,noSave:1},fHTML:1,noSave:1,con:"reg"}),v.keyboard_highlight=1,!1},"keydown"),TvrMousetrap.bindGlobal(["command+alt+t","ctrl+alt+t"],function(e){return v.toggle_feature(!1,"hover_inspect",{noSave:1}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+c","ctrl+alt+c"],function(e){return v.toggle_feature(!1,"show_code_editor"),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+j","ctrl+alt+j"],function(e){return v.toggle_inline_gui(),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+l","ctrl+alt+l"],function(e){return v.toggle_feature(!1,"show_text_labels"),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+,","ctrl+alt+,"],function(t){return v.quick_nav(e("#vb-focus-prev")),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+.","ctrl+alt+."],function(t){return v.quick_nav(e("#vb-focus-next")),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+d","ctrl+alt+d"],function(e){return v.toggle_feature(!1,"detach_preview"),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+p","ctrl+alt+p"],function(e){return v.close_dialog(),v.keyboard_save_action(e,"fullSCSSCompile"),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+g","ctrl+alt+g"],function(e){return v.show_dialog(v.stat.toolsMenu.find("li.item-display-css-code")),!1},"keypress"),e(s).keyup(function(t){if(72==t.keyCode&&v.keyboard_highlight)return t.preventDefault(),v.feature_off(0,"mt_highlight",{fHTML:1,noSave:1,onAgain:v.el_selected?{fHTML:1,noSave:1,con:"intelli"}:0}),v.keyboard_highlight=0,!1;if(13===t.which||27===t.which){var s=!(!t.target||!t.target.className)&&t.target.className;if(s){var r,a=t.target.id,o=e(t.target),n=13===t.which;if(o.closest("body").hasClass("tvr-visual"))if(s.indexOf("selector-css-textarea")>=0||s.indexOf("selector-name-input")>=0)r=n?".tvr-button":".cancel",o.closest(".float-form").find(".sel-toggles").find(r).trigger("click");else if(s.indexOf("rename-input")>=0)r=n?".rename-button":".cancel",o.closest(".edit-section-form").find(r).trigger("click");else if("previewPath"===a&&n)r=n?".rename-button":".cancel",o.closest(".tvr-input-wrap").find(".change-preview-url").trigger("click");else if(s.indexOf("new-item-input")>=0&&n)o.closest(".tvr-new-item").find(".new-item-add").trigger("click");else if("wizard-name"===a||"wizard_folder"===a){var i=v.wiz_update_sel_mode?".wizard-update-cur.mt-full-label":".wizard-add.tvr-button";r=n?i:".hover-inspect-toggle",v.stat.selNaming.find(r).trigger("click")}else"import_from_pack_name"!==a&&"export_pack_name"!==a||(r=n?".dialog-button":".close-dialog",o.closest(".tvr-dialog").find(r).trigger("click"))}}}),t.endT(arguments)},expanded:function(s){t.startT(arguments);var r;if("main_menu"==s)r=e("#tvr-main-menu");else if("quick_section"==s)r=e("#sec-in-focus");else if("quick_selector"==s)r=e("#sel-in-focus");else if("show_css_filters"==s)r=e("#show_css_filters-toggle");else if("mq"==s){var a=e("#"+v.selInFocusID);if(!t.isDomEl(a))return!1;r=a.find("span.add-mq")}return t.endT(arguments),!!r.hasClass("on")},show_main_menu:function(e){if(t.startT(arguments),v.itemAlreadyExpanded)return!1;v.set_popdown_height(".menu-scrollable"),e.addClass("on expanded"),v.stat.vis.addClass("top_menu_showing"),t.endT(arguments)},set_popdown_height:function(s){t.startT(arguments);var r=v.stat.vis.height()-40,a=".menu-scrollable"==s?34:0;e("#main-menu-popdown").css("max-height",r).find(s).css("max-height",r-a),t.endT(arguments)},hide_main_menu:function(){t.startT(arguments),v.clean_tooltips(),v.stat.mainMenu.removeClass("on expanded"),v.open_close_all_folders("close"),v.stat.vis.removeClass("top_menu_showing"),t.endT(arguments)},quick_edit:function(s){if(t.startT(arguments),v.itemAlreadyExpanded)return!1;var r=v.get_meta(e("#"+v.selInFocusID),"selector"),a=s.hasClass("sec-in-focus")?"section":"selector";e("#main-menu-popdown").addClass("bye-for-now"),r.sectionM.addClass("hello-me");var o=r.sectionM.find(".menu-arrow"),n=r.selectorM.find(".edit-selector-form");if(o.hasClass("on")||v.toggle_folder(o,"selector"===a),s.hasClass("sec-in-focus")){i=r.sectionM;n.hasClass("show")&&v.toggle_modify_selector(n),r.sectionM.find(".folder-icon").removeClass("sortable-icon").attr("title",""),v.set_popdown_height(".section-tag.hello-me")}else{var i=r.selectorM;n.hasClass("show")||v.toggle_modify_selector(n),r.sectionM.addClass("goodbye-section"),r.selectorM.addClass("hello-me"),v.set_popdown_height(".selector-tag.hello-me")}i.addClass("quick-edit-mode scrollable-area-not-live expanded"),s.addClass("on"),v.stat.vis.addClass("top_menu_showing"),t.endT(arguments)},close_quick_edit:function(){t.startT(arguments),v.clean_tooltips();var s=e("#main-menu-popdown"),r=s.find(".quick-edit-mode");if(r.hasClass("section-tag")){var a="folder",o=(i=v.get_meta(r,"section")).sectionM,n=r.find("."+a+"-icon");n.addClass("sortable-icon").attr("title",n.data("title"))}else{var a="selector",i=v.get_meta(r,"selector"),l=i.selectorM.find(".edit-selector-form");l.hasClass("show")&&l.removeClass("show");o=i.sectionM.add(i.selectorM)}r.removeClass("quick-edit-mode scrollable-area-not-live expanded");var c=i.sectionM.find(".menu-arrow");c.hasClass("on")&&v.toggle_folder(c),e("#current-selector").find(".on").removeClass("on"),o.removeClass("hello-me goodbye-section").css("max-height",""),s.removeClass("bye-for-now"),v.stat.vis.removeClass("top_menu_showing"),t.endT(arguments)},close_all_expanded:function(s,r,a){if(t.startT(arguments),!a){var o=s.parent();if(s.hasClass("on")||o.hasClass("quick-edit-wrap")&&o.hasClass("on")?v.itemAlreadyExpanded=!0:v.itemAlreadyExpanded=!1,(t.isDomEl(s.closest(".expanded"))||t.isDomEl(s.closest(".sp-container")))&&!s.hasClass("change-selector"))return t.endT(arguments),!1;if(s.hasClass("ui-menu-item")&&s.closest("#refine-targeting-pane")&&e("#show_css_filters-toggle").hasClass("on"))return!1}v.expanded("main_menu")?v.hide_main_menu():v.expanded("quick_section")||v.expanded("quick_selector")?v.close_quick_edit():v.expanded("show_css_filters")&&v.input_icon_toggle(e("#show_css_filters-toggle")),v.colorPickerDragging||v.picker_method("hide"),t.endT(arguments)},close_tooltip:function(e,t){e.attr("title",t.text()).removeAttr("aria-describedby"),t.remove()},clean_tooltips:function(){if(t.startT(arguments),"native"==v.tooltipDelay)return!1;if("native"!=v.tooltipDelay){var s=v.stat.body.data("ui-tooltip");if(t.hasValue(s)){for(var r in s.tooltips)if(s.tooltips.hasOwnProperty(r)){var a=e(s.tooltips[r].element[0]),o=e(s.tooltips[r].tooltip[0]);v.close_tooltip(a,o)}v.tt=!1,v.tt_trigger={}}}t.endT(arguments)},reset_global_vars:function(){t.startT(arguments),v.selInFocusID="",v.menuSelInFocusID="",v.curSelCSS="#no-element",v.intelli_css="#no-element",t.endT(arguments)},update_global_vars:function(r){t.startT(arguments),v.selInFocusID=r.selectorID,v.menuSelInFocusID=v.selInFocusID.replace("opts","strk"),v.curSelCSS=t.custom_escape_quotes(r.selectorM.find(".selector-css-textarea").val()),v.curSelEls=s?s.jquery_compat_sel_elements(v.curSelCSS):{},t.updateObject(v.uiData,["non_section","meta","last_viewed_selector"],v.selInFocusID),c.silent_save("",[{trail:["non_section","meta","last_viewed_selector"],action:"replace",data:v.selInFocusID}]);var a=e("#current-selector"),o="",n="";v.is_dis(r.sectionM)&&(o+="item-disabled"),v.is_dis(r.selectorM)&&(n+="item-disabled"),e("#sec-in-focus").hasClass("on")&&(o+=" on"),e("#sel-in-focus").hasClass("on")&&(n+=" on");var i="",l={sec:TvrLang.qedit_current_folder,sel:TvrLang.qedit_current_selector};for(var d in l)if(l.hasOwnProperty(d)){var _="sec"===d?l[d]:r.selectorCode,u="sec"===d?r.sectionH:r.selectorH;i+='<span id="'+d+'-in-focus" class="'+d+"-in-focus "+("sec"==d?o:n)+' quick-edit-wrap" >',i+='<span class="menu-arrow '+d+'-in-focus tvr-icon"></span>',i+='<span class="quick-menu-text '+d+'-in-focus" ',i+='title="'+t.escapeHTML(_)+'">'+t.escapeHTML(u)+"</span>",i+="</span>"}a.html(i);var p=TvrLang.update_selector+":\n"+r.sectionH+" >> "+r.selectorH+"\n";e("#wizard-update-cur").attr("title",p),t.endT(arguments)},menu_object:function(t){return e("#"+t.replace("opts","strk"))},section_slug:function(s){var r=e("#"+s);return!!t.isDomEl(r)&&v.get_meta(e("#"+s),"selector").sectionSlug},is_cur:function(e,s){if(t.hasValue(v.selInFocusID)){if("sec"==e){if(s==v.section_slug(v.selInFocusID))return!0}else if("sel"==e&&s==v.selInFocusID)return!0;return!1}},is_dis:function(e){return!!e.hasClass("item-disabled")},allowed_action:function(e,s){t.startT(arguments);r=!1;if(!v.trial)return t.endT(arguments),!0;if("Edit Sel"==s&&t.isDomEl(e.closest(".trial-disabled")))r=!0;if("Add Sel"==s&&v.totalSels>=15)var r=!0;return t.endT(arguments),!r||(alert(v.trialNotice),!1)},load_css_ref:function(e){t.startT(arguments),v.show_dialog(e),t.endT(arguments)},show_google_fonts_field:function(e){e.is(":visible")?v.show_dialog(e.find(".g-font")):e.show("fast",function(){v.adjust_scroll_buttons(v.get_pg_meta(),"style")})},hide_google_fonts_field:function(e,t){v.gFontTarget.val("").prop("val",""),t.hide("fast",function(){v.adjust_scroll_buttons(v.get_pg_meta(),"style")})},insert_google_font:function(e){v.close_dialog(),v.gFontTarget.val(e).focus(),v.post_edit(v.gFontTarget),c.ajax_save_settings({$property:v.gFontTarget})},launch_img_uploader:function(e){wp.media.editor.send.attachment=function(t,s){var r=t.size?s.sizes[t.size].url:s.url;v.update_bg_image(e,r)},wp.media.editor.open("wpMediaFakePostID")},update_bg_image:function(e,s){var r=v.get_meta(e,"property").property.find(".property-input");s=s.indexOf(v.siteUrl)>-1&&!parseInt(v.pref.abs_image_paths)?t.root_rel(s,v.siteUrl):s,r.val(s),v.adjust_comp_span(r,"after"),t.scroll_input_end(r),c.ajax_save_settings({$property:r})},clear_bg_image:function(e){t.startT(arguments),v.update_bg_image(e,""),t.endT(arguments)},get_animation_name:function(e){return e.groupTab.find("input.property-input").val()},refresh_event_binding:function(){s&&s.stat.win.MT_Events_Manager&&s.stat.win.MT_Events_Manager.refresh_event_binding()},user_play:function(e,t,r){var a=e.animationConfig;s&&a.flashCSSRules&&a.animationName&&s.trigger_animation(a)},mt_scroll:{style:{offsets:[],rightPositions:[],rightPosIndex:-1},responsive:{offsets:[],rightPositions:[],rightPosIndex:-1},gridcolumns:{offsets:[],rightPositions:[],rightPosIndex:-1},gridrows:{offsets:[],rightPositions:[],rightPosIndex:-1}},scroll_row:function(e){var s,r,a=e.data("type");if("style"===a||"gridcolumns"===a||"gridrows"===a){var o=v.get_pg_meta();if(!o)return!1;"style"===a?(s=o.groupTab,r=o.groupTab.find(".pg-inner")):r=(s=o.group.find(".tab-control-"+v.pref.grid_focus+"."+a).find(".mt-variable-line")).find(".mt-vl-inner")}else"responsive"===a&&(s=v.stat.res.find(".query-tabs-wrap"),r=v.stat.res.find(".query-tabs"));if(r){var n=v.get_row_excess(s,r,a);if(!n)return!1;n=n;var i,l=s.width(),c=Math.abs(parseInt(r.css("marginLeft")));if(e.hasClass("mt-scroll-left"))i=v.mt_scroll[a].rightPositions[v.mt_scroll[a].rightPosIndex-1],t.isDefined(i)?(v.mt_scroll[a].rightPositions.splice(v.mt_scroll[a].rightPosIndex,1),v.mt_scroll[a].rightPosIndex--):(i=0,v.mt_scroll[a].rightPositions=[],v.mt_scroll[a].rightPosIndex=-1);else{for(var d=c+l,_=n<d?n:d,u=v.mt_scroll[a].offsets,p=0;p<u.length;p++)if(u[p]>_){var f=u[p-1],g=u[p];_=f>c&&g>d?f:g;break}if(c===_)return!1;v.mt_scroll[a].rightPositions.push(_),v.mt_scroll[a].rightPosIndex++,i=_}i*=-1,r.css("marginLeft",i+"px")}},adjust_scroll_buttons:function(e,s){if(t.startT(arguments),!e&&"responsive"!==s)return!1;var r,a,o,n=!1,i=!1;switch(s){case"style":a=(r=v.get_group(e)).find(".pg-inner"),o=e.selector.find("li.scroll-lr-buttons-"+s),n="code"===e.groupSlug||"grid"===e.groupSlug,i="grid"===e.groupSlug;break;case"responsive":r=v.stat.res.find(".query-tabs-wrap"),a=v.stat.res.find(".query-tabs"),o=v.stat.res.find("div.scroll-lr-buttons");break;case"gridcolumns":case"gridrows":a=(r=e.group.find(".tab-control-"+v.pref.grid_focus+"."+s).find(".mt-variable-line")).find(".mt-vl-inner"),o=e.selector.find("li.scroll-lr-buttons-"+s)}if(!a)return!1;v.get_row_excess(r,a,s,"checkShow")&&!n?(o.addClass("buttons-showing"),r.addClass("hor-scroll-needed"),v.mt_scroll[s].rightPositions=[]):(v.mt_scroll[s].rightPositions=[],v.mt_scroll[s].rightPosIndex=-1,a.css("marginLeft","0px"),o.removeClass("buttons-showing"),r.removeClass("hor-scroll-needed")),i&&v.adjust_grid_line_scroll_buttons(e),t.endT(arguments)},adjust_grid_line_scroll_buttons:function(e){v.adjust_scroll_buttons(e,"gridcolumns"),v.adjust_scroll_buttons(e,"gridrows")},get_row_excess:function(s,r,a,o){t.startT(arguments);var n,i=s.width(),l=0,c=[],d=s.hasClass("property-grid");return(d?r.children().filter(".tab-control-"+v.pref.grid_focus):r.children()).each(function(t){var s=e(this);s.is(":visible")&&(l+=s.outerWidth(!0),c.push(l))}),(s.hasClass("property-border")||d)&&(l/=2),l+=50,n=l-i,v.mt_scroll[a].offsets=c,t.endT(arguments),n>0&&n},input_icon_toggle:function(s,r,a){t.startT(arguments);var n,i,d,_=s,u=s.attr("data-input-type"),p=s.attr("data-input-level"),f="pgtab"===p?"group":p,g=v.title(s),m=s.hasClass("active")?"":1,h=!1,b=u+"-tracker",y=!1,w={domDepth:p,maxDepth:"selector",clean:{},cleanMaxDepth:"selector"},T="disabled"===u&&"tab"===p?s.closest(".mq-tab").attr("rel"):v.get_mq_focus(),k=v.get_input_stems(T),x=k.mq,C=k.imp;if("important"===u){d="tvr_mcth[non_section][important]"+C+"["+(i=v.get_meta(s,"property")).sectionSlug+"]["+i.selectorSlug+"]["+i.groupSlug+"]["+i.propertySlug+"]";var S=t.get_name_attr_index(i.property.find("input.property-input").attr("name"));!1!==S&&(d+="["+S+"]"),w.mq_key=T,w.recurse_key=["important"],w.clean.selector=[],y=!0}else if("disabled"===u){y=!0,w.itemWasDisabled=p;if(i="tab"===p?v.get_meta(e("#"+v.selInFocusID),"selector"):v.get_meta(s,f),"section"===p)d=(F=v.disabled_quick_edit(i.sectionM,p,i)).find("input.section-display-name").attr("name").replace("[label]","["+u+"]");else if("selector"===p)d=(F=v.disabled_quick_edit(i.selectorM,p,i)).find("input.selector-label").attr("name").replace(/\[label\]$/,"["+u+"]"),w.clean.selector=[[u]];else if("tab"===p)F=s.closest(".mq-tab"),b+="-"+T,d=x+"["+i.sectionSlug+"]["+i.selectorSlug+"][tab]["+u+"]",_=i.selectorM.find("span.edit-selector"),w.domDepth="selector",w.mq_key=T,w.onlyRecurse="all-devices"!==T,w.incRecurse=w.onlyRecurse,w.recurse_key=["m_query"],w.clean.selector=[["tab"],[u]];else if("subgroup"===p||"pgtab"===p){F=s.closest("span.quick-opts-wrap");var M="pgtab"===p,j=!!M&&s.data("tab-group"),D=M?"pgtab_"+u:"pg_"+u,I=M?s.data("tab-group"):i.subgroupSlug;d=x+"["+i.sectionSlug+"]["+i.selectorSlug+"]["+D+"]["+I+"]",w.domDepth="group",w.mq_key=T,w.onlyRecurse="all-devices"!==T,w.incRecurse=w.onlyRecurse,w.recurse_key=["m_query"],w.clean.selector=[[D],[I]],(h=v.maybe_add_nth_index_filter(M,j,i,s,w.clean.selector))&&(d+="["+h+"]"),p="group"}else"script"===p&&(F=s.closest("div.item-row"),d="tvr_preferences[enq_js]["+t.convert_to_param(F.find(".script-name").text())+"][disabled]")}else if("chained"===u){if(y=!0,i=v.get_meta(s,"subgroup"),m){var O,q,z=v.get_subgroup_or_tabgroup(i,"inputs"),E=!!t.isDomEl(v.inputWaitingObj)&&v.inputWaitingObj,P=E?E.val():"",L=t.isDefined(P);e.fn.MTreverse=[].reverse,z.MTreverse().each(function(s){var r=e(this),a=r.val();L&&r.attr("name")===E.attr("name")&&(q=E),t.isDefined(a)&&(O=r)}),O&&(q=q||O,v.sync_fields(q,i))}d=x+"["+i.sectionSlug+"]["+i.selectorSlug+"][pg_"+u+"]["+i.subgroupSlug+"]",w.domDepth="group",w.mq_key=T,w.recurse_key=["m_query"],w.clean.selector=[["pg_"+u],[i.subgroupSlug]]}else if("flexitem"===u||"griditem"===u){var F=s.closest("div.property-fields"),A="tvr_mcth["+(i=v.get_meta(F.find("div.sub-label"),"group")).sectionSlug+"]["+i.selectorSlug+"]";if(d=A+"[pg_"+u+"]",w.domDepth="group",w.mq_key=T,w.recurse_key=["m_query"],w.clean.selector=[["pg_"+u]],"griditem"===u){var H={};l.fill_object_from_name(H,d,m);var N=m?0:1;return l.fill_object_from_name(H,A+"[nth_item]",N),c.quick_save_data(!1,H),"griditems"!==v.get_grid_focus()&&(v.pref.grid_focus="griditems"),v.trigger_pg_icon_click("grid"),!1}}if(m){var $='<input class="input-toggle-tracker '+b+'" type="hidden" name="'+d+'" value="1" />';s.addClass("active");var R="add",V=s.attr("data-neg");_.before($),"disabled"===u&&F.addClass("item-disabled"),"show_css_filters"===p&&s.addClass("on expanded"),"flexitem"!==u&&"griditem"!==u||F.add(v.stat.grid).addClass("show-single-"+u)}else{s.removeClass("active");var R="remove",V=s.attr("data-pos");(n=_.siblings("."+b)).val(""),"disabled"===u&&F.removeClass("item-disabled"),"show_css_filters"===p&&s.removeClass("on expanded"),"flexitem"!==u&&"griditem"!==u||F.add(v.stat.grid).removeClass("show-single-"+u)}v.refresh_tt(s,V);var U=c.h_i_class(p,i),W=s.attr("class"),G=!1,K=!1;"important"===u&&(W+=" lg-icon",K="i",(G=!!v.chain_is_on(i)&&i.subgroupH+" "+TvrLang.fields_sync)&&!r&&v.sync_important(i,R)),a||(w.M=i,"chained"!==u&&(w.mtData={},l.fill_object_from_name(w.mtData,d,m)),"script"===p?e.extend(!0,v.pref,w.mtData):(r&&(w.return="mtData"),"show_css_filters"!==u&&(w=l.dom_to_data(w)))),m||n.remove(),a||r||"show_css_filters"===p||(w=c.user_action(w,{items:[p],val:g,valTT:G,M:i,pathTT:"section"===p,icon:[{icon:U},{icon:W,iconC:K}]}),y&&v.editor_and_gui()&&i&&i.selector&&o.gui_to_editor(!1,i),c.ajax_save_settings({settings:w})),t.endT(arguments)},get_input_stems:function(e){var t="tvr_mcth",s="";return"all-devices"!==e&&(t+="[non_section][m_query]["+e+"]",s="[m_query]["+e+"]"),{mq:t,imp:s}},maybe_add_nth_index_filter:function(e,s,r,a,o){var n=e?r.group.find(".property-tag.tab-control-"+s).first():a.closest(".subgroup-tag").next(".property-tag");if(n.hasClass("has-variable-line"))return!1;var i=n.find("input.property-input"),l=!!t.isDomEl(i)&&t.get_name_attr_index(i.attr("name"));return!1!==l&&o.push(["value"],[l]),l},disabled_quick_edit:function(e,t,s){return"section"==t&&v.is_cur("sec",s.sectionSlug)&&(e=e.add("#sec-in-focus")),"selector"==t&&v.is_cur("sel",s.selectorID)&&(e=e.add("#sel-in-focus")),e},auto_clean:function(e,s){t.startT(arguments),t.endT(arguments)},icon:function(e){return""},title:function(e){var t=e.data("ui-tooltip-title");return t||e.attr("title")},enable_tt:function(s){t.startT(arguments),s.tooltip({position:{my:"center top",at:"center bottom+10",collision:"flipfit"},hide:!1,show:{effect:"none",duration:0,delay:v.tooltipDelay},open:function(s,r){t.startT(arguments);var a=v.get_tt(r),o=v.get_tt_trigger(s,this).data("dyn-tt-root");o&&a.html(e("#"+o).attr("title"));var n=a.find(".ui-tooltip-content").html();n&&(n=t.regular_escaped_to_non_escaped(n.replace(/&amp;/g,"&").replace(/\n/g,"<br />")),a.html(n)),t.endT(arguments)},close:function(e,t){v.tt=!1,v.tt_trigger={}}}),t.endT(arguments)},get_tt:function(e){return v.tt=e.tooltip},get_tt_trigger:function(s,r){return t.startT(arguments),v.tt_trigger=e(s.originalEvent.target||s.originalEvent.srcElement).closest(e(r).tooltip("option","items")),t.endT(arguments),v.tt_trigger},refresh_tt:function(s,r,a){t.startT(arguments),s.each(function(t){var s=e(this);"native"==v.tooltipDelay||!v.tt||a&&!s.is(a)?(s.attr("title",r),a&&a.data("dyn-tt-root")&&v.update_tt(v.tt,r)):v.update_tt(v.tt,r)}),t.endT(arguments)},update_tt:function(e,s){if(!t.isDomEl(e))return!1;var r=e.find(".ui-tooltip-content");(r=t.isDomEl(r)?r:e).html(s.replace("\n","<br />")),v.tt_trigger.data("ui-tooltip-title",s)},get_all_selector_code:function(){t.startT(arguments);var e={};for(var s in v.uiData)if(v.uiData.hasOwnProperty(s)&&"non_section"!=s&&v.uiData.hasOwnProperty(s))for(var r in v.uiData[s])if(v.uiData[s].hasOwnProperty(r)&&"this"!=r&&v.uiData[s][r]&&v.uiData[s][r].label){var a=v.uiData[s][r].label.split("|");e["strk-"+s+"-"+r]={fName:v.uiData[s].this.label,sName:a[0],code:a[1]}}return t.endT(arguments),e},get_dom_item:function(s,r,a,o,n,i){var l,c,d,_=n?e.extend(!0,{},s,n):s,u="menu"===a?"strk":"opts";switch(r){case"section":case"selector":case"group":l=_.trail.item;break;case"subgroup":case"property":var p=t.prop_to_cssf(s.property_key),f=t.checkObject(TvrMT.data.prog.lh,[p,"sub_slug"]),g="subgroup"===r?"subgroup":s.property_key;if("animation"===s.group_key&&(f="animation"),!f)return!1;l=_.trail.root_to_group.concat([f,g,s.recurse.mq_key])}return c="#"+u+"-"+l.join("-"),d=i?i.find(c):e(c),!!t.isDomEl(d)&&(o?{$item:d,id:c,M:v.get_meta(d,r)}:d)},get_meta:function(s,r){t.startT(arguments),v.meta={};var a=["stub","section","selector","group","subgroup","property"];for(var o in a)if(a.hasOwnProperty(o)&&a[o]==r){if(s.attr("class")&&s.attr("class").indexOf(r+"-tag")>=0)n=s;else var n=s.closest("."+r+"-tag");var i=n.attr("id").split("-")}var l="";for(var c in i)if(i.hasOwnProperty(c)&&0!=c&&6!=c&&7!=c){if(r=a[c],l+="-"+i[c],"property"==r||"subgroup"==r){var d=l,_="property"==r?d+"-"+i[6]:d+"-subgroup-"+i[6];"all"==i[6]&&(i[6]+="-devices",_+="-devices"),v.meta.tabSlug=i[6],v.meta[r]=e("#opts"+_),v.meta.pgTabControlSlug=v.meta[r].data("pgtabcontol")}else v.meta[r]=e("#opts"+l);var u=i[c];if(v.meta[r+"Slug"]=u,"section"==r)v.meta[r+"M"]=e("#strk"+l),v.meta[r+"T"]=v.meta[r+"M"].find("input.section-tracker"),v.meta[r+"H"]=v.meta.sectionM.find(".section-display-name").val(),v.meta[r+"ID"]="opts-"+v.meta.sectionSlug,v.meta[r+"MID"]="strk-"+v.meta.sectionSlug;else if("selector"==r){v.meta[r+"M"]=e("#strk"+l);var p=v.meta.selectorM.find(".selector-label").val().split("|");v.meta[r+"T"]=v.meta[r+"M"].find("input.selector-tracker"),v.meta[r+"H"]=p[0],v.meta[r+"Code"]=p[1],v.meta[r+"ID"]="opts-"+v.meta.sectionSlug+"-"+v.meta.selectorSlug,v.meta[r+"MID"]="strk-"+v.meta.sectionSlug+"-"+v.meta.selectorSlug}else if("group"==r){v.meta[r+"ID"]="opts-"+v.meta.sectionSlug+"-"+v.meta.selectorSlug+"-"+v.meta.groupSlug;var f=v.get_mq_focus();v.meta[r+"Tab"]=v.meta[r].find("div.property-fields-"+f),v.meta[r+"H"]=v.stat.css_icons.find("ul.styling-option-icons").find("li.pg-icon-"+v.meta.groupSlug).attr("title"),"animation"==u||"transition"==u?(v.meta.event=v.meta[r+"Tab"].find("input.mt-event-input").first().val(),v.meta.eventKey=v.meta.event?t.convert_to_param(v.meta.event):"",v.meta.eventValue=v.meta[r+"Tab"].find("input.mt-event-value-input").first().val()):v.meta.event=v.meta.eventKey=v.meta.eventValue=""}else"subgroup"==r||"property"==r&&(v.meta.subgroupH=v.meta.subgroup.find("span.subgroup-label").text(),v.meta[r+"H"]=v.meta[r].find("span.option-label").text())}return v.meta.tabSlug||(v.meta.tabSlug=v.get_mq_focus()),v.meta.tabH=v.get_tab_name(v.meta.tabSlug),t.endT(arguments),v.meta},get_pg_meta:function(s){if(!v.selInFocusID||!v.pref.pg_focus)return!1;var r=e("#"+v.selInFocusID);if(!t.isDomEl(r))return!1;var a=s?r.find("li.group-tag-"+v.pref.pg_focus).find("group-row-"+s):r.find("li.group-tag-"+v.pref.pg_focus);return!!t.isDomEl(a)&&v.get_meta(a,"group")},colorpicker_bind:function(s,r){t.startT(arguments);e("<div></div>");var a=!1,o=r?s:s.find("input.color:not(.bound)");o.each(function(){a=!0;var s=e(this),r=s.closest(".property-tag").attr("id");s.spectrum({appendTo:v.stat.styleComponents,belongsTo:r,containerClassName:"picker-belongs-to-"+r,showAlpha:!0,showInput:!1,allowEmpty:!0,showInitial:!0,preferredFormat:"rgb",showButtons:!1,showSelectionPalette:!0,localStorageKey:"shared_palette",maxSelectionSize:9,hide:function(e){v.$pickerContainer.draggable("destroy")},show:function(s){t.startT(arguments);var r=v.inputWaitingObj=e(this),a=v.get_meta(r,"property"),o=".picker-belongs-to-"+a.property.attr("id"),n=v.$pickerContainer=v.stat.styleComponents.find(o);if(n.hasClass("ui-draggable")||n.draggable({}),!n.hasClass("extra-fields-added")){var i='<div class="sp-mt-inputs">';i+='<input type="number" min="0" max="1" step="0.1" class="sp-input-opacity sp-input">',i+='<input type="text" class="sp-input-rgb sp-input">',i+='<input type="text" class="sp-input-hsl sp-input">',i+='<input type="text" class="sp-input-hex sp-input">',i+="</div>",n.addClass("extra-fields-added").append(i).wrapInner("<div class='sp-wrap'>"),n.find(".sp-clear").bind("click.mt",function(e){v.clear_spectrum_inputs(a,!0)})}v.draw_palette(n);var l,c=n.css(["top","left"]),d=parseInt(c.top),_=parseInt(c.left);if(l=v.all_options_left()?{top:d+10+"px",left:"0px"}:{top:"-1px",left:_+40+"px"},n.css(l),r.val())v.update_spectrum_inputs(s,r,{},!0);else{var u=a.property.find("span.comp-style").find("span").attr("style");if(u){var p=u.split("background-color:");"transparent"!=p[1]&&"rgba(0, 0, 0, 0)"!=p[1]||(p[1]="rgba(0, 0, 0, 1)"),v.update_spectrum(p[1],r,{},!0,!0),r.val(""),a.property.find(".sp-preview-inner").css("background-color","transparent").addClass("sp-clear-display")}}t.endT(arguments)},move:function(t){v.update_spectrum_inputs(t,e(this),{},!0),v.timer.typing&&clearTimeout(v.timer.typing),v.timer.typing=setTimeout(v.done_typing,10)}}).on("dragstart.spectrum",function(e,t){v.colorPickerDragging=!0}).on("dragstop.spectrum",function(e,t){v.colorPickerDragging=!1}).addClass("bound")}),a&&r&&o.spectrum("show"),t.endT(arguments)},format_autocomplete_id:function(e,t){var s=e.closest(".property-tag"),r=s.attr("id"),a=t+"-belongs-to-"+r,o=s.hasClass("tab-control-gridtemplate"),n=s.hasClass("tab-control-gridauto");if(o||n){a+="-input-nth-index-"+(e.closest(".tvr-input-wrap").index()+1),o&&(a+="-input-filter-"+e.closest(".vl-item").data("input-filter"))}return{containerID:a,fieldID:r}},get_related_meta:function(t,s,r){var a,o,n,i,l,c=t+"-belongs-to",d="picker"===t?"sp-container":"ui-autocomplete";if(!r&&s.hasClass(d)){a=s.data(c),o=s.attr("id"),n=s,r=v.get_meta(e("#"+a),"property"),l=".tvr-input-wrap";var _=o.split(/(?:-input-nth-index-|-input-filter-)/g);_[1]&&(l+=":nth-child("+_[1]+")"),_[2]&&(l+=" ."+_[2]),i=r.property.find(l).find("input.property-input")}else{r=r||v.get_meta(s,"property"),i="picker"===t?r.property.find("input.property-input"):s.parent().find("input.property-input");var u=v.format_autocomplete_id(i,t);a=u.fieldID,o=u.containerID,n=e("#"+o)}return{$input:i,$container:n,containerID:o,fieldID:a,M:r}},draw_palette:function(s){var r=v.get_meta(v.inputWaitingObj,"property"),a=this.get_related_meta("picker",!1,r),o=(s=s||a.$container).find("ul.mt-picker-palette");t.isDomEl(o)?o.replaceWith(v.color_palette()):s.append(v.color_palette()),v.$palette=s.find("ul.mt-picker-palette"),s.find("ul.mt-picker-palette").on("click.mt-spectrum","span.full-palette-toggle, span.palette-button, span.refresh-icon, span.tile-color",function(t){var s=e(t.target),r=a.$input;if(s.hasClass("full-palette-toggle"))v.toggle_feature(s);else if(s.hasClass("tile-color")){v.$palette.find("span.tile-selected").removeClass("tile-selected");var o=s.data("color");v.update_spectrum(o,r,{},!0);var n=s.data("id");c.ajax_save_settings({context:"redrawPalette",$property:r});var i=(s=v.$palette.find("span."+n)).parent();s.addClass("tile-selected");var d=v.$palette.find("div.saved-colors-wrap"),_=d.find("span.mt-save-color"),u=d.find("span.mt-remove-color");i.hasClass("saved-tile")?(_.removeClass("show"),u.addClass("show")):(_.addClass("show"),u.removeClass("show"))}else if(s.hasClass("palette-button")){var p=o=r.spectrum("get").toRgbString(),f=!1;s.hasClass("mt-remove-color")&&(p=!1,f=o=v.$palette.find("span.tile-selected").data("color")),l.splice_sug_val(p,f,"color","saved",{redrawPalette:1,save:!0})}else s.hasClass("refresh-icon")&&l.refresh_sug_values({specific:"color",$resample:s})})},color_palette:function(){var t=e("#mt-picker-palette").clone().removeAttr("id"),s=t.find("li.view-full-palette"),r=v.pref.my_props.sug_values.color,a=r.recent,o=r.saved,n=r.sampled;if(v.pref.full_color_palette){var i=s.find("span.full-palette-toggle");i.addClass("on").attr("title",i.data("neg"))}return t.find("ul.mt-picker-palette").html(e(v.color_palette_tiles("mini","recent",v.numMiniTiles-1,a)).add(s)),t.find("ul.recent-full-palette").html(v.color_palette_tiles("full","recent",v.numMiniTiles,a)),t.find("ul.saved-full-palette").html(v.color_palette_tiles("full","saved",v.numSavedTiles,o)),t.find("ul.site-full-palette").html(v.color_palette_tiles("full","site",v.numSiteTiles,n)),t},color_palette_tiles:function(e,s,r,a){for(var o="",n=0;n<r;++n){var i=a[n],l=v.pref.color_as_hex?t.maybe_to_hex(i):i,c=i?'title="'+l+'"':"",d=i?'style="background-color:'+i+'"':"",_=e+"-"+s+"-"+n;o+='<li class="'+e+"-tile "+s+"-tile  palette-tile "+(i?"has-color":"no-color")+'">'+(i?'<span class="tile-color '+_+'" data-color="'+i+'" data-id="'+_+'" '+d+" "+c+"></span>":"")+"</li>"}return o},picker_method:function(e){t.startT(arguments),t.isDomEl(v.inputWaitingObj)&&("hide"===e?v.inputWaitingObj.spectrum("hide"):"clickpick"===e&&v.get_meta(v.inputWaitingObj,"property").property.find(".sp-container").trigger("mouseup")),t.endT(arguments)},update_spectrum:function(e,s,r,a,o){t.startT(arguments);var n=tinycolor(e),i=n.toRgb();tinycolor(i).isValid()&&(s.spectrum("set",i),v.update_spectrum_inputs(n,s,r,a,o),o||v.adjust_comp_span(s,"after"),t.endT(arguments))},update_spectrum_inputs:function(e,s,r,a,o){if(t.startT(arguments),e){o||s.val(e.toRgbString());var n=this.get_related_meta("picker",s).$container;n.find(".sp-input-hex").not(r).val(e.toHexString()),n.find(".sp-input-rgb").not(r).val(e.toRgbString()),n.find(".sp-input-hsl").not(r).val(e.toHslString()),n.find(".sp-input-opacity").not(r).val(e.toRgb().a),a&&!o&&v.maybe_sync_fields(s),t.isDomEl(r)&&r.focus(),t.endT(arguments)}else s.val("")},clear_spectrum_inputs:function(e,s){t.startT(arguments);var r=e.property.find("input.color");e.property.find("input.sp-input, input.color").val("").end().find("div.sp-alpha-inner, div.sp-preview-inner").css("background-color","transparent").end().find("div.sp-preview-inner").addClass("sp-clear-display"),v.adjust_comp_span(r,"after"),s&&(v.picker_method("hide"),v.maybe_sync_fields(r)),t.endT(arguments)},update_count:function(s,r,a,o,n){t.startT(arguments),t.hasValue(n)||(n=0);var i=parseInt(s.attr("rel"));if("add"==r)l=i+parseInt(a);else if("subtract"==r)var l=i-parseInt(a);if(s.attr("rel",l),"section"!=o){if(0==i){s.after(' <span class="folder-count-wrap count-wrap">(<span class="folder-state-count state-count"></span>)</span>')}if(0==l){s.next("span").remove()}else s.next("span").find(".state-count").text(parseInt(l))}if("section"==o){var c=e("#total-sec-count"),d=parseInt(c.text());l>i?(v.totalSecs=parseInt(d+a),c.text(v.totalSecs),v.totalSels=v.totalSels+parseInt(n),e("#total-sel-count").text(parseInt(v.totalSels))):(v.totalSecs=parseInt(d-a),c.text(v.totalSecs),v.totalSels=v.totalSels-parseInt(n),e("#total-sel-count").text(parseInt(v.totalSels)))}else if("selector"==o){var _=e("#total-sel-count"),u=parseInt(_.text());l>i?(v.totalSels=parseInt(u+a),_.text(v.totalSels)):(v.totalSels=parseInt(u-a),_.text(v.totalSels))}v.toggle_enabled_buttons(),t.endT(arguments)},com_data_loading:function(s,r,a){t.startT(arguments),s.find("."+r+"-row").append(e(v.templates.loaders[r]).removeAttr("id")),c.update_prog_indicator("plus",TvrLang.load_style_opt),t.endT(arguments)},com_data_finished_loading:function(e,s){t.startT(arguments),e.find("img.ajax-loader").remove(),c.update_prog_indicator("minus",s,TvrLang.load_style_opt),t.endT(arguments)},ajax_load_revisions_table:function(){t.startT(arguments),c.update_prog_indicator("plus",TvrLang.load_revisions_table),e.ajax({type:"GET",url:v.ajaxUrl,data:"mt_action=get_revisions",async:!0,timeout:v.tOut,error:function(e,s){t.startT(arguments),c.update_prog_indicator("minus",{short:TvrLang.load_revisions_table_failed,long:"<p>"+v.handle_ajax_error(e,s)+"</p>"},TvrLang.load_revisions_table),t.endT(arguments)},success:function(s){t.startT(arguments);var r=e(s).html();e("#revision-area").html(r),c.update_prog_indicator("minus",!1,TvrLang.load_revisions_table),t.endT(arguments)},complete:function(){t.startT(arguments)}}),t.endT(arguments)},update_wizard_html:function(e){t.action_after_timeout("wizard_html_expensive",3,{item:function(e){t.startT("update_wizard_html_inner");var r="";if(!e.bindOnly){s.dom;var a=s.stat.html[0].outerHTML,n={},i=new RegExp(l.reg.html_tag({tag:"noscript"}),"gm");t.iterate_string(a,i,[{item:t.replace_all,args:[0,"<noscript>(MT truncated)</noscript>"]}],n),n.matchesFound&&(a=n.modifiedStr);var c={html:{preserve_newlines:!0,max_preserve_newlines:0,indent_inner_html:!0,indent_handlebars:!0,indent_size:2,extra_liners:[],unformatted:[]}};r=html_beautify(a,c)}o.update_arbitrary_editor({context:"wizardHTML",editorID:"wizard_inspector_html",data:r,mode:"html",filterClass:"wizard_inspector_html",containerClass:".css-code-wrap",dontSetHeight:!0,readOnly:!0,fontSize:"12px",noValidation:!0,directContent:r,mirrorRender:!e.updateVisEditor,dontScrollHTML:e.dontScrollHTML});t.endT("update_wizard_html_inner")},args:[e]})},breadcrumb_clicked:function(e){var t,r=parseInt(e.data("level"));t=r>-1?s.dom.nodes[r].family.el.fullObj:s.dom.nodes[0].family.child.m[0].obj,v.dom_nav_option_used(t)},update_breadcrumbs:function(){var t=e("#dom-bread"),r=t.find(".drag-containment"),a=t.find(".drag-content");e.extend(!0,[],s.dom.nodes).reverse();for(var o="",n=s.dom.nodes.length-1,i=n;i>=0;i--){var l=s.dom.nodes[i],c=0===i?" active-crumb":"",d=i!=n?'<span class="bc-sep">&raquo;</span>':"";o+=d+'<span class="mt-breadcrumb'+c+'" data-level="'+i+'">'+l.elBcLabel+"</span>"}var _=s.dom.nodes[0].family.child;_.count&&(o+=d+'<span class="mt-breadcrumb child-crumb" data-level="-1">'+_.m[0].bcLabel+"</span>"),a.css("width","auto").html(o);var u=a.width(),p=t.width(),f=0,g=0,m="default",h=u;a.width(u).css("left","0"),u>p?(g="-"+(f=u-p)+"px",m="e-resize",h=p+2*f,v.stat.breadcrumbs.draggable("enable")):v.stat.breadcrumbs.draggable("disable"),r.width(h).css({left:g,cursor:m})},update_dom_arrows:function(r){t.startT(arguments);var a=e("#selector-naming").find(".refine-target-controls");a.find("span").addClass("disabled");var o=s.dom.nodes[0].family;o.par.count&&a.find("span.tvr-parent").removeClass("disabled"),o.prev.count&&a.find("span.tvr-prev-sibling").removeClass("disabled"),o.next.count&&a.find("span.tvr-next-sibling").removeClass("disabled"),o.child.count&&a.find("span.tvr-child").removeClass("disabled"),t.endT(arguments)},switch_html_element:function(e){var t=!1,r=s.dom.nodes[0].family,a=e.attr("class");a.indexOf("tvr-parent")>=0?t=r.par.m[0].obj:a.indexOf("tvr-child")>=0?t=r.child.m[0].obj:a.indexOf("tvr-prev-sibling")>=0?t=r.prev.m[0].obj:a.indexOf("tvr-next-sibling")>=0&&(t=r.next.m[0].obj),t&&v.dom_nav_option_used(t)},dom_nav_option_used:function(t,r){var a={scroll:!0,selectElement:!0};r=e.extend({},a,r),v.redo_sug_sels("",!0),s.all_targeting_actions(t,r)},update_view_css:function(s,r,a,n){if(t.startT(arguments),"loadNew"==a){if(o.generated_css_auto_line_done={},v.server_scss&&n){var i=n.find("#scss-line-error");t.isDomEl(i)?(v.scss_error={line:i.data("line"),tabKey:i.data("tab")},v.stat.tvr.addClass("cur_scss_error")):(v.scss_error=!1,v.stat.tvr.removeClass("cur_scss_error"))}v.stat.view.find("div.dialog-tab-field").each(function(t){var s=e(this).find("div.view-file").find("a").attr("href");if(s)c.simple_ajax_request({url:s,plus:TvrLang.retrieve_css,minus:TvrLang.retrieve_css_failed,cbFunction:v.update_view_css,cbfArgs:[t]});else{v.stat.view.find(".dialog-tab-"+t);var r=!!v.scss_error&&v.scss_error.fullString,a=r||v.previousSCSSCompile;v.update_view_css(a,t)}})}else o.update_arbitrary_editor({context:"viewCSS",editorID:"generated-css-"+r,data:s,filterClass:"generated-css",readOnly:!0,directContent:s,index:r});t.endT(arguments)},update_inspector_stylesheet:function(e,s,r){t.startT(arguments),"loadNew"==r?c.simple_ajax_request({url:s.url,plus:TvrLang.retrieve_css,minus:TvrLang.retrieve_css_failed,cbFunction:v.update_inspector_stylesheet,cbfArgs:[s]}):o.update_arbitrary_editor({context:"inspectorStylesheet",editorID:"inspect_stylesheet_preview",data:e,filterClass:"inspect_stylesheet_preview",readOnly:!0,directContent:e,containerClass:".content-main",find:s}),t.endT(arguments)},ui_reset:function(e){if(t.startT(arguments),!confirm(TvrLang.reset_settings_confirm))return!1;c.pending_auto_saves("clear");var s=v.ajaxUrl,r=TvrLang.reset_empty_folders;c.general_ajax_submission("reset",s,r,"GET","mt_action=tvr_ui_reset"),t.endT(arguments)},get_css_filter_alias:function(s,r){t.startT(arguments);var a=e("#css-filters"),o=v.pseudo_class_format(s.closest("li").data("pref_sub_key")),n=(t.isDomEl(s.closest("#fav-filters"))?a.find("span.quick-opts-wrap"):e("#fav-filters")).find("li."+o);return t.endT(arguments),"favourite_filter"!=r?n:n.find(".star-icon")},clear_css_filters:function(s){t.startT(arguments),e("#css-filters").find("ul.css-filter-list").find("li.css-filter-item").each(function(t){var r=e(this),a=s&&"page_specific"===r.data("type");r.hasClass("on")&&!a&&v.toggle_feature(r)}),t.endT(arguments)},clear_styles:function(e,s,r){if(t.startT(arguments),!confirm(TvrLang.clear_styles_confirm))return!1;var a=v.ajaxUrl,o=TvrLang.clear_styles;c.general_ajax_submission("clear",a,o,"GET","mt_action=tvr_clear_styles"),t.endT(arguments)},restore_rev:function(e){if(t.startT(arguments),!confirm(TvrLang.restore_settings_confirm))return!1;var s=v.ajaxUrl,r=TvrLang.restore_settings,a=e.attr("rel");c.general_ajax_submission("restore",s,r,"GET",a),t.endT(arguments)},toggle_revision_save_status:function(t){var s,r,a=t.add(t.closest("tr"));t.hasClass("revision-is-saved")?(a.removeClass("revision-is-saved"),s=0,r="pos"):(a.addClass("revision-is-saved"),s=1,r="neg"),v.refresh_tt(t,t.data(r)),e.get(v.ajaxUrl+"&rev_save_status="+s+"&rev_id="+t.attr("rel"),function(){})},set_input_timer:function(e){e=e||v.inputTypingInterval,v.timer.typing&&clearTimeout(v.timer.typing),v.timer.typing=setTimeout(v.done_typing,e)},set_defer_save_timer:function(e,t){var s="save"+t;v.timer[s]&&clearTimeout(v.timer[s]),v.timer[s]=setTimeout(c.action_save,v.beforeSaveInterval,e)},extract_inner_styles:function(e){var s=(e=(e=t.remove_only_last_char(e,"}")).split("{"))[1]?e[1]:"";return s&&(e.shift(),s=e.join("{")),s.trim()},post_edit:function(s){t.startT(arguments),s.each(function(t){var s=e(this);v.update_input_width_and_scroll(s),v.adjust_comp_span(s,"after")}),t.endT(arguments)},adjust_event_fields:function(e){var s=t.convert_to_param(e.val()),r=e.closest(".field-wrap"),a=r.siblings(".event-target-field"),o=r.siblings(".event-value-field");if(t.hasValue(s)){var n=o;"css"!==l.event_type(s)?n=n.add(a):v.hide_property_fields(a),n.addClass("show-event-fields")}else v.hide_property_fields(o.add(a))},get_default_unit:function(e,s){return t.checkObject(v.pref,["my_props",e,"pg_props",s,"default_unit"])},maybe_set_unit:function(e,s,r,a){if(!r)return!1;var o=v.get_default_unit(e,s);if(t.hasValue(o)){var n=r=r.trim().replace(/=(?:.+)(\(.*?\))/g,function(e){return e.replace(/ /g,"")}),i={val:r,converted:!1,calc:""};if(r.indexOf(" ")<0)i=v.do_conversion(r,o,s,0,a);else{var l=[],c=r.split(" ");for(var d in c)if(c.hasOwnProperty(d)){var _=v.do_conversion(c[d],o,s,d,a);l[d]=_.val,_.converted&&(i.converted=!0,i.calc+=0!=d?", "+_.calc:_.calc)}i.val=l.join(" ")}return a&&(i.converted?(a.val(i.val),v.last_field_val_converted=i,v.last_field_val_converted.origVal=n,v.update_input_width_and_scroll(a),v.maybe_sync_fields(a)):v.last_field_val_converted=!1),i}},do_conversion:function(e,s,r,a,o){var n={val:e,converted:!1,calc:""};if(t.isNumber(e)&&0!=e){if(("px (implicit)"!==s||!o)&&s.indexOf(" to ")<0)"px (implicit)"===s&&(s="px"),n.val=e+s,n.converted=!0;else if(s.indexOf(" to ")>-1){var i=s.split(" to ");n=v.auto_convert(e,i[1],v.nodeCSS[0],r,e,a,o)}}else"="===e.charAt(0)&&(n=v.process_excel_function(e,r,a,o));return n},process_excel_function:function(e,s,r,a){var o={val:e,converted:!1,calc:""},n=e.split("(");if(!n[0]||!n[1]||n[1].indexOf(")")<0)return o;var i=n[0].replace("=",""),l=n[1].replace(")","").split(",");for(var d in l)if(l.hasOwnProperty(d)&&(l[d]=l[d].trim(),!t.isDefined(l[d])))return o;var _=v.nodeCSS[0];return _?(l[1]&&(_=v.nodeCSS[l[1]-1]),v.auto_convert(l[0],i,_,s,e,r,a)):(c.log({short:"Auto-conversion could not be calcluated",long:"<p>The current selector may not target any elements on the current page.</p>",type:"warning"}),o)},auto_convert:function(s,r,a,o,n,i,l){t.startT(arguments);var d,_,u,p,f,g,m={val:n,converted:!1,calc:""},h=o,b=!1,y=TvrMT.data.prog.autoMap;if(y[h]&&y[h][r]){if(!e.isPlainObject(y[h][r])&&!y[h][r][0]){if(l){w={short:"Auto-conversion aborted",long:"<p>"+y[h][r]+"</p>",type:"warning"};c.log(w)}return t.endT(arguments),m}d=y[h][r].node,_=y[h][r].prop,e.isArray(_)&&(_=_[i]),_=_.replace(/_/g,"-"),u=parseInt(a[d][_].replace("px","")),t.hasValue(y[h][r].tip)&&(b="<p>"+y[h][r].tip+"</p>")}if("%"===r?(p=s/u*100,f=s+"px / "+u+"px * 100 = "+parseFloat(p.toFixed(3).toString())+r,g=s+"px divided by "+u+"px ("+d+" "+_+") multiplied by 100 = <b>"+p+r+"</b>"):"em"!==r&&"rem"!==r||(_="font-size","em"==r?(d="element","font_size"==h&&(d="parent"),u=parseInt(a[d]["font-size"].replace("px",""))):(d="HTML base",u=v.baseFontSize),p=s/u,f=s+"px / "+u+"px = "+parseFloat(p.toFixed(3).toString())+r,g=s+"px divided by "+u+"px ("+d+" "+_+") = <b>"+p+r+"</b>"),!p)return t.endT(arguments),m;if(l){var w={short:f,long:"<p>"+TvrLang.auto_conversion_performed+": <b>"+n+"</b><br />"+g+"<br />"+TvrLang.auto_values_rounded+"</p>",type:"info"};b&&(w.long+=b),c.log(w)}return m={val:parseFloat(p.toFixed(3).toString())+r,converted:!0,calc:f},t.endT(arguments),m},update_packs_obj:function(e){TvrMT.data.prog.combo.directories[TvrMT.data.prog.combo.directories.length]=e,TvrMT.data.prog.combo.directories.sort()},set_import_field:function(t){e("#import_from_pack_name").val(t)},handle_ajax_error:function(e,t){return 0==e.status?TvrLang.error_connection:404==e.status?TvrLang.error_404:500==e.status?TvrLang.error_500:"parsererror"==t?TvrLang.error_parser:"timeout"==t?TvrLang.error_timeout:TvrLang.error_unknown+"\n"},email_error_report:function(){t.startT(arguments),c.update_prog_indicator("plus",TvrLang.send_error);var s=v.ajaxUrl+"&mt_action=tvr_error_email",r=e("#error-report-form").serialize();e.ajax({type:"POST",url:s,data:r,timeout:v.tOut,error:function(e,t){c.update_prog_indicator("minus",{short:TvrLang.send_error_failed,long:"<p>"+v.handle_ajax_error(e,t)+"</p>"},TvrLang.send_error)},success:function(t){var s=e(t).html();if(null==s)r={short:"Email report failed",long:"<p>Reason unknown.</p>"};else var r=c.extract_status(e(s));c.update_prog_indicator("minus",r,TvrLang.send_error)}}),t.endT(arguments)},show_dialog:function(s){t.startT(arguments),v.close_dialog();var r=(s=s.attr("rel")?s:s.closest("*[rel]")).attr("rel");if("not-yet"===r)return!1;if(e("#"+r+"-dialog").addClass("show"),"import-from-pack"==r&&(t.hasValue(s.attr("data-pack-name"))&&e("#import_from_pack_name").val(s.attr("data-pack-name")),e("#preview-import-css-0").hasClass("ace_editor")||l.update_import_css_editor("")),"export-to-pack"==r){var a="";e("#tvr-menu").find(".section-tag").each(function(){var t=v.get_meta(e(this),"section"),s="",r="";parseInt(t.sectionM.find(".selector-count-state").attr("rel"))>0&&(s='checked="checked"',r="on"),a+='<li><input type="checkbox" name="export_sections['+t.sectionSlug+']" '+s+' /> <span class="fake-checkbox '+r+'"></span><span class="folder-icon tvr-icon"></span><span class="ef-label">'+t.sectionH+"</span></li>"}),e("#available-folders").html(a);var o=e("#custom-css");v.stat.code.find("textarea.hand-css-textarea").each(function(s){var r=e(this),a=o.find(".custom-"+r.attr("id"));t.hasValue(r.val())?t.check_fake(a):t.uncheck_fake(a)}),e("#export_to_pack").val(1),e("#export_pack_name").val(""),e("#toggle-checked-folders").find("input").prop("checked",!1).end().find(".fake-checkbox").removeClass("on")}if("display-css-code"==r){var n=e("#scss-line-error"),i=t.isDomEl(n)?v.title(n):v.title(s.find(".mt-menu-text")),d=c.user_action(c.noNewData,{items:[i],val:!1,icon:"display-css-code lg-icon"});c.ajax_save_settings({context:"view-css",settings:d,noSaveDelay:!0})}if("inspect-stylesheet"==r){var _=t.escapeRegExp(s.data("selector")),u=_+"\\s*?{",p={url:s.data("href"),media:s.data("media"),selector:_,findSelectorParts:!0,selectorPattern:u};v.update_inspector_stylesheet(!1,p,"loadNew")}"display-revisions"==r&&v.ajax_load_revisions_table(),"manage-design-packs"==r&&v.reload_iframe(s,"manage"),"google-fonts"==r&&(v.gFontTarget=s.closest(".field-wrap").find(".property-input"),v.reload_iframe(s,"google_fonts")),"program-docs"!==r&&"get-started-tips"!==r||v.reload_iframe(s,"docs",e("#docs-url").attr("rel"),!0),t.endT(arguments)},close_dialog:function(){t.startT(arguments),v.stat.tvr.find("div.tvr-dialog").removeClass("show"),e("#export_to_pack, #new_pack").val(0),t.endT(arguments)},reload_docs_iframe:function(s){t.startT(arguments);var r=e("#docs-url").attr("rel");t.hasValue(s.attr("data-docs-index"))&&(r+="&docs_index=1"),t.hasValue(s.attr("data-prop-group"))&&(r+="&prop_group="+s.attr("data-prop-group")),t.hasValue(s.attr("data-prop"))&&(r+="&prop="+s.attr("data-prop"));e("#docs_iframe");window.frames.docs_iframe.location=r,t.endT(arguments)},reload_iframe:function(s,r,a,o){var n=r+"_iframe",i=e("#"+n);a=a||i.attr("rel"),"docs"===r&&(t.hasValue(s.attr("data-docs-index"))&&(a+="&docs_index=1"),t.hasValue(s.attr("data-prop-group"))&&(a+="&prop_group="+s.attr("data-prop-group")),t.hasValue(s.attr("data-prop"))&&(a+="&prop="+s.attr("data-prop"))),(o||"1"!==i.attr("data-frame-loaded")||t.isDomEl(s.closest(".dialog-footer")))&&(window.frames[n].location=a,i.attr("data-frame-loaded",1))},toggle_help_info:function(e){e.next().slideToggle("fast",function(){})},scroll_to_bottom:function(e){t.startT(arguments)},toggle_multi_checkboxes:function(s){t.startT(arguments);var r=e("#available-folders, #custom-css");s.hasClass("on")?r.find("input").prop("checked",!1).end().find(".fake-checkbox").add(s).removeClass("on"):r.find("input").prop("checked",!0).end().find(".fake-checkbox").add(s).addClass("on"),t.endT(arguments)},get_dyn_meta:function(e){t.startT(arguments);var s=e.closest(".dyn-wrap");v.dyn_meta={wrap:s,slug:s.data("slug"),add_input:s.find(".new-item-input"),add_button:s.find(".new-item-add"),menu:s.find(".tvr-dyn-menu")};var r=e.closest("li.dyn-item");return t.isDomEl(r)&&(v.dyn_meta.item=r),t.endT(arguments),v.dyn_meta},dyn_add_item:function(s){t.startT(arguments);var r=v.get_dyn_meta(s),a=r.add_input.val(),o=r.wrap.data("base-key");if(o)var n={newName:o+=r.menu.find("li.dyn-item").length+1,newNameHuman:a};else if(!(n=t.new_name_checks(a,TvrLang.item)))return!1;var i=v.dom_replacements(!1,"dyn_item",e(v.templates[r.slug+"_menu_item"]),"item",n.newName,n.newNameHuman);r.menu.append(i).find("li").filter(":last").hide().fadeIn("fast",function(){r.add_input.val(""),"mqs"==r.slug&&v.toggle_edit_item(e(this).find(".edit-item"))}),t.endT(arguments)},toggle_edit_item:function(e){t.startT(arguments);var s=v.get_dyn_meta(e).item.find(".edit-item-form");s.hasClass("show")?s.removeClass("show"):s.addClass("show"),t.endT(arguments)},delete_item:function(s){t.startT(arguments),s.closest("li").fadeOut("slow",function(){e(this).remove()}),t.endT(arguments)},reveal_form_opts:function(e){t.startT(arguments);var s=e.attr("rel"),r=e.closest("li").siblings(".hidden."+s);r.hasClass("show")?r.removeClass("show"):r.addClass("show"),t.endT(arguments)},toggle_system_menu_options:function(e){t.startT(arguments);var s=(e=e.closest("li")).find(".tvr-input-wrap"),r=e.find(".mt-menu-text"),a=e.closest("ul");s.hasClass("show")?(r.text(r.data("ll")),a.removeClass("expanded"),s.removeClass("show")):(r.text(r.data("sl")),a.addClass("expanded"),s.addClass("show")),t.endT(arguments)},change_preview_url:function(e){t.startT(arguments),c.update_prog_indicator("plus",TvrLang.load_wp);var r=e.closest("li"),a=t.extract_url_path(r.find("input").val()),o=t.rtrim(v.homeUrl,"/")+a;s&&(s.stat.win.location=o),v.toggle_system_menu_options(r.find(".menu-input-toggle")),t.endT(arguments)},after_style_options_deleted:function(e){v.totalSels<1&&v.toolbar_adjusted()},menuOrder:{},refresh_sortable:function(){t.startT(arguments);for(var s=document.getElementById("tvr-menu"),r=s.getElementsByClassName("selector-sub"),a={scroll:!0,scrollSensitivity:50,scrollSpeed:10,onStart:function(r){var a=e(r.item);t.currentlySorting=a.hasClass("section-tag")?"section":"selector",e(s).addClass("sorting-in-progress"),v.get_dom_order({},a,{prevSec:"",newSec:"",orig_order:["this"],new_order:["this"],map:[]},!1)},onEnd:function(r){t.currentlySorting=!1,e(s).removeClass("sorting-in-progress"),v.get_dom_order({},e(r.item),v.menuOrder,!0)}},o=e.extend(!0,{},a,{group:"folders",handle:".folder-icon",onUpdate:function(s){var r=v.get_meta(e(s.item),"section"),a=r.sectionM.prev().attr("id");t.hasValue(a)?r.section.detach().insertAfter("#"+a.replace("strk","opts")):r.section.detach().prependTo("#tvr-options"),t.hasValue(v.selInFocusID)&&v.update_prev_next_sel_buttons(v.selInFocusID)}}),n=e.extend(!0,{},a,{group:"selectors",handle:".selector-sortable-icon",onMove:function(e,t){if(e.related.className.indexOf("strk-sec")>-1)return!1},onUpdate:function(e){v.mirror_move_and_log({},e)},onAdd:function(e){v.selector_received({},e)}}),i=(new Sortable(s,o),[]),l=0;l<r.length;l++)i[l]=new Sortable(r[l],n);t.endT(arguments)},get_dom_order:function(r,a,o,n,l){var d=a.closest("ul"),_=a.hasClass("section-tag")?"section":"selector",u="section"===_?["root"]:["section"],p=v.get_meta(a,_);if("selector"===_){var f=d.closest(".section-tag");n?o.newSec=f.attr("id").replace("strk-",""):o.prevSec=p.sectionSlug,o.moved_item=p.selectorSlug}else o.moved_item=p.sectionSlug;if(l&&!n){var g="section"===_?v.uiData:v.uiData[p.sectionSlug];o.orig_order=Object.keys(g)}else d.find("> li").not(".sortable-ghost, .add-selector-list-item").each(function(t){var s=e(this),r=v.get_meta(s,_)[_+"Slug"];n?o.new_order.push(r):o.orig_order.push(r)});if(n){if(o.syncRenameConfig&&(r=i.modify_main_js_object("rename",r,v.menuOrder.syncRenameConfig),o.syncRenameConfig=!1),r.moveUpdate=[],r.orderUpdate=[],r=i.modify_main_js_object("reorder",r,{callbackDepth:u,maxDepth:u[0],targetSection:p.sectionSlug,targetSelector:p.selectorSlug,menuOrder:o}),"selector"===_){var m=v.get_meta(f,"section");if(r=v.js_check_values(r,m),r=i.modify_main_js_object("update_section_css",r,{M:m,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]}),o.prevSec!==o.newSec){t.checkObject(v.uiData,[o.prevSec,"this","disabled"])!==t.checkObject(v.uiData,[o.newSec,"this","disabled"])&&(r=i.modify_main_js_object("group_to_css",r,{M:p,maxDepth:"group",recurse_key:["m_query"]}));var h=v.get_meta(e("#strk-"+o.prevSec),"section");r=v.js_check_values(r,h),r=i.modify_main_js_object("update_section_css",r,{M:h,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]})}r=c.user_action(r,{items:["selector"],val:v.title(p.selectorM.find("span.selector-sortable-icon")),M:p,pathTT:!0,icon:"move-icon lg-icon"})}else s.edit_style_nodes(p,"reorder"),r=c.user_action(r,{items:["section"],val:v.title(p.sectionM.find("span.folder-icon")),M:p,icon:"move-icon lg-icon"});l||c.ajax_save_settings({settings:r})}return v.menuOrder=o,r},mirror_move_and_log:function(e,s,r){t.startT(arguments),t.hasValue(v.selInFocusID)&&v.tvr_iterate_selectors_v(!1,v.selInFocusID),t.endT(arguments)},selector_received:function(s,r){t.startT(arguments);var a=e(r.item),o=v.get_meta(a,"selector"),n=v.is_cur("sel",o.selectorID);v.oM=o;var i=v.get_meta(a.closest(".section-tag"),"section");v.update_count(o.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),v.update_count(i.sectionM.find(".selector-count-state"),"add",1,"selector","");var l=t.resolve_unique_name(o.selectorH,i.sectionM,".selector-name","Moved",o.selectorMID),c=t.convert_to_param(l);return v.dom_replacements(o,"selector",o.selector.add(o.selectorM),o.sectionSlug,i.sectionSlug,i.sectionH,o.selectorSlug,c,l,o.selectorM.find(".selector-css-textarea").val()),c!==o.selectorSlug&&(v.menuOrder.syncRenameConfig={rebuild:!0,callbackDepth:["section","selector"],maxDepth:"selector",targetDepth:"selector",targetSection:o.sectionSlug,targetSelector:o.selectorSlug,new_key:c,new_label:l,new_code:o.selectorCode}),i=v.get_meta(o.selectorM,"selector"),n&&(v.update_global_vars(i),o.selector.detach().prependTo(i.section.find("ul.selector-sub"))),v.sortableLoading=!1,v.mirror_move_and_log(s,r),t.endT(arguments),i},toggle_folder:function(e,s){t.startT(arguments);var r=v.get_meta(e,"section");r.sectionM.find(".menu-arrow").hasClass("on")?v.close_folder(r,s):v.open_folder(r,s),t.endT(arguments)},open_folder:function(e,t){t||this.load_folder_menu_selectors(e),e.sectionM.addClass("is-open").find(".menu-arrow").addClass("on"),e.sectionM.find("ul.selector-sub").addClass("normal")},close_folder:function(e){this.unload_folder_menu_selectors(e),e.sectionM.removeClass("is-open").find(".menu-arrow").removeClass("on"),e.sectionM.find("ul.selector-sub").removeClass("normal")},open_close_all_folders:function(t){v.stat.mainMenu.find("span.folder-menu-arrow").each(function(){var s=e(this),r=s.hasClass("on");(r&&"close"===t||!r&&"open"===t)&&v.toggle_folder(s)})},load_folder_menu_selectors:function(e){var t=e.sectionM.find(".selector-sub");t.find("li:not(.add-selector-list-item)").remove(),t.append(v.load_selector(e,{items:["selectorM"]})),v.js_check_values({},v.get_meta(e.sectionM,"section"))},unload_folder_menu_selectors:function(e){var t=e.sectionM.find(".selector-sub").find("li:not(.add-selector-list-item)");v.menuSelInFocusID&&(t=t.not("#"+v.menuSelInFocusID)),t.remove()},unload_all_option_selectors:function(){t.startT(arguments),v.stat.opts.find("ul.selector-sub").find("> li:not(#"+v.selInFocusID+")").remove(),t.endT(arguments)},update_editor_refs:function(e,s,r,a,o,n){return t.startT(arguments),!1},dom_replacements:function(s,r,a,o,n,i,l,c,d,_,u){if(t.startT(arguments),"section"==r&&(a.find("input, textarea.property-input").each(function(s){var r=e(this);t.hasValue(r.attr("name"))&&r.attr("name",r.attr("name").replace("tvr_mcth["+o+"]","tvr_mcth["+n+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+n+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+n+"]"))}),a.find(".section-name .name-text").text(i),a.find(".section-display-name").val(i),a.find(".rename-input").val(i),a.find(".selector-tag, .group-tag, .subgroup-tag, .property-tag, pre.custom-css-pre").add(a).each(function(){var t=e(this);t.attr("id",t.attr("id").replace(o,n))})),"selector"==r&&(a.find(".selector-name").attr("title",t.regular_escape_quotes(_)),a.find(".selector-name .name-text").text(d),a.find(".selector-label").val(d+"|"+_),a.find(".selector-name-input").val(d),a.find(".selector-css-textarea").val(_)),"group"==r&&(a.removeAttr("id"),a.attr("class",a.attr("class").replace("property-fields-all-devices","property-fields-"+u)),"all-devices"!=u&&a.find("input.property-input, textarea.property-input, input.disabled-tracker, input.chained-tracker, input.post-sel-css, input.post-sel-data").each(function(t){var s=e(this);s.attr("name",s.attr("name").replace("tvr_mcth","tvr_mcth[non_section][m_query]["+u+"]"))}).end().find("div.property-tag, div.subgroup-tag, pre.custom-css-pre").each(function(){var t=e(this);t.attr("id",t.attr("id").replace("-all-devices","-"+u))})),"selector"!==r&&"group"!==r||(a.find("div.sel-code-alias").text(_),a.find("input, textarea.property-input").each(function(s){var r=e(this);t.hasValue(r.attr("name"))&&r.attr("name",r.attr("name").replace("tvr_mcth["+o+"]["+l+"]","tvr_mcth["+n+"]["+c+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+n+"]["+c+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+n+"]["+c+"]"))}),a.find(".selector-tag, .group-tag, .subgroup-tag, .property-tag, pre.custom-css-pre").add(a).each(function(){try{var t=e(this);t.attr("id",t.attr("id").replace(o+"-"+l,n+"-"+c))}catch(e){}})),"dyn_item"==r){var p=o,f=n,g=i;a.attr("id",a.attr("id").replace(p,f)),a.find("input, textarea").each(function(){var t=e(this);t.attr("name",t.attr("name").replace("["+p+"]","["+f+"]"))}),a.find(".script-display_name, .mquery-label").val(g),a.find(".name-text").text(g)}return t.endT(arguments),a},add_section:function(s,r){t.startT(arguments);var a=!1;r||(r=TvrLang.untitled_folder,a=!0),r=t.resolve_unique_name(r,e("#tvr-menu"),".section-name");var o=v.dom_replacements(!1,"section",e(v.templates.sectionM).add(v.templates.section),"selector_section",t.convert_to_param(r),r);e("#tvr-options").append(o[1]);var n=e("#tvr-menu");n.append(o[0]);var i=n.find("li.section-tag").filter(":last"),d=v.get_meta(i,"section");i.hide().fadeIn("fast",function(){var t=e("#section-count-state");v.update_count(t,"add",1,"section"),a&&(v.toggle_rename_section(i.find("span.toggle-rename-section")),i.find("input.rename-input").select())});var _=l.dom_to_data({M:d,domDepth:"section",return:"mtData"});v.refresh_sortable();n.closest(".menu-scrollable");return t.scroll_to(e("#main-menu-popdown"),{bottom:!0}),_=c.user_action(_,{items:[r],val:v.title(s),icon:[{icon:v.hi.section},{icon:"add-icon tvr-icon"}]}),c.ajax_save_settings({settings:_}),t.endT(arguments),!0},toggle_rename_section:function(e){t.startT(arguments);var s=v.get_meta(e,"section"),r=(s=v.get_meta(e,"section")).sectionM.find(".edit-section-form"),a=s.sectionM.find(".section-name");r.hasClass("show")?(a.show(),r.removeClass("show")):(a.hide(),r.addClass("show"))},action_rename_section:function(r){t.startT(arguments);var a=v.get_meta(r,"section"),o=a.sectionM.find(".rename-input").val();if(t.convert_to_param(o)==a.sectionSlug)(n=[]).newName=a.sectionSlug,n.newNameHuman=o;else{var n=t.new_name_checks(o,"folder");if(!n)return!1}var l=a.sectionM.find("input.section-display-name").val(),d=n.newName,_=n.newNameHuman,u=a.sectionSlug,p=a.sectionM.add(a.section);s&&(p=p.add(e(s.get_style_nodes(a))));var f=v.is_cur("sec",u);v.dom_replacements(a,"section",p,u,d,_),a=v.get_meta(e("#strk-"+d),"section"),v.toggle_rename_section(a.sectionM),f&&v.update_global_vars(v.get_meta(a.section.find("li.in-focus"),"selector"));var g=i.modify_main_js_object("rename",{},{rebuild:!0,callbackDepth:["section"],maxDepth:"section",targetDepth:"section",targetSection:u,new_key:d,new_label:_}),m="";l!=_&&(m+=TvrLang.previous_name+": "+l+"\n",m+=TvrLang.new_name+": "+_),g=c.user_action(g,{items:["section"],val:v.title(r),M:a,valTT:m,icon:[{icon:v.hi.section},{icon:"edit-icon tvr-icon"}]}),c.ajax_save_settings({settings:g}),t.endT(arguments)},copy_section:function(r){t.startT(arguments);var a=v.get_meta(r,"section");c.log_action(a.sectionM,"copy");var o=a.sectionSlug,n=a.sectionH,l=t.resolve_unique_name(a.sectionH,e("#tvr-menu"),".section-name","Copy"),d=t.convert_to_param(l),_=!1,u=[a.sectionM[0],a.section[0]];s&&(_=s.get_style_nodes(a),u=u.concat(_)),console.log("origStyleNodes",_);var p=v.dom_replacements(a,"section",v.proper_clone(e(u)),o,d,l);p.removeAttr("copy-in-prog").find("li.in-focus").removeClass("in-focus"),p.find("img.ajax-loader").remove(),a.sectionM.after(p[0]),a.section.after(p[1]),s&&s.insertCopiedStyleNodes(_,p);var f=e("#section-count-state"),g=a.sectionM.find("span.selector-count-state").attr("rel");v.update_count(f,"add",1,"section",g),c.unlog_action(a.sectionM,"copy"),t.hasValue(v.selInFocusID)&&v.update_prev_next_sel_buttons(v.selInFocusID);var m=i.modify_main_js_object("copy",{},{M:a,targetDepth:"section",maxDepth:"section",origSlug:o,origHuman:n,newSlug:d,newHuman:l});m=i.reorder_after_copy(m,a.sectionM,!0),v.refresh_sortable(),m=c.user_action(m,{items:["section"],val:v.title(r),M:a,valTT:l,icon:r.attr("class")}),c.ajax_save_settings({settings:m}),t.endT(arguments)},delete_section:function(r){t.startT(arguments);var a=v.get_meta(r,"section");if(c.action_in_prog(a.sectionM,"delete")||c.action_in_prog(a.sectionM,"all-sels-loading"))return!1;c.log_action(a.sectionM,"delete"),a.sectionM.fadeOut("fast",function(){var o=a.sectionM.find("span.selector-count-state").attr("rel");v.update_count(e("#section-count-state"),"subtract",1,"section",o);var n=t.hasValue(v.selInFocusID)&&v.is_cur("sec",a.sectionSlug);if(n){v.expanded("quick_section")&&v.close_quick_edit();var l=v.itemScan("selector","next","getID",a.sectionSlug);l||(l=v.itemScan("selector","prev","getID",a.sectionSlug))}a.section.remove(),a.sectionM.remove(),!s||s.edit_style_nodes(a,"delete");var d=i.modify_main_js_object("delete",{},{rebuild:!0,maxDepth:"section",targetDepth:"section",targetSection:a.sectionSlug});v.after_style_options_deleted("section"),n&&l&&v.tvr_iterate_selectors_v(!1,l),l||v.update_prev_next_sel_buttons(!1),d=c.user_action(d,{items:["section"],val:v.title(r),M:a,icon:r.attr("class")}),c.ajax_save_settings({settings:d})}),t.endT(arguments)},toggle_add_selector:function(e){t.startT(arguments);var s=v.get_meta(e,"section").sectionM.find(".add-selector-form");s.hasClass("show")?v.close_add_selector(s):v.reveal_add_selector(s),t.endT(arguments)},reveal_add_selector:function(e){t.startT(arguments);var s=v.get_meta(e,"section");e.addClass("show"),s.sectionM.find(".menu-arrow").hasClass("on")||v.toggle_folder(s.sectionM),t.endT(arguments)},close_add_selector:function(e){t.startT(arguments),e.removeClass("show"),e.find("input.selector-css-textarea, input.selector-name-input").val(""),t.endT(arguments)},selector_checks_values:function(e,s,r){t.startT(arguments);var a=v.strip_beyoned_brace(e.val(),"name");if(""==a)return alert(TvrLang.enter_selector_name),!1;if(t.isNumeric(a))return alert("Plain numbers are not permitted as names. Please use some letters too."),!1;if(t.convert_to_param(a)==r)(o=[]).newName=r,o.newNameHuman=a;else{var o=t.new_name_checks(a,"selector");if(!o)return!1}return s?(o.code=s,t.endT(arguments),o):(alert(TvrLang.enter_css),!1)},show_hide_sel_custom:function(e,s){t.startT(arguments),v.analyse_sel_code(e).custom_styles?s.addClass("custom-styles"):s.removeClass("custom-styles"),t.endT(arguments)},analyse_sel_code:function(e){t.startT(arguments);var s=[];if(e.indexOf("{")>=0){s.custom_styles=!0;var r=e.split("{");s.code=r[0]}else s.custom_styles=!1,s.code=e;return t.endT(arguments),s},add_selector:function(s){if(t.startT(arguments),!v.allowed_action(s,"Add Sel"))return!1;var r=v.get_meta(s,"section"),a=v.selector_checks_values(r.sectionM.find(".add-selector-form .selector-name-input"),v.strip_beyoned_brace(r.sectionM.find(".add-selector-form .selector-css-textarea").val()),!1);if(!a)return!1;var n=v.dom_replacements(r,"selector",e(v.templates.selectorM).add(v.templates.selector),"selector_section",r.sectionSlug,r.sectionM.find(".name-text").text(),"selector_css",a.newName,a.newNameHuman,a.code),d=e(n[1]),_=v.pref.pg_focus;i.maybe_add_group_template(d,r.sectionSlug,a.newName,a.newNameHuman,a.code,r.tabSlug,_),v.editor_and_gui()&&"code"!==_&&i.maybe_add_group_template(d,r.sectionSlug,a.newName,a.newNameHuman,a.code,r.tabSlug,"code"),v.sidebar_showing()&&this.set_sidebar_size(v.editor_only_left(),!1),r.sectionM.find(".selector-sub").append(n[0]),r.section.find(".selector-sub").append(d),v.update_count(r.sectionM.find(".selector-count-state"),"add",1,"selector",""),r=v.get_meta(r.section.find(".selector-tag").last(),"selector");var u=!1;v.expanded("quick_section")&&(u=!0,v.close_quick_edit());var p=l.dom_to_data({M:r,domDepth:"selector",clean:{selector:[["styles"],[_]]},cleanMaxDepth:"selector",skipSassCompile:!0});if(p=i.run_global_scans(p,["update_indexes"]),i.updateObjectAndSavePackage(p.savePackage,[{action:"append",trail:[r.sectionSlug,a.newName],key:"jsu",data:v.jsuVersion}]),v.tvr_iterate_selectors_v(r.selectorM),v.maybe_default_to_pg(),v.refresh_sortable(),v.close_add_selector(r.sectionM.find(".add-selector-form")),v.meta.sectionM.find(".add-selector-form").find(".selector-name-input, .selector-css-textarea").val(""),v.expanded("quick_selector")&&v.close_quick_edit(),u&&v.quick_edit(e("#sec-in-focus")),v.expanded("main_menu")){var f=r.sectionM.find(".menu-arrow");v.toggle_folder(f,!0),v.toggle_folder(f,!1)}return o.maybe_resume_editor_focus(),p=c.user_action(p,{items:["selector"],val:v.title(s),M:r,pathTT:!0,icon:[{icon:v.hi.selector},{icon:"add-icon tvr-icon"}]}),c.ajax_save_settings({settings:p}),t.endT(arguments),!0},load_selector:function(s,r){t.startT(arguments);var a=[];if(r.items){var o=!1,n=r.pg_focus?r.pg_focus:v.pref.pg_focus,c=v.editor_and_gui()&&"code"!==n;if(r.replaceExisting){var d=this.get_code_meta(s);if(t.isDomEl(d.$property_fields)){if("code"===n)return s.selector.find(".group-tag").not(d.$group).remove(),s.selector;o=d.$property_fields.detach()}}for(var _=0;_<r.items.length;_++){var u=r.items[_],p="selectorM"===u?"strk":"opts",f="selectorM"===u?"selector":"property",g="#"+p+"-"+s.sectionSlug,m=g+"-"+s.selectorSlug,h=e(m);if(!h.length||r.replaceExisting){s.groupSlug=n;var b={M:s,load:"selector",templateKey:u,maxDepth:f,callbackDepth:["selector","group","property"]},y=r.mq_key?r.mq_key:v.get_mq_focus();if("selector"===u?"all-devices"===y?(b.recurse_key=["important"],b.mq_key=y):(b.onlyRecurse=!0,b.mq_key=y):"selectorM"===u&&(b.incRecurse=!1),"selectorM"===u)h=l.data_to_template(s,b);else if("selector"===u){v.stat.styleComponents.html("");var w=(h=i.get_selector_data(s,y).data?l.data_to_template(s,b):v.dom_replacements(!1,"selector",e(v.templates.selector),"selector_section",s.sectionSlug,!1,"selector_css",s.selectorSlug,s.selectorH,s.selectorCode)).find(".group-tag-"+n),T=w.find("div.property-fields-"+y);if(!T.length&&(i.maybe_add_group_template(h,s.sectionSlug,s.selectorSlug,s.selectorH,s.selectorCode,y,n),T=w.find("div.property-fields-"+y),"flexbox"===n||"grid"===n)){var k=i.get_js_object_data([s.sectionSlug,s.selectorSlug],"all-devices"),x="flexbox"===n?"flexitem":"griditem";if(t.checkObject(k.data,["pg_"+x])){var C="flexbox"===n?"flexcontainer":"generalgrid";i.flip_flex_or_grid_item_switch(T,T.find(".subgroup-control-"+C),k.levels,x),T.add(v.stat.grid).addClass("show-single-griditem"),"grid"===n&&(v.pref.grid_focus="griditems")}}if("grid"===n){var S=i.get_js_object_data([s.sectionSlug,s.selectorSlug],"all-devices").data,M=v.get_nth_focus(S);w.find(".tab-control-griditems:not(.nth-item-radios):not(.sub-label)").find("input.property-input").each(function(){var s=e(this);s.attr("name",t.replace_variable_name_attr(s.attr("name"),M))}),M&&w.find("span.grid-item-num").text(": "+M),parseInt(v.pref.grid_highlight)&&w.find(".grid-highlight").addClass("on"),parseInt(v.pref.expand_grid)&&w.find(".expand-grid").addClass("on")}c&&(o?h.find(".group-tag-code").append(o):i.maybe_add_group_template(h,s.sectionSlug,s.selectorSlug,s.selectorH,s.selectorCode,y,"code")),v.sidebar_showing()&&(w.addClass("show"),this.set_sidebar_size(v.editor_only_left(),!1)),h.addClass("in-focus")}r.replaceExisting?e("#"+r.replaceExisting).replaceWith(h):e(g).find(".selector-sub").append(h)}a[_]=h}}return t.endT(arguments),a.length>1?a:a[0]},get_nth_focus:function(e){if(!e){var s=v.getM();e=v.uiData[s.sectionSlug][s.selectorSlug]}var r=t.checkObject(e,["nth_item"]);return!1===r?1:parseInt(r)},getM:function(){return v.get_meta(e("#"+v.selInFocusID),"selector")},toggle_modify_selector:function(e){var t=v.get_meta(e,"selector").selectorM.find(".edit-selector-form");t.hasClass("show")?(t.removeClass("show"),v.expanded("quick_selector")&&v.close_quick_edit()):t.addClass("show")},strip_beyoned_brace:function(e){return(e=e.split("{"))[0]?(e=e[0]).trim():""},action_modify_selector:function(r,a,n,d){t.startT(arguments);var _=v.get_meta(r,"selector");a=a||{};var u=v.selector_checks_values(_.selectorM.find(".selector-name-input"),v.strip_beyoned_brace(_.selectorM.find(".selector-css-textarea").val()),_.selectorSlug);if(!u)return!1;var p=_.selectorM.find(".selector-label").val().split("|"),f=p[0],g=p[1],m=_.selectorSlug,h=g!==u.code,b=u.newName,y=u.newNameHuman,w=_.sectionSlug,T=_.selectorM.add(_.selector);v.dom_replacements(_,"selector",T,w,w,_.sectionH,m,b,y,u.code);if(v.is_cur("sel",_.selectorID)&&(v.update_global_vars(v.get_meta(_.section.find("li.in-focus"),"selector")),v.expanded("quick_selector")&&v.close_quick_edit()),!v.el_selected&&v.iframe_functions_loaded()&&s.reposition_overlays({con:"reg"}),a=i.modify_main_js_object("rename",{},{rebuild:!0,callbackDepth:["section","selector"],maxDepth:"selector",targetDepth:"selector",targetSection:w,targetSelector:m,new_key:b,new_label:y,new_code:u.code}),_=v.get_meta(r,"selector"),a=i.modify_main_js_object("group_to_css",a,{M:_,maxDepth:"group",recurse_key:["m_query"],triggeredFromEditor:!0,selCodeChanged:!!h&&{oldCode:g,newCode:u.code}}),d||o.update_adaptable_editor({M:_,directContent:l.resolve_inline_editor_content(_),contentShouldChange:!0}),n){var k=v.get_meta(e("#strk-"+n),"section");if(!t.new_name_checks(y,"selector",k.sectionM))return!1;k.sectionM.find(".menu-arrow").hasClass("on")||v.open_folder(k),_.sectionM.find(".menu-arrow").hasClass("on")||v.open_folder(_),_=v.get_meta(e("#"+_.selectorMID),"selector"),a=v.get_dom_order(a,_.selectorM,{prevSec:"",newSec:"",orig_order:["this"],new_order:["this"],map:[]},!1,!0),_.selectorM.detach().appendTo(k.sectionM.find("ul.selector-sub")),_=v.selector_received({},{item:_.selectorM}),a=v.get_dom_order(a,_.selectorM,v.menuOrder,!0,!0)}var x="";return f!=y&&(x+=TvrLang.previous_name+": "+f+"\n",x+=TvrLang.new_name+": "+y),g!=u.code&&(x+=x?"\n":"",x+=TvrLang.previous_code+": "+g+"\n",x+=TvrLang.new_code+": "+u.code),a=c.user_action(a,{items:["selector"],val:v.title(r),M:_,valTT:x,pathTT:!0,icon:[{icon:v.hi.selector},{icon:"edit-icon tvr-icon"}]}),c.ajax_save_settings({settings:a}),_.selectorM.find(".edit-selector-form").hasClass("show")&&v.toggle_modify_selector(_.selectorM),t.endT(arguments),!0},proper_clone:function(e){t.startT(arguments);var s=e.clone();return s.find("div.sp-replacer, div.sp-container").remove(),s.find("input.color.bound").removeClass("bound"),v.colorpicker_bind(s),t.endT(arguments),s},copy_selector:function(s){if(!v.allowed_action(s,"Add Sel"))return!1;var r=v.get_meta(s,"selector"),a=v.load_selector(r,{items:["selector"]}),o=(r=v.get_meta(a,"selector")).selectorSlug,n=r.selectorH,l=t.resolve_unique_name(r.selectorH,r.sectionM,".selector-name","Copy"),d=t.convert_to_param(l),_=v.dom_replacements(r,"selector",v.proper_clone(e([r.selectorM[0],r.selector[0]])),r.sectionSlug,r.sectionSlug,n,o,d,l,r.selectorM.find(".selector-css-textarea").val());_.removeClass("in-focus").removeAttr("copy-in-prog").find("img.ajax-loader").remove(),r.selectorM.after(_[0]),r.selector.after(_[1]),v.update_count(r.sectionM.find(".selector-count-state"),"add",1,"selector",""),t.hasValue(v.selInFocusID)&&v.update_prev_next_sel_buttons(v.selInFocusID);var u=i.modify_main_js_object("copy",{},{M:r,targetDepth:"selector",maxDepth:"selector",origSlug:o,origHuman:n,newSlug:d,newHuman:l});u=i.reorder_after_copy(u,r.selectorM,!0),u=i.modify_main_js_object("update_section_css",u,{M:r,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]}),u=c.user_action(u,{items:["selector"],val:v.title(s),M:r,pathTT:!0,valTT:l,icon:s.attr("class")}),c.ajax_save_settings({settings:u})},delete_selector:function(e){t.startT(arguments);var s=v.get_meta(e,"selector");if(c.action_in_prog(s.selectorM,"delete")||c.action_in_prog(s.selectorM,"data-load"))return!1;c.log_action(s.selectorM,"delete"),s.selectorM.fadeOut("fast",function(){var r=v.expanded("quick_selector"),a=t.hasValue(v.selInFocusID)&&v.is_cur("sel",s.selectorID);if(v.update_count(s.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),a){r&&v.close_quick_edit();var o=v.itemScan("selector","next","getID",s.sectionSlug,s.selectorSlug,{incCurrentSection:!0});o||(o=v.itemScan("selector","prev","getID",s.sectionSlug,s.selectorSlug,{incCurrentSection:!0}))}s.selector.remove(),s.selectorM.remove();var n=i.modify_main_js_object("delete",{},{rebuild:!0,callbackDepth:["section","selector"],maxDepth:"selector",targetDepth:"selector",targetSection:s.sectionSlug,targetSelector:s.selectorSlug});n=i.modify_main_js_object("update_section_css",n,{M:s,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]}),v.after_style_options_deleted("selector"),n=v.js_check_values(n,s),a&&o&&v.tvr_iterate_selectors_v(!1,o),o||v.update_prev_next_sel_buttons(!1),n=c.user_action(n,{items:["selector"],val:v.title(e),M:s,pathTT:!0,icon:[{icon:v.hi.selector},{icon:e.attr("class")}]}),c.ajax_save_settings({settings:n})}),t.endT(arguments)},remove_property_group:function(e,s){t.startT(arguments);var r=e.group.find("div.property-fields-"+s);return r?(r.remove(),t.endT(arguments),!0):(t.endT(arguments),!1)},update_accordion:function(e,r){t.startT(arguments);var a=r.find("li.accordion-item"),o=e.parent(),n=o.hasClass("property-menu");if(o.hasClass("show-content"))var i=!0;return r.find(".accordion-menu-arrow.on").removeClass("on"),a.length?a.slideUp(function(){r.find(".show-content").removeClass("show-content")}):r.find(".show-content").removeClass("show-content"),i?(t.endT(arguments),!1):(n&&(v.pgInFocusWiz=o.attr("id").replace("comp-",""),t.isDomEl(s.triggerEl)&&(s.get_computed_styles({data:s.triggerEl,con:"obj",intelli:!0}),v.refresh_wizard_comp_css())),o.find(".accordion-menu-arrow").addClass("on"),e.siblings("li.accordion-item").length?e.siblings("li.accordion-item").slideDown(function(){o.addClass("show-content")}):o.addClass("show-content"),t.endT(arguments),!1)},trigger_pg_icon_click:function(e){e=e||v.pref.pg_focus,v.stat.css_icons.find("ul.styling-option-icons").find(".pg-icon-"+e).trigger("click")},pg_icon_pressed:function(r,a){t.startT(arguments);var o=e("#"+v.selInFocusID);if(!t.isDomEl(o))return!1;var n=v.get_mq_focus(),i=r.attr("rel"),l=v.get_meta(o,"selector");v.pref.pg_focus=i;var c=(l=v.ensure_selector_and_pg_loaded(l,a,n,i)).selector.find(".styling-options"),d=v.stat.css_icons.find(".styling-option-icons"),_=i;v.update_tab(c,".group-tag",d,_,".pg-icon",".pg-focus"),"grid"===i&&v.js_check_values({},l),v.after_tab_switch(l),v.editor_and_gui()&&v.maybe_adjust_side_options(),t.action_after_timeout("pg_expensive",3,{item:function(e){v.iframe_functions_loaded()&&s.get_computed_styles({data:v.curSelCSS,con:"str"}),v.refresh_comp_css()},args:[l]}),e.get(v.ajaxUrl+"&pg_focus="+i,function(){}),t.endT(arguments)},ensure_selector_and_pg_loaded:function(e,t,s,r){return t||v.load_selector(e,{items:["selector"],replaceExisting:e.selectorID,mq_key:s}).addClass("in-focus"),v.get_meta(v.get_pg_focus_obj(r),"group")},clear_data_level:function(s,r){t.startT(arguments);var a,n=s.attr("data-input-level"),l="pgtab"===n,d=l?"group":n;r||(r="tab"===n?v.get_meta(e("#"+v.selInFocusID),"selector"):v.get_meta(s,d));var _={M:r,clear:{},clean:{}},u=["styles","pie","pg_chained","pg_flexitem","pg_griditem","ast"];r.selectorSlug;switch(n){case"section":a=r.section.find("div.property-tag"),_.clear.section=[!1,u];break;case"selector":a=r.selector.find("div.property-tag");var p=r.selectorM.find(".pie-toggle");p.hasClass("active")&&v.input_icon_toggle(p,!0,!0),_.clear.selector=[u];break;case"tab":var f=s.closest("span.mq-tab").attr("rel");a=r.selector.find("div.property-fields-"+f).find("div.property-tag"),_.mq_key=f,_.onlyRecurse="all-devices"!==f,_.clear.selector=[u];break;case"group":case"pgtab":case"subgroup":if(_.mq_key=r.tabSlug,"all-devices"===_.mq_key?_.recurse_key=["important"]:_.onlyRecurse=!0,_.clear.selector=[["styles"],[r.groupSlug]],"group"===n||"flexbox"===r.groupSlug)a=v.get_group(r).find("div.property-tag");else{var g=!!l&&s.data("tab-group"),m=l?Object.keys(TvrMT.data.prog.pg_tab_props[r.groupSlug][g]):TvrMT.data.prog.subGroupKeys[r.subgroupSlug];a=v.get_subgroup_or_tabgroup(r,!1,g),_.clear.selector.push(m),v.maybe_add_nth_index_filter(l,g,r,s,_.clear.selector)}n="group"}v.clear_fields(a,s,n,r,_),_=i.modify_main_js_object("clear",_,{maxDepth:"selector",dontUpdateSavePackage:!0}),_=i.modify_main_js_object("group_to_css",_,{maxDepth:"group",recurse_key:["m_query"]}),_=i.modify_main_js_object("clean",_,{maxDepth:"selector",clean:_.clear}),_=v.js_check_values(_,r),v.editor_and_gui()&&o.gui_to_editor(!1,r),_=c.user_action(_,{items:[n],val:v.title(s),M:r,pathTT:"section"===n,icon:[{icon:c.h_i_class(n,r)},{icon:s.attr("class")}]}),c.ajax_save_settings({settings:_}),t.endT(arguments)},clear_fields:function(s,r,a,n,i){t.startT(arguments),s.each(function(){var s=e(this),r=s.prev(".subgroup-tag"),a=s.find("input.property-input, input.mt-supplementary-picker, textarea.property-input"),i=s.find("span.important-toggle"),l=s.hasClass("has-variable-line");if(a.val(""),l&&s.find(".tvr-input-wrap:not(:first-child)").remove(),a.hasClass("color")&&v.clear_spectrum_inputs(v.get_meta(s,"property"),!1),a.hasClass("mt-event-input")&&v.adjust_event_fields(a),a.hasClass("tvr-editor-hidden")){var c=v.stat.adaptableEditor,d=o.eds[c.attr("id")];c.hasClass("ace_editor")&&d&&o.set_editor_content(c,d,{M:n})}if(v.post_edit(a),i.hasClass("active")&&v.input_icon_toggle(i,!0,!0),t.isDomEl(r)){var _=r.find(".chained-toggle");_.hasClass("active")&&v.input_icon_toggle(_,!0,!0)}}),t.endT(arguments)},update_tab:function(s,r,a,n,i,l,c){t.startT(arguments);var d=a.find(i+"-"+n);if(a.find(i).removeClass("active").end().find(l).val(n),d.addClass("active"),!c){s.find(r+".show").removeClass("show");var _=s.find(r+"-"+n);if(_.addClass("show"),".mq-tab"===i&&s.addClass("show"),".pg-icon"===i&&s.find(r+"-"+n).find(".property-fields").removeClass("show").end().find(".property-fields-"+v.get_mq_focus()).addClass("show"),".dialog-tab"===i&&"display-css-code-dialog"===v.get_dialog_focus(a).attr("id")){parseInt(n)!==a.find(i).length-1&&(e.get(v.ajaxUrl+"&generated_css_focus="+n,function(){}),v.pref.generated_css_focus=n);var u=_.find("pre").first(),p=u.attr("id");if(!o.generated_css_auto_line_done[p]){var f=o.get_editor(u);o.find_selector_line(f,p,{find:o.current_selector_find_config(d.data("mode"))},!1)}}}t.endT(arguments)},mq_tab_pressed:function(s,r,a,o){t.startT(arguments);var i,l=!0,c="",d=s.attr("rel"),_=v.stat.res.find(".query-tabs");if(!o&&n.check_synced_page_builder_responsive_views(d))return!1;v.pref.mq_device_focus=d,e.get(v.ajaxUrl+"&mq_device_focus="+d,function(){});var u=t.hasValue(v.selInFocusID);if(u){var p=v.get_meta(v.get_pg_focus_obj(),"group");p=v.ensure_selector_and_pg_loaded(p,r,d,v.pref.pg_focus),l=!1,c=".property-fields",i=v.get_pg_focus_obj()}v.update_tab(i,c,_,d,".mq-tab",".device-focus",l),u&&(v.js_check_values({},p),v.after_tab_switch(p)),t.action_after_timeout("mq_expensive",3,{item:function(e){v.reset_preview_width_for_current_tab(e,!1,a),v.get_local_window_function("reset_mob_previews")()},args:[d]}),t.endT(arguments)},reset_preview_width_for_current_tab:function(e,t,s){e=e||v.get_mq_focus(),v.get_local_window_function("update_iframe_slider")(v.mqs[e].min,v.mqs[e].max,t,s)},get_local_window_function:function(e,t){return a=TvrMT.detachedWin,r=window.TvrMT.MTdetached,!t&&v.detached_window_available(!0)&&!!a.MTlocal&&a.MTLocalFunctionsReady?a.MTlocal[e]:window.MTlocal[e]},detached_window_available:function(e){return!(!TvrMT.detachedWin||!window.TvrMT.MTdetached)&&(a=TvrMT.detachedWin,r=window.TvrMT.MTdetached,!e||e&&v.pref.detach_preview)},after_tab_switch:function(e,r,a,n,i){if(t.startT(arguments),"css"!==e&&!v.pref.show_code_editor){"code"===e.groupSlug?v.stat.tvr.addClass("onlyInlineEditor"):v.stat.tvr.removeClass("onlyInlineEditor");var c=s?v.stat.tvr.add(v.stat.fHTML):v.stat.tvr;if("grid"===e.groupSlug){c.addClass("showGridControls"),v.default_to_tab("grid");e.group.find(".property-grid").hasClass("show-single-griditem")?v.stat.grid.addClass("show-single-griditem"):v.stat.grid.removeClass("show-single-griditem")}else c.removeClass("showGridControls");"code"!==e.groupSlug&&!v.editor_and_gui()||v.editor_to_gui_running||o.update_adaptable_editor({M:e,directContent:l.resolve_inline_editor_content(e),mode:parseInt(v.pref.allow_scss)?"scss":"css"}),t.action_after_timeout("tab_switch_deferred",3,{item:function(e){v.maybe_scroll_image_fields(e),v.adjust_scroll_buttons(e,"style")},args:[e]})}if("css"===e){var d=n.data("code-type");o.update_adaptable_editor({M:e,directContent:n.find("textarea").val(),mode:parseInt(v.pref.allow_scss)&&"css"===d?"scss":d})}t.endT(arguments)},open_property_dropdown:function(s){var r=e("#"+v.selInFocusID),a=s.fieldData,o=s.group;if(!t.isDomEl(r)||!a)return!1;var n=a[0].prop,i=r.find("div.field-"+o+"-"+n),l=i.hasClass("is-picker")?".property-input, .sp-preview-inner":".combo-arrow";i.find(l).trigger("click")},get_code_meta:function(e){var t=e.selector.find(".group-tag-code");return{$group:t,$property_fields:!!t&&t.find("div.property-fields-"+e.tabSlug),$editor:v.stat.adaptableEditor,editor:o.eds["adaptable-editor"]}},js_in_focus:function(){return!(!v.stat.tvr.hasClass("show_code_editor")||"js"!=v.get_css_focus())},default_to_tab:function(s){t.startT(arguments),"mq"===s?v.mq_tab_pressed(v.stat.res.find(".mq-tab-"+v.get_mq_focus())):"css"===s?v.css_tab_pressed(v.stat.code.find(".css-tab-"+v.get_css_focus())):"wizard"===s?v.adv_tab_pressed(e("#adv-tabs").find(".adv-tab-"+v.get_wizard_focus())):"grid"===s&&v.grid_tab_pressed(_.get_grid_fields().find(".grid-tab-"+v.get_grid_focus())),t.endT(arguments)},get_mq_focus:function(){var e=v.pref.mq_device_focus;return t.hasValue(e)&&t.hasValue(v.mqs[e])||(e="all-devices"),e},get_wizard_focus:function(e){if(e&&!v.pref.wizard_expanded&&!v.pref.dock_wizard_right)return!1;var t=v.pref.adv_wizard_tab;return v.pref.dock_wizard_right?t||(t="refine-targeting"):t&&"html-inspector"!=t&&"refine-targeting"!=t||(t="css-computed"),t},get_css_focus:function(){var e=v.pref.css_focus;return e||(e="all-browsers"),e},get_grid_focus:function(){var e=v.pref.grid_focus;return e||"gridtemplate"},get_dialog_tab_focus:function(e){var t=(e=e||v.get_dialog_focus()).find("input.dialog-focus").val();return t||(t=0),parseInt(t)},get_dialog_focus:function(){return v.stat.dialogs.find("div.tvr-dialog.show")},get_tab_name:function(t){return e("#responsive-bar").find(".mq-tab-"+t).find(".mq-tab-txt").text()},get_pg_focus_obj:function(s){s=s||v.pref.pg_focus;var r=e("#"+v.selInFocusID+"-"+s);return!!t.isDomEl(r)&&r},get_group:function(e,s){var r=e.group.find("div.property-fields-"+e.tabSlug);return s&&(r=r.find("input.property-input")),!!t.isDomEl(r)&&r},get_pg_fields_obj:function(e,s){t.startT(arguments);var r=e.find("div.property-fields-"+s);return t.endT(arguments),!!t.isDomEl(r)&&r},get_subgroup_or_tabgroup:function(e,s,r){var a=v.get_group(e);if(!t.isDomEl(a))return!1;var o=r?"div.tab-control-"+r:"div.subgroup-"+e.subgroupSlug,n=a.find(o);return!!t.isDomEl(n)&&(s&&(n=n.find("input.property-input")),!!t.isDomEl(n)&&n)},maybe_remove_group:function(e,s){if(t.startT(arguments),e){var r=v.get_meta(e,"group");if(!v.pg_check_values(r.group,s,!1)&&!v.input_toggles_enabled(r.group,"group",s))return t.endT(arguments),v.remove_property_group(r,s)}return t.endT(arguments),!1},input_toggles_enabled:function(e,t,s){"group"==t&&(e=e.find("div.property-fields-"+s));var r=!1;return e.find("input.input-toggle-tracker").each(function(e){return r=!0,!1}),r},selector_check_disabled:function(s){t.startT(arguments);var r=s.selectorM.find("p.sel-toggles"),a=e("#responsive-bar").find(".query-tabs");for(var o in TvrMQsCombined)if(TvrMQsCombined.hasOwnProperty(o)){var n=a.find("span.mq-tab-"+o).find(".disabled-icon");t.isDomEl(r.find("input.disabled-tracker-"+o))?n.addClass("active").closest(".mq-tab").addClass("item-disabled"):n.removeClass("active").closest(".mq-tab").removeClass("item-disabled")}t.endT(arguments)},pg_check_values:function(s,r,a,o){var n=v.get_meta(s,"group"),i=!1;v.get_mq_focus();return o=o||"#nothing",n.group.find("div.property-fields-"+r).find("input.property-input, textarea.property-input").not(o).each(function(s){if(t.isDefined(e(this).val()))return i=!0,!1}),i},js_check_values:function(e,s,r,a,o){t.startT(arguments);var n={incRecurse:!0,onlyRecurse:!1,mq_key:!1,M:v.get_meta(s.section?s.section:s,"section"),maxDepth:"group"};e.has_values={},e=i.modify_main_js_object("check_values",e,n),n.incRecurse=!1;var l=(e=i.modify_main_js_object("update_dots",e,n)).has_values;if(l.current_sel_checked&&(v.update_tab_dots(l),v.update_group_dots(l),"grid"===v.pref.pg_focus)){var d={itemsWithValues:l.itemsWithValues};v.grid.isAllItems&&_.update_grid_and_radio_item_formatting("itemdots",d),v.update_pgtab_dots(l)}return a&&c.silent_save(!1,e.savePackage),t.endT(arguments),e},update_tab_dots:function(e){for(var t in TvrMQsCombined)if(TvrMQsCombined.hasOwnProperty(t)){var s=v.item_has_styles(e,"tab",t);v.update_style_signal(v.stat.res.find(".mq-tab-"+t),s)}},update_pgtab_dots:function(s){var r=v.get_pg_meta(),a=i.get_selector_data(r,r.tabSlug).data,o=t.isDefined(a.nth_item)?a.nth_item:1;if(r){var n={},l=s.propsWithValues;if(l)for(var c=Object.keys(l),d=0;d<c.length;d++){var _=c[d],u=v.get_property_tab_control(_);u&&("griditems"===u?t.checkObject(l,[_,"value",o]):1)&&(n[u]=1)}r.group.find("span.mt-tab").each(function(){var t=e(this),s=t.attr("rel"),r=n[s];v.update_style_signal(t,r)})}},update_group_dots:function(t,s){v.stat.css_icons.find("li.pg-icon").each(function(){var s=e(this),r=s.attr("rel"),a=v.item_has_styles(t,"group",r);v.update_style_signal(s,a)})},item_has_styles:function(e,s,r){return t.checkObject(e,[s,r])?1:""},update_style_signal:function(e,t){e&&(t?e.addClass("hasValues"):e.removeClass("hasValues"))},css_tab_pressed:function(s){t.startT(arguments);var r=v.get_css_focus(),a=s.attr("rel"),o=a!=r&&v.stat.code.find("div.mt-full-code-"+r),n=v.stat.code,i=n.find(".css-code-tabs");v.update_tab(n,".mt-full-code",i,a,".css-tab",".css-focus"),v.pref.css_focus=a;var l=v.stat.code.find("div.mt-full-code-"+a);v.after_tab_switch("css",o,r,l,a),e.get(v.ajaxUrl+"&css_focus="+a),v.toolbar_adjusted(),t.endT(arguments)},grid_tab_pressed:function(t,r){var a=t.closest(".property-grid"),o=a.find(".query-tabs"),n=t.attr("rel");v.update_tab(a,".tab-control",o,n,".grid-tab",".grid-tab-focus"),v.pref.grid_focus=n,v.stat.tvr.attr("data-pgtab",n),v.adjust_grid_line_scroll_buttons(v.get_meta(a,"group")),e.get(v.ajaxUrl+"&grid_focus="+n),r&&s&&s.maybe_run_grid_control_update()},adv_tab_pressed:function(s){t.startT(arguments);var r=e("#advanced-wizard"),a=r.find(".query-tabs"),o=s.attr("rel");v.update_tab(r,".adv-area",a,o,".adv-tab",".adv-wizard-focus"),v.pref.adv_wizard_tab=o,v.maybe_update_wizard_panels(),e.get(v.ajaxUrl+"&adv_wizard_tab="+o,function(){}),t.endT(arguments)},maybe_update_wizard_panels:function(e){if(t.startT(arguments),e=e||{},v.intelli&&t.isDomEl(s.triggerEl)){var r=v.get_wizard_focus(!0);e.exclComp||e.onlyDeferred||"css-computed"!==r||(s.get_computed_styles({data:{},con:"obj",intelli:!0}),v.refresh_wizard_comp_css()),e.exclActual||e.onlyQuick||"css-inspector"!==r||l.update_stylesheet_rules(),!e.onlyQuick&&r&&e.forceHTMLUpdate&&(v.update_wizard_html(e),v.update_breadcrumbs(e))}t.endT(arguments)},dialog_tab_pressed:function(e){t.startT(arguments);var s=e.closest(".dialog-main"),r=s.find(".dialog-tabs"),a=e.attr("rel");v.update_tab(s,".dialog-tab-field",r,a,".dialog-tab",".dialog-focus"),t.endT(arguments)},combobox_clicked:function(e,s){if(t.startT(arguments),e.hasClass("sug-sel"))t.isDomEl(e.closest("li.in-focus"))||v.sug_css_clicked(e);else{e.attr("rel");(e.hasClass("has-arrows")||e.hasClass("cssfilter-combo"))&&v.combo_arrow_clicked(!1,e),e.hasClass("cssfilter-combo")&&v.feature_on(e)}t.endT(arguments)},combo_arrow_clicked:function(e,s){t.startT(arguments);var r="input"==(s=s||e.siblings("input")).prop("tagName").toLowerCase()?s:s.find("input");r.data("wasOpen")?r.MTautocomplete().MTautocomplete("close"):(r.MTautocomplete(),r.is(":focus")||r.focus(),r.MTautocomplete("search",""),v.combobox_focused(s)),r.hasClass("sug-sel")&&v.sug_css_clicked(r),t.endT(arguments)},combobox_focused:function(t){t.hasClass("custom_css_unit")&&e("#css_unit_set").val("")},resolve_combobox_source:function(e,r,a){var o=e.attr("rel"),n=e.hasClass("sug-sel")?s.dom.sels.combo[o]:TvrMT.data.prog.combo[o];if(n||(n=[]),e.hasClass("property-input")){var i=v.gatheredCSS.root_cat_keys[o],c=v.support_sampling(o),d=[],_=[];if(i){var u=v.pref.my_props.sug_values,p=l.sort_number_unit_strings(t.uniqueArray(u[i].recent.concat(u[i].saved)),o);if(("grid_positions"===i||"grid_area"===i)&&t.checkObject(v.grid,["templateAreas"])){var f="grid_positions"===i?"implicit_names":"grid_areas";p=p.concat(v.grid.templateAreas[f])}var g=l.sort_number_unit_strings(t.uniqueArray(p.concat(u[i].copiedSrc)),o);n.length&&n[0]===Object(n[0])?d=v.format_combo_suggestions(i,"suggestions",p):n=v.format_combo_suggestions(i,"suggestions",g),c&&(_=v.format_combo_suggestions(i,"sampled"))}var m=(n.concat(d,_).length,[""]);"font_family"===o?m.push(TvrLang.google_font):"list_style_image"!==o&&"background_image"!==o||m.push("none"),n=m.concat(d,n,_)}return r&&e.MTautocomplete().MTautocomplete("option","source",v.resolve_combobox_source(e)),a&&e.MTautocomplete("search",""),n},format_combo_suggestions:function(e,t,s){var r=[],a=s||v.pref.my_props.sug_values[e][t];if(a&&a.length)for(var o=0;o<a.length;o++)a[o]&&r.push({label:a[o],category:TvrLang[t]});return r},add_variable_field:function(e,t){var s=e.closest(".property-tag"),r=s.find(".tvr-input-wrap").last(),a=r.find(".vl-post-line-name").find(".property-input").val(),o=r.clone(),n=o.find(".property-input");r.find(".vl-post-line-name").removeClass("show-optional-input").find(".property-input").val(""),o.find(".vl-item").removeClass("show-optional-input"),t.shiftKey||n.val(""),a&&o.find(".vl-pre-line-name").find(".property-input").val(a),o.find(".comp-style").html(""),r.after(o),o.find(".vl-main-input").find(".property-input").focus(),v.adjust_grid_line_scroll_buttons(v.get_meta(s,"group")),t.shiftKey&&c.ajax_save_settings({$property:n})},toggle_optional_input:function(e){var t=e.parent();t.hasClass("show-optional-input")?t.removeClass("show-optional-input"):(t.addClass("show-optional-input"),t.find(".property-input").focus())},delete_variable_field:function(t,s,r,a){t.find(".tvr-input-wrap").length>1&&s.closest(".tvr-input-wrap").animate({opacity:0},500,function(){e(this).remove(),a&&v.adjust_grid_line_scroll_buttons(r)})},combobox_item_selected:function(s,r,a,o){t.startT(arguments);var n=a.closest(".property-tag"),i=r.item.value;if(a.hasClass("grid-area-add"))return!1;if(a.val(i),setTimeout(function(e){e.hasClass("bg-image-select")&&t.scroll_input_end(e)},30,a),a.hasClass("property-input")){v.adjust_comp_span(a,"after");var d=v.get_meta(a,"property");if(a.hasClass("tvr-font-select")){var _=a.closest(".field-wrap").siblings(".tvr-font-custom");v.gFontTarget=_.find(".property-input"),i==TvrLang.google_font?v.show_google_fonts_field(_):v.hide_google_fonts_field(a,_)}else v.maybe_sync_fields(a);v.update_input_width_and_scroll(a),c.ajax_save_settings({$property:a})}if(""===i&&n.hasClass("has-variable-line")){var u=!1;a.closest(".tvr-input-wrap").find(".property-input").each(function(){if(""!==e(this).val().trim())return u=!0,!1}),u||v.delete_variable_field(n,a,d,!0)}if("css_unit_set"===a.attr("id")){var p=a.val();a.closest("ul").find("input.custom_css_unit").val(p)}"custom_paths"===a.attr("rel")&&(a.MTautocomplete("close"),v.change_preview_url(a.siblings(".change-preview-url"))),"viewed_import_stylesheets"===a.attr("rel")&&(a.MTautocomplete("close"),l.update_import_css_preview(!1,{c:a.closest(".stylesheet-to-import").find(".view-import-stylesheet")},"loadNew")),a.hasClass("sug-sel")&&(a.blur(),v.sug_sel_updated(a,{con:"combo"})),a.hasClass("cssfilter-combo")&&v.pseudo_updated(a,{input:1}),t.endT(arguments)},hide_property_fields:function(t){t.each(function(){var t=e(this),s=t.find(".property-input");s.val(""),v.adjust_comp_span(s,"after"),t.removeClass("show-event-fields")})},sug_css_clicked:function(r){t.startT(arguments);var a=r.closest("li");a.hasClass("in-focus")||(e("#code-suggestions").find("li").removeClass("hover-elsewhere in-focus"),a.addClass("in-focus"),v.sug_sel_updated(r,{con:"sug_css_clicked"})),s.reposition_overlays({con:"intelli",scroll:1}),t.endT(arguments)},get_toggle_data:function(s,r){t.startT(arguments),s?s=s.closest(".uit-par"):"show_interface"==r?s=e("#m-logo"):"hover_inspect"==r?s=e("#hover-inspect-toggle"):"mt_highlight"==r?s=e("#toggle-highlighting"):"show_code_editor"==r?s=e("#toggle-full-code-editor"):"show_text_labels"==r?s=e("#mymtonoffswitch-show_text_labels").closest(".ui-toggle"):"dock_editor_left"==r?s=e("#mymtonoffswitch-dock_editor_left").closest(".ui-toggle"):"dock_options_left"==r?s=e("#mymtonoffswitch-dock_options_left").closest(".ui-toggle"):"detach_preview"==r&&(s=e("#mymtonoffswitch-detach_preview").closest(".ui-toggle"));var a=!1,o=!1,n=!1;"show_code_editor"==(r=r||s.data("aspect"))||"show_code_editor"==s.data("aspect")?(o=s,s=e("#toggle-full-code-editor"),a=e("#code-editor-alias")):"show_extra_actions"==r?(o=s,s=e("#show_extra_actions")):"hover_inspect"==r?(o=s,s=e("#hover-inspect-toggle")):"selname_code_synced"==r?(o=s,s=e("#selname_code_synced")):"code_manual_resize"==r?(o=s,s=e("#code_manual_resize")):"pseudo_classes"!=r&&"pseudo_elements"!=r&&"page_specific"!=r&&"favourite_filter"!=r||(n=e("#css-filters"),o=s,a=v.get_css_filter_alias(s,r));var i=s.hasClass("on")?0:1;return t.endT(arguments),{clicked:s,aspect:r,turnOn:i,alreadyOn:!i,$alias:a,$aliasTrigEl:o,$filter_scope:n}},feature_on:function(e,s,r){t.startT(arguments),r=r||{};var a=v.get_toggle_data(e,s);r.offFirst&&(v.feature_off(e,s,r.offFirst),a=v.get_toggle_data(e,s)),a.alreadyOn||v.toggle_feature(e,s,r),t.endT(arguments)},feature_off:function(e,s,r){t.startT(arguments),r=r||{},v.get_toggle_data(e,s).alreadyOn&&v.toggle_feature(e,s,r),r.onAgain&&v.feature_on(e,s,r.onAgain),t.endT(arguments)},toggle_inline_gui:function(){var e=o.eds["adaptable-editor"];e.isFocused()?(e.blur(),o.gui_shortcut_clicked()):v.editor_and_gui()?(v.picker_method("hide"),e.focus()):v.trigger_pg_icon_click("code")},toggle_feature:function(e,a,n){t.startT(arguments);var i=v.get_toggle_data(e,a);e=i.clicked,a=i.aspect,n=n||{};var l=i.turnOn,d=!!i.$filter_scope&&i.$filter_scope,_="",u=e.data("pref_sub_key");if("show_interface"===a&&v.pref.detach_preview)return!1;n.pref_sub_key=u||!1,n.tmp&&(v.tmp[a]=l?"turnedOn":"turnedOff"),n.fHTML=t.isDefined(n.fHTML)?n.fHTML:e.data("fhtml"),n.noSave=t.isDefined(n.noSave)?n.noSave:parseInt(e.data("no-save"));var p=n.fHTML&&v.stat.fHTML?v.stat.tvr.add(v.stat.fHTML):v.stat.tvr,f=(n.extraClass&&n.extraClass,i.$alias?e.add(i.$alias):e),g=!1;if(l)if(p.addClass(a),v.detached_window_available()&&r.add_html_class(a),f.addClass("on"),"show_time_concurrently"==a&&(n.noSave=1,t.log_concurrent=1),d&&"favourite_filter"!=a||(g=e.data("neg")),"show_rulers"==a)v.get_local_window_function("show_rulers")();else if("dock_editor_left"===a||"dock_options_left"===a||"detach_preview"===a)v.toggle_layout_view(a,l);else if("dock_wizard_right"==a)v.move_wizard_right();else if("enable_beaver_builder"==a){var m=t.append_url_param(v.pref.preview_url,"fl_builder");m!=v.pref.preview_url&&(s&&!n.uiCorrection&&(s.stat.win.location=m),v.pref.preview_url=m)}else"activate_elementor"==a?v.activate_elementor():"selname_code_synced"==a?v.selname_code_synced(i.$aliasTrigEl,l):"code_manual_resize"==a?(v.stat.code.find("div.css-code-wrap").add(v.stat.inlineEditor).css("height",""),o.get_focus_editor().resize(),v.toolbar_adjusted()):"show_code_editor"==a?(v.pref[a]=l,v.default_to_tab("css"),this.modify_active_editors({resize:!0,updateHeight:v.horizontal_only()}),v.toolbar_adjusted()):"hover_inspect"==a?v.iframe_functions_loaded()&&s.bind_wizard_hover():"fullscreen"==a?t.enable_full_screen():"wizard_expanded"==a?(v.pref[a]=l,this.wizard_expanded()):"show_interface"==a?(v.toolbar_adjusted(),"turnedOff"==v.tmp.hover_inspect&&(v.tmp.hover_inspect=!1,v.feature_on(!1,"hover_inspect",{noSave:1}))):"mt_highlight"==a?(n.con&&s&&s.reposition_overlays(n),v.highlightEnabled=!0):d&&e.hasClass("filter-editable")?e.find("input.combobox").select():"favourite_filter"==a&&v.filter_favourited(e,n,a);else if("show_time_concurrently"==a&&(n.noSave=1,t.log_concurrent=0),f.removeClass("on"),d?d.find("ul.flist-"+a).find("li.css-filter-item.on").length||p.removeClass(a):p.removeClass(a),v.detached_window_available()&&r.remove_html_class(a),d&&"favourite_filter"!=a||(g=e.data("pos")),"show_rulers"==a)v.get_local_window_function("hide_rulers")();else if("dock_editor_left"===a||"dock_options_left"===a||"detach_preview"===a)v.toggle_layout_view(a,l);else if("dock_wizard_right"==a)v.move_wizard_top();else if("enable_beaver_builder"==a){var h=t.strip_url_param(v.pref.preview_url,"fl_builder");v.pref.preview_url=h,TvrMT.integrate.FLBuilder&&!n.uiCorrection&&v.bb_changes_made()&&TvrMT.integrate.FLBuilder._publishButtonClicked(!0),v.remember_page_viewed(h)}else if("activate_elementor"==a)v.deactivate_elementor();else if("selname_code_synced"==a)v.selname_code_synced(i.$aliasTrigEl,l);else if("code_manual_resize"==a){var b=v.stat.adaptableEditor,y=b.attr("id"),w=o.eds[y];if(w&&v.horizontal_only()){var T=w.session.getLength();o.editor_update_height(w,b,16*T)}v.toolbar_adjusted()}else"hover_inspect"==a?v.iframe_functions_loaded()&&s.unbind_wizard_hover():"show_code_editor"==a?(v.pref[a]=l,v.default_to_tab("mq"),this.modify_active_editors({resize:!0,updateHeight:v.horizontal_only()}),v.adjust_scroll_buttons(!1,"responsive"),v.toolbar_adjusted()):"fullscreen"==a?t.disable_full_screen():"wizard_expanded"==a?(v.pref[a]=l,this.wizard_collapsed()):"show_interface"==a?(v.toolbar_adjusted(),v.feature_off(!1,"hover_inspect",{tmp:1,noSave:1})):"mt_highlight"==a?v.highlightEnabled=!1:"favourite_filter"==a&&v.filter_un_favourited(e,n,a);if(n.pref_sub_key?(v.pref[a][n.pref_sub_key]=l,_+="&pref_sub_key="+n.pref_sub_key):v.pref[a]=l,g&&v.refresh_tt(f,g,i.$aliasTrigEl),e.data("text-pos")){var k=l?e.data("text-neg"):e.data("text-pos");e.text(k)}d&&v.pseudo_updated(e,{toggle:1,turnOn:l}),"dock_wizard_right"!=a||l?"show_text_labels"==a&&v.toolbar_adjusted():v.default_to_tab("wizard"),n.noSave||c.save_ui_toggle_update(a,l,_),t.endT(arguments)},wizard_expanded:function(){v.default_to_tab("wizard"),v.maybe_update_wizard_panels({forceHTMLUpdate:1})},wizard_collapsed:function(){},after_animation:function(e,t){var s="transition"===t.type?"transitionend.tvr webkitTransitionEnd.tvr oTransitionEnd.tvr otransitionend.tvr MSTransitionEnd.tvr":"oanimationend.tvr animationend.tvr webkitAnimationEnd.tvr";e.on(s,function(e){"elementor_sidebar_adjusted"!==t.aspect||"left"!==e.originalEvent.propertyName&&"width"!==e.originalEvent.propertyName||n.elementorSidePanelAdjusted(!0)})},sidebar_size:parseInt(TvrMT.data.dyn.pref.sidebar_size),effective_sidebar_size:function(){return this.sidebar_showing()?v.sidebar_size:0},sidebar_sizes_map:{0:0,sm:200,md:300,lg:360,xl:750},sidebar_size_category:function(e){e=e||this.sidebar_size;var t=this.sidebar_sizes_map,s="0";for(var r in t)t.hasOwnProperty(r)&&e>=t[r]&&(s=r);return{key:s}},modify_active_editors:function(e){var t=v.stat.adaptableEditor,s=o.eds["adaptable-editor"];e.updateHeight&&o.editor_update_height(s,t,16*s.session.getLength()),e.resize&&(s.resize(),o.update_editor_gutter(s))},set_sidebar_size:function(e,t){var s=t||v.sidebar_size,r=this.get_sidebar_container(e);return!!r&&(0!==parseInt(v.stat.front.css("marginLeft"))-s&&(v.stat.front.css("marginLeft",s+"px"),this.sidebar_size_changed(s,r)),r)},get_editor_containers:function(){return{$containers:v.stat.inlineEditor}},get_sidebar_container:function(e,t){return!(v.preview_is_detached()&&!v.all_options_left()&&!t)&&{$containers:e?v.stat.inlineEditor:v.stat.opts.add(v.stat.inlineEditor),size:v.sidebar_size,effective_size:v.effective_sidebar_size()}},sidebar_size_changed:function(t,s){s.$containers.outerWidth(t);var r=this.sidebar_size_category(t);this.change_sidebar_size_class(t),v.sidebar_size=t,v.pref.sidebar_size_category=r.key,e.get(v.ajaxUrl+"&sidebar_size="+t+"&sidebar_size_category="+r.key,function(){}),this.modify_active_editors({resize:!0}),v.reset_preview_width_for_current_tab(!1,!0)},change_sidebar_size_class:function(e){var t=this.sidebar_size_category(e);return v.stat.tvr.removeClass("mts-sm mts-md mts-lg mts-xl").addClass("mts-"+t.key),t.key},horizontal_only:function(){return!v.pref.dock_editor_left&&!v.pref.dock_options_left&&!v.pref.detach_preview},flexible_field_widths:function(){return!v.pref.dock_options_left},editor_height_settable:function(){return v.horizontal_only()&&!v.pref.code_manual_resize},editor_and_gui:function(){return v.pref.detach_preview||v.pref.dock_editor_left&&!v.pref.dock_options_left},all_options_left:function(){return v.pref.dock_options_left},editor_showing_left:function(){return(v.pref.dock_editor_left||v.pref.dock_options_left)&&!v.pref.detach_preview},show_editor_gutter:function(){return!this.editor_showing_left()||"sm"!==v.pref.sidebar_size_category},editor_only_left:function(){return v.pref.dock_editor_left&&!v.pref.detach_preview&&!v.pref.dock_options_left},options_left_editor_right:function(){return v.pref.dock_options_left&&v.pref.detach_preview},preview_is_detached:function(){return v.pref.detach_preview},sidebar_showing:function(){return!v.pref.detach_preview&&(v.pref.dock_editor_left||v.pref.dock_options_left)||v.pref.detach_preview&&v.pref.dock_options_left},maybe_adjust_side_options:function(e){v.sidebar_showing()&&!v.preview_is_detached()&&this.modify_active_editors({resize:!0})},toggle_layout_view:function(e,t){v.pref[e]=t;var s=t?e:e+"_off";v.trigger_pg_icon_click(),this[s](),this.toolbar_adjusted(),v.reset_preview_width_for_current_tab(!1,!0)},reset_sidebar_dimensions:function(e){var t=this.get_sidebar_container(e,!0);t&&(t.$containers.css({width:"",height:""}),this.modify_active_editors({resize:!0,updateHeight:!v.preview_is_detached()})),v.stat.front.css("marginLeft",0),v.adjust_scroll_buttons(v.get_pg_meta(),"style")},dock_sidebar_common:function(e){var t=this.set_sidebar_size(e);t&&t.$containers.css("height","")},dock_editor_left:function(){v.all_options_left()&&v.feature_off(!1,"dock_options_left"),this.dock_sidebar_common(!0),v.trigger_pg_icon_click()},dock_editor_left_off:function(){this.reset_sidebar_dimensions(!0)},dock_options_left:function(){v.all_options_left()&&v.feature_off(!1,"dock_editor_left"),this.dock_sidebar_common(!1)},dock_options_left_off:function(){this.reset_sidebar_dimensions()},detach_preview:function(){window.frames.viframe.location=v.pluginUrl+"includes/place-holder2.html",window.name="MTroot",window.TvrMT.detachedWin=window.open("admin.php?page=tvr-microthemer-preview-wrap.php","detachedPreview"),v.all_options_left()||this.reset_sidebar_dimensions(v.editor_only_left()),this.modify_active_editors({resize:!0}),v.detached_window_available()&&r.remove_window_inactive_notice()},detach_preview_off:function(){v.editor_showing_left()?this.dock_sidebar_common(v.editor_only_left()):v.horizontal_only()&&this.modify_active_editors({resize:!0,updateHeight:!0}),v.detached_window_available()&&r.deactivate_window(),v.stat.iframeDoc=window.frames.viframe,MTlocal.maybe_load_site_preview()},retrieve_or_load_detached:function(){window.name="MTroot";var e=window.open("","detachedPreview");if(e&&e.MTdetached){if(e.opener=window,e.MTdetached.set_vars(),e.MTlocal.update_TvrMT_and_other_vars(window.TvrMT),r=window.TvrMT.MTdetached,!(s=window.TvrMT.MTF))return void e.MTlocal.maybe_load_site_preview();s.set_vars(),s.trigger_iframe_loaded(),s.unbind_wizard_hover()}else v.toggle_layout_view("detach_preview",1)},move_wizard_right:function(){v.stat.front.after(v.stat.wiz.detach());var e=o.eds.wizard_inspector_html;e&&(e.resize(),o.set_code_wrap(e,!1)),v.toolbar_adjusted()},move_wizard_top:function(){v.stat.code.after(v.stat.wiz.detach());var e=o.eds.wizard_inspector_html;e&&o.set_code_wrap(e,!0),v.toolbar_adjusted()},selname_code_synced:function(t,s){var r="selname_code_synced"==t.attr("id")?"wizard":"existing-sel",a=!!s,o="wizard"==r?e("#code-suggestions").find("li.in-focus").find(".sug-sel").val():t.closest(".float-form").find(".selector-css-textarea").val();o&&("wizard"==r?v.get_nice_name(o,!0,a):t.closest(".float-form").find("input.selector-name-input").val(v.get_nice_name(o,!1,a)))},filter_favourited:function(t,s,r){var a=t.closest("li").clone(!0,!1);a.removeAttr("title"),e("#fav-filters").append(a).hide().fadeIn("fast")},filter_un_favourited:function(t,s,r){var a=v.pseudo_class_format(t.closest("li").data("pref_sub_key"));e("#fav-filters").find("li."+a).fadeOut("fast",function(){e(this).remove()})},toggle_screen_preview:function(e){t.startT(arguments),(e=e.closest("li.mt-screen-preview")).hasClass("clicked")?v.get_local_window_function("unset_screen_preview")(e,"clicked"):v.get_local_window_function("set_screen_preview")(e,"clicked"),t.endT(arguments)},screen_width_adjusted:function(e,s){t.startT(arguments),v.iframe_functions_loaded()&&(v.post_screen_width_adjusted(e,s),t.action_after_timeout("screen_width_adjusted",550,{item:v.post_screen_width_adjusted,args:[e,s]})),t.endT(arguments)},post_screen_width_adjusted:function(e,t){t=t||{},s.reposition_overlays({con:e,scroll:0}),s.get_computed_styles({data:v.curSelCSS,con:"str"}),v.refresh_comp_css(),t.skip||v.maybe_update_wizard_panels(t)},map_formatted_comp:function(e,s,r,a,o,n,i,l,c){if(t.startT(arguments),c)d=v.intelliCompProps;else var d=v.compProps;if("straight"==r&&("var"==s?d[e[a]]=n:(0==o&&(d[e[a]]=[]),d[e[a]][o]=[],d[e[a]][o].val=n,d[e[a]][o].htmlString=i)),"array"==r){var _=-1,u=e[a];for(var p in u)u.hasOwnProperty(p)&&("var"==s?d[u[p]]=l[++_]:(0==o&&(d[u[p]]=[]),d[u[p]][o]=[],d[u[p]][o].val=l[++_],d[u[p]][o].htmlString=i))}c?v.intelliCompProps=d:v.compProps=d,t.endT(arguments)},format_exceptions:function(e,s,r,a,o,n){if(t.startT(arguments),"var"==o)i=r;else var i=r[a].val,l=r[a].htmlString;if(!t.hasValue(i))return!1;if("font-family"==s||"display"==s||"grid-template-areas"==s||"list-style-type"==s||"border-top-left-radius"==s||"border-top-right-radius"==s||"border-bottom-right-radius"==s||"border-bottom-left-radius"==s)v.map_formatted_comp(e,o,"straight",s,a,i,l,[],n);else if("text-shadow"==s||"box-shadow"==s){var c=i.match(/(-?\d+px)|(rgba?\(.+\))/g);if(c){if("MSIE"!=v.browser){var d=c[1],_=c[2],u=t.replace_decimals(c[0],1),p=c[3];"text-shadow"==s?c=[d,_,p,u]:"box-shadow"==s&&(c=[d,_,p,c[4],u,c[5]])}}else c=[0,0,0,"none"],"box-shadow"==s&&(c[3]=0,c[4]="none",c[5]="");v.map_formatted_comp(e,o,"array",s,a,i,l,c,n)}else if("list-style-image"==s)v.map_formatted_comp(e,o,"straight",s,a,t.basename(i),l,[],n);else if("background-img-full"==s){var f=[];f[0]=t.extract_str("bg-image",i);var g=t.extract_str("gradient",i);if(g){var m=/gradient\((.+)\)/.exec(g);if(m){var h=m[1],b=/rgba?\([^)]+\)/g,y=t.get_all_matches(h,b,0),w=t.replace_all_matches(h,y,"xxx").split(", "),T="";i.indexOf("webkit")>=0&&(T="webkit-");var k="top to bottom",x=!1,C=0,S=0;if(w[0].indexOf("deg")>-1&&(k=e.keys[T+"gradient-angle"][w[0]],x=!0,S=1),f[1]=k,f[2]=y[C],x&&w.length>3||!x&&w.length>2){var M=w[++S].split(" ");f[3]=y[++C],f[4]=M[1],f[5]=y[++C]}else f[3]=y[++C],f[4]="0",f[5]="none"}else g.indexOf("svg")>-1&&(f[1]="IE9 can't report",f[2]="IE9 can't report",f[3]="IE9 can't report",f[4]="IE9 can't report",f[5]="IE9 can't report")}else f[1]="none",f[2]="none",f[3]="none",f[4]="0",f[5]="none";v.map_formatted_comp(e,o,"array",s,a,i,l,f,n)}else if("background-position"==s){var j=(E=i.split(", "))[0].split(" "),D=e.keys["background-position-x"][j[0]],I=e.keys["background-position-y"][j[1]],O=D||j[0],q=I||j[1],z=O+" "+q;v.map_formatted_comp(e,o,"straight",s,a,z,l,[],n)}else if("background-repeat"==s||"background-attachment"==s||"background-size"==s||"background-clip"==s){var E=i.split(", ");v.map_formatted_comp(e,o,"straight",s,a,E[0],l,[],n)}t.endT(arguments)},filter_css_exceptions:function(e){if(t.startT(arguments),e)s=v.intelliCompProps;else var s=v.compProps;var r=TvrMT.data.prog.propExc,a=0;for(var o in s)if(s.hasOwnProperty(o)){++a;var n=s[o];if(n===Object(n))for(var i in n)n.hasOwnProperty(i)&&v.format_exceptions(r,o,n,i,"obj",e);else v.format_exceptions(r,o,n,"","var",e)}return t.endT(arguments),a},refresh_comp_css:function(s){if(t.startT(arguments),!v.iframe_functions_loaded())return t.endT(arguments),!1;var r=!!s;if(s=s||e("#"+v.selInFocusID),!r&&!t.isDomEl(s))return t.endT(arguments),!1;if(v.filter_css_exceptions(!1)<1){var a=TvrLang.null_selector;return s.find(".option-value").text(a),s.find("div.field-wrap").removeClass("mixed-cp").find("span.comp-style").text(""),void t.endT(arguments)}var o="div.field-wrap:not(.tvr-editor-area)",n=v.pref.pg_focus?s.find("li.group-tag-"+v.pref.pg_focus).find(o):s.find(o),i=v.get_nth_focus();n.each(function(r){var a=e(this);if(!a.hasClass("group-label")&&!a.hasClass("sub-label")){var o=a.find(".option-label"),n=a.find(".option-value"),l=o.text(),c=a.find("span.comp-style"),d=a.find(".property-input"),_=d.val(),u=c.attr("class").split(" ")[1].replace("cprop-",""),p=o.data("prop");v.propAliases[u]&&(u=v.propAliases[u]);var f="grid"===v.pref.pg_focus&&i>0&&v.grid.items&&v.grid.items.length&&TvrMT.data.prog.pg_tab_props.grid.griditems[p]&&s.find(".grid-tab-griditems").hasClass("active")?v.grid.items[i-1].comp[u]:v.compProps[u],g=!1,m=a.hasClass("has-variable-line");"event"===u?f=_||("animation"===v.pref.pg_focus?"page load":"unknown"):"event-target"===u?f=_||"self":"event-value"===u&&(f=_||"not set");var h=0;if(t.isDefined(f))if(f===Object(f)){a.addClass("mixed-cp"),v.update_comp_input_overlay(a,c,"[mix]");var b=TvrLang.value_varies,y="";for(var w in f)f.hasOwnProperty(w)&&t.isDefined(f[w].val)&&(y+='<tr class="mixed-val" rel="'+h+'"><td>'+ ++h+"</td><td title='"+f[w].htmlString.replace("&#60;","<").replace("&#62;",">")+"'>"+v.colored_box(f[w].val,!0)+"</td></tr>");a.find("table.comp-mixed-table").find("tbody").html(y)}else{b=f;a.removeClass("mixed-cp");var T=f;if(m||(f=v.truncate_displayed_comp_css(d,f)),a.hasClass("is-picker")){g=!0;var k="background-color:transparent";"transparent"!=T&&"none"!=T&&(k="background-color:"+T,b=t.maybe_to_hex(T)),c.html('<span style="'+k+'"></span>')}else v.update_comp_input_overlay(a,c,f)}else{b=TvrLang.style_not_applicable;"Content"==l&&(b=TvrLang.not_knowable),c.text("")}var x=g?v.trans_gradient_box(T,"computed-color-box")+b:b;n.html(x)}}),s.addClass("visible-computed"),v.flexbox_dynamic_gui(s,{compProps:v.compProps}),"grid"===v.pref.pg_focus&&(_.update_nth_radios(),v.skipGridReflow?v.skipGridReflow=!1:_.itemResising||_.update_grid_canvas()),t.endT(arguments)},update_comp_input_overlay:function(t,s,r){if(t.hasClass("has-variable-line")){var a=r.split(" "),o=a.length?a:[r];s.each(function(t){e(this).html(o[t])})}else s.html(r)},flexbox_dynamic_gui:function(e,s){if(s.compProps["flex-direction"]){var r=e.find("div.property-flexbox"),a=s.compProps["flex-direction"],o=["column","column-reverse","row-reverse"];r.removeClass("flex-direction-column flex-direction-column-reverse flex-direction-row-reverse"),t.in_array(a,o)&&r.addClass("flex-direction-"+a)}},truncate_displayed_comp_css:function(e,s){t.startT(arguments);var r=e.width()/6;return s.length>r&&(s=s.substring(0,r)+"..."),t.endT(arguments),s},colored_box:function(e){if(t.startT(arguments),!e||e.indexOf("rgb")<0||e.indexOf(":")>-1)return t.endT(arguments),e;var s=t.maybe_to_hex(e),r=v.trans_gradient_box(e);return r+='<span class="colored-val">'+s+"</span>",t.endT(arguments),r},trans_gradient_box:function(e,t){return'<span class="'+(t=t||"colored-box")+'" style="background-image: linear-gradient(0deg, '+e+", "+e+"), url("+v.pluginUrl+'images/trans.png)"></span>'},slugs_from_id:function(e){var s=e.split("-"),r=s[1],a=s[2],o=t.checkObject(v.uiData,[r,a,"label"]);return o=o?o.split("|"):[],!!s.length&&{sectionSlug:r,selectorSlug:a,selectorH:o[0],selectorCode:o[1]}},default_to_sel:function(){t.startT(arguments);var e,s=t.checkObject(v.uiData,["non_section","meta","last_viewed_selector"]),r=!!s&&v.slugs_from_id(s);if(r&&t.checkObject(v.uiData,[r.sectionSlug,r.selectorSlug])||(r=i.modify_main_js_object("get_first_sel",{incRecurse:!1,callbackDepth:["selector"]}).slugs),!r)return!1;e=v.load_selector(r,{items:["selectorM"]}),v.tvr_iterate_selectors_v(e),t.endT(arguments)},get_manual_wrap_class:function(e){return e.hasClass("mt-vl-input")?".vl-item":".tvr-input-wrap"},adjust_comp_span:function(e,s){t.startT(arguments);var r=this.get_manual_wrap_class(e);"after"==s?e.val()?(e.closest(r).addClass("manual-val"),e.siblings("span.comp-style:not(.comp-for-picker)").addClass("hidden")):(e.closest(r).removeClass("manual-val"),e.siblings("span.comp-style:not(.comp-for-picker)").removeClass("hidden")):"hover"==s&&e.siblings("span.comp-style:not(.comp-for-picker)").addClass("hidden"),t.endT(arguments)},chain_is_on:function(e){return t.isDomEl(e.subgroup.find("input.chained-tracker"))},sync_fields:function(s,r){t.startT(arguments);var a=v.get_subgroup_or_tabgroup(r,"inputs"),o=s.val(),n=!1;a.not(s).not(".vl-name-input").each(function(t){var a=e(this);a.hasClass("color")?(a.hasClass("bound")||v.colorpicker_bind(a.parent()),o?v.update_spectrum(o,a,{},!1):v.clear_spectrum_inputs(v.get_meta(a,"property"))):a.val(o);var i=s.closest(".property-tag");t>0&&""===o&&i.hasClass("has-variable-line")&&(v.delete_variable_field(i,a,r,!1),n=!0),v.post_edit(a)}),n&&v.adjust_grid_line_scroll_buttons(r),t.endT(arguments)},maybe_sync_fields:function(e){if(t.startT(arguments),e.hasClass("autofillable")){var s=v.get_meta(e,"property");v.chain_is_on(s)&&v.sync_fields(e,s)}t.endT(arguments)},sync_important:function(s,r){t.startT(arguments),v.chain_is_on(s)&&v.get_subgroup_or_tabgroup(s).not(s.property).each(function(t){var s=e(this).find("span.important-toggle");("add"==r&&!s.hasClass("active")||"remove"==r&&s.hasClass("active"))&&v.input_icon_toggle(s,!0)}),t.endT(arguments)},bind_keydown_events:function(e){e.on("keydown.tvr",function(t){if(e.hasClass("selector-name-input")&&v.pref.selname_code_synced)return!1}).on("blur",function(){e.off("keydown.tvr")})},run_input_updated:function(e){var t=e.attr("class"),s=!1;if(!t)return!1;if(t.indexOf("property-input")>=0){v.inputWaitingObj=e;var r=v.get_meta(e,"property"),a=v.get_default_unit(r.groupSlug,r.propertySlug),o=e.val(),n=a&&"px (implicit)"!==a,i=a&&a.indexOf(" to ")>-1;if(o&&0===o.indexOf("=")&&!v.process_excel_function(o,r.propertySlug).converted)return v.post_edit(e),!0;if(i||n){v.post_edit(e);var l="convert"+e.attr("name");return v.timer[l]&&clearTimeout(v.timer[l]),v.timer[l]=setTimeout(function(e){v.maybe_sync_fields(e),v.done_typing()},v.beforeAutoConvertInterval,e),!0}v.maybe_sync_fields(e),v.post_edit(e)}else if(t.indexOf("selector-css-textarea")>=0)s=!0,v.pref.selname_code_synced&&e.closest(".float-form").find(".selector-name-input").val(e.val());else if(t.indexOf("sp-input")>=0){var c=v.get_related_meta("picker",e.closest(".sp-container")),d=v.inputWaitingObj=c.$input;if(t.indexOf("sp-input-opacity")<0)v.update_spectrum(e.val(),d,e,!0);else{var _=e.val();if(isNaN(_)||_<0||_>1)return;var u=d.spectrum("get").toRgb();u.a=_,d.spectrum("set",u),v.update_spectrum_inputs(tinycolor(u),d,e,!0)}}s||v.set_input_timer()},bind_input_events:function(e){t.startT(arguments),e.on("input.tvr propertychange.tvr",function(t){v.run_input_updated(e)}),e.on("blur",function(){v.unbind_input_events(e)}),t.endT(arguments)},unbind_input_events:function(e){t.startT(arguments),e.off("input.tvr propertychange.tvr"),t.endT(arguments)},update_input_width_and_scroll:function(s,r,a){if(t.startT(arguments),v.flexible_field_widths()){r=r||14,t.startT("update_ghost_width");s.innerWidth();var o=e("<span>").text(s.val()).appendTo(s.parent()),n=o.innerWidth();o.remove(),s.width(n+r),a||v.adjust_scroll_buttons(v.get_pg_meta(),"style"),t.endT("update_ghost_width")}t.endT(arguments)},maybe_scroll_image_fields:function(s){"list"!==s.groupSlug&&"background"!==s.groupSlug||s.group.find(".bg-image-select").each(function(){t.scroll_input_end(e(this))})},done_typing:function(){if(v.isForbiddenProperty(v.inputWaitingObj))return!1;c.ajax_save_settings({$property:v.inputWaitingObj})},get_folders:function(){t.startT(arguments);var s=[];return e("#tvr-menu").find(".section-tag").each(function(t){var r=v.get_meta(e(this),"section");s[t]=r.sectionH}),t.endT(arguments),s},show_wizard:function(r){t.startT(arguments),v.intelli=!0,v.stat.tvr.addClass("show-wizard");var a=v.stat.toolsMenu.width()+5;v.stat.rightStuff.css("right",a+"px"),s.maybe_stop_mutation_observer(),v.screen_width_adjusted("intelli"),TvrMT.data.prog.combo.cur_folders=v.get_folders();var o="";if(v.wiz_update_sel_mode)o=v.wiz_update_sel_mode.sectionH;else if(t.hasValue(v.selInFocusID))o=v.get_meta(e("#"+v.selInFocusID),"selector").sectionH;else{var n=t.obj_index(0,v.uiData,"non_section");o=n?n.this.label:""}v.stat.wizFolder.val(o).removeClass("text-label"),t.endT(arguments)},hide_wizard:function(){t.startT(arguments),v.stat.tvr.removeClass("show-wizard"),e("#right-stuff-wrap").css("right",""),v.screen_width_adjusted("reg",{skip:1}),v.intelli=!1,e("#wizard-name").val(""),v.redo_sug_sels("",!0),v.toolbar_adjusted(void 0,!1),v.stat.tvr.removeClass("wiz_update_sel"),v.wiz_update_sel_mode=!1,s.maybe_start_mutation_observer(),t.endT(arguments)},wiz_update_sel:function(s){t.startT(arguments);var r=v.get_meta(s,"selector");v.stat.tvr.addClass("wiz_update_sel"),v.wiz_update_sel_mode=r,v.is_cur("sel",r.selectorID)||v.tvr_iterate_selectors_v(r.selectorM),v.close_all_expanded(!1,!1,!0),v.feature_on(e("#hover-inspect-toggle"),"hover_inspect"),t.endT(arguments)},human_tagname:function(e){t.startT(arguments);var s={h1:"heading 1",h2:"heading 2",h3:"heading 3",h4:"heading 4",h5:"heading 5",h6:"heading 6",p:"paragraph",br:"line break",hr:"horizontal rule",abbr:"abbreviation",b:"bold",em:"emphasis",i:"emphasis",ins:"insert",pre:"preformatted",q:"quote",sub:"subscript",sup:"superscript",optgroup:"option group",img:"image",figcaption:"figure caption",a:"link",ul:"unordered list",ol:"ordered list",li:"list item",th:"table heading",tr:"table row",td:"table data",thead:"table head",tbody:"table body",tfoot:"table foot",col:"column",colgroup:"column group"};return t.endT(arguments),s[e]?s[e]:e},human_pseudo:function(e){var s=t.pseudo_str_to_arr(e),r="";for(var a in s)s.hasOwnProperty(a)&&(r+=s[a].replace(/^:nth\-(?:child|of\-type)\((.*)\)$/,":($1)").replace(/^:nth\-last\-(?:child|of\-type)\((.*)\)$/,":L($1)").replace("link","unvisited"));return r},humanize:function(e,s,r){t.startT(arguments),(r=r||{}).keepPre=r.keepPre?e:"";var a=new RegExp("("+e+")([_a-zA-Z0-9"+e+"\\(\\)\\[\\]=\\^\\*'\"\\/\\$~-]+)","g"),o=new RegExp(e,"g");return s=s.match(a),t.endT(arguments),s=s&&s[0]?s[0].replace(o,r.keepPre):"",r.keepDashes||(s=s.replace(/[-_]+/g," ")),s.trim()},ensure_unqique_name:function(e,s,r,a){t.startT(arguments);var o,n=1,i="create-new"==r?v.get_all_selector_code():{};do{var l=!1,c=new RegExp(" _\\d+$");e.match(c)?(1===n&&(n=2),o=e.replace(c," _"+n)):o=n>1?e+" _"+n:e;var d=t.convert_to_param(o);if("folderName"==r)l=v.uiData[d];else if("folderWithSpace"==r)l=v.uiData[d]&&t.obj_length(v.uiData[d])>=v.maxSelsPerFolder;else if("import"==r)l=a.unqSels[d]&&a.unqSels[d].code!=s;else if("create-new"==r)for(var _ in i)if(i.hasOwnProperty(_)&&t.convert_to_param(i[_].sName)==d){l=!0;break}n++}while(l);return t.endT(arguments),o},human_css_name:function(e){t.startT(arguments);var r=[],a=e.split(","),o=s.sel_trail(a[0]).pieces.reverse();for(var n in o)o.hasOwnProperty(n)&&(r[n]={level:0==n?"child":"parent",tagName:o[n].split(/[#:\.]/)[0],id:v.humanize("#",o[n]),class:v.humanize("\\.",o[n]),pseudo:v.human_pseudo(o[n])});var i=[];for(var n in r)if(r.hasOwnProperty(n)){var l="",c="",d=r[n];l=v.human_tagname(d.tagName),d.pseudo&&(c=""+d.pseudo),d.id?i[n]=d.id:d.class?i[n]=d.class:i[n]=l,i[n]+=c}u="";if(a[1]){var _=a.length-1,u=1==_?"& "+v.human_css_name(a[1].trim()):"+"+_+" "+TvrLang.more;i.unshift(u)}t.endT(arguments);i[0];var p=u?3:2,f=[];for(var g in i)if(i.hasOwnProperty(g)){if(g>=p)break;f.push(i[g])}var m=f.reverse().join(" ");return v.ensure_unqique_name(m,e,"create-new")},get_nice_name:function(s,r,a){t.startT(arguments),s=s||v.intelli_css,t.startT("capitalizeFL");var o;o=a?s:t.capitalizeFL(v.human_css_name(s)),t.endT("capitalizeFL");var n=e("#wizard-name");if(!r||n.is(":focus")&&!t.isTextSelected(n[0])){t.isTextSelected(n[0]);return t.endT(arguments),o}n.val(o),v.el_selected&&v.maybe_auto_select_label(),t.endT(arguments)},maybe_auto_select_label:function(t){t=t||e("#wizard-name");var s=e("#code-suggestions").find("li.in-focus").find("input.sug-sel"),r=e("#css-filters").find("input.cssfilter-combo:focus"),a=e("#wizard_inspector_html").find("textarea:focus");v.pref.selname_code_synced||s.is(":focus")||r.length||a.length||TvrMT.integrate.elementor||t.select()},clear_wizard:function(){if(t.startT(arguments),v.feature_off(0,"mt_highlight",{fHTML:1,noSave:1}),s.triggerEl={},e("#html-computed-css").find("span.comp-prop-value").html(""),e("#wizard-name").val(""),v.redo_sug_sels(""),e("#targets-nothing").removeClass("show"),e("#selector-naming").find(".refine-target-controls").find("span").addClass("disabled"),v.stat.breadcrumbs.html(""),v.pref.wizard_expanded||v.pref.dock_wizard_right){if(o.eds.wizard_inspector_html){var r=o.eds.wizard_inspector_html;r.gotoLine(1,0),r.scrollToLine(1,!0,!0,function(){})}e("#actual-styles").html("")}t.endT(arguments)},pseudo_updated:function(r,a){var o=r.closest("li");if(a.input){var n=v.get_css_filter_alias(r);t.isDomEl(n)&&((n=n.find("input.combobox")).val(r.val()),v.update_input_width_and_scroll(n,4,!0)),v.update_input_width_and_scroll(r,4,!0)}var i=e("#code-suggestions");i.find("li").each(function(t){a.manual=1,a.$li=o;var r=e(this),n=r.find(".sug-sel"),i=n.attr("rel"),l=r.data("level"),c=s.apply_css_filters(n.val(),s.dom.nodes[l],s.dom,a);if(n.val(c.code),!s.dom.sels.final[t]||s.dom.sels.final[t].refKey!==i)return!0;s.dom.sels.final[t].code=c.code,n.get(0).scrollLeft=n.get(0).scrollWidth;var d=n.attr("rel");if(d&&s.dom.sels.combo[d])for(var _=0;_<s.dom.sels.combo[d].length;_++){var u=s.dom.sels.combo[d][_];c=s.apply_css_filters(u,s.dom.nodes[l],s.dom,a),s.dom.sels.combo[d][_]=c.code}});var l=i.find("li.in-focus");t.isDomEl(l)?(v.sug_sel_updated(l.find("input"),{con:"manual"}),s.set_quick_go_options(s.triggerEl)):t.isDomEl(s.triggerEl)&&s.all_targeting_actions(s.triggerEl,{})},sug_sel_updated:function(r,a){var o=r.closest("li"),n=a.val?a.val:r.val();if(n=v.strip_beyoned_brace(n),a.editingNameField)if(t.isDomEl(r))r.val(n);else{var i='<li class="code-suggestion in-focus manual-edit" data-level="0"><span class="sugsel-radio tvr-icon" title="'+TvrLang.choose_suggestion+'"></span><span class="tvr-input-wrap"><input type="text" class="sug-sel combobox" value="'+t.regular_escape_quotes(n)+'" /></span><span class="num-els-icon-wrap">'+v.num_els_icon("")+"</span></li>";v.redo_sug_sels(i),o=e("#code-suggestions").find("li")}"manual"==a.con&&(e("#code-suggestions").addClass("has-manual-edit").find("li.manual-edit").removeClass("manual-edit"),o.addClass("manual-edit"));var l=s.jquery_compat_sel_elements(n),c=l.length;o.find(".num-els-icon-wrap").add(e("#selector-naming").find(".num-els-icon-wrap")).html(v.num_els_icon(c));var d=!!c;if(c&&l.each(function(){if(e(this).is(s.triggerEl))return d=!1,!1}),d){var _=l.first();s.all_targeting_actions(_,{}),s.element_selected(_)}v.intelli_css=n,s.reposition_overlays({con:"intelli"}),v.update_invalid_selector_msg("#no-element"==l.selector,n,c),v.get_nice_name(n,!0,v.pref.selname_code_synced)},sug_sel_mouseenter:function(t){v.intelli_css=t.hasClass("mt-el-quick-item")?t.data("code"):t.val(),e("#code-suggestions").find("li.in-focus").addClass("hover-elsewhere"),v.feature_on(0,"mt_highlight",{offFirst:{fHTML:1,noSave:1},fHTML:1,noSave:1,con:"intelli",css:v.intelli_css,scroll:0})},sug_sel_mouseleave:function(){var r=e("#code-suggestions").find("li.in-focus");t.isDomEl(r)&&(r.removeClass("hover-elsewhere"),v.intelli_css=r.find(".sug-sel").val(),v.iframe_functions_loaded()&&s.reposition_overlays({con:"intelli",scroll:0}))},update_selector_suggestions:function(){t.startT(arguments),e("#code-suggestions").find("li.in-focus").hasClass("manual-edit")||v.get_nice_name(!1,!0,v.pref.selname_code_synced);for(var r="",a=0;a<s.dom.sels.final.length;a++){var o=s.dom.sels.final[a],n='data-level="'+o.level+'"',i=o.isCombo?" combobox has-arrows":"",l=i?'data-appto="#refine-targeting-pane"':"",c=o.isCombo?" combobox-has-arrows ":"",d=i?'<span class="combo-arrow"></span>':"",_=(i&&"x_plus"==o.refKey?"<sup>+</sup>":"")?"+":"",u=i?'rel="'+o.refKey+'"':"";r+='<li class="code-suggestion" '+n+'><span class="sugsel-radio tvr-icon" title="'+TvrLang.choose_suggestion+'"></span><span class="tvr-input-wrap'+c+'"><input type="text" class="sug-sel'+i+'" value="'+t.regular_escape_quotes(o.code)+'" '+u+" "+l+" />"+d+'</span><span class="num-els-icon-wrap">'+v.num_els_icon(o.n,_)+"</span></li>"}v.redo_sug_sels(r),v.update_invalid_selector_msg(s.dom.invalidSel),t.endT(arguments)},redo_sug_sels:function(t,s){var r=e("#code-suggestions");s?r.removeClass("has-manual-edit").html(t):(r.find("li").not(".manual-edit").remove(),r.append(t));var a=r.find("li").first();a.addClass("in-focus"),e("#selector-naming").find(".wiz-name").find(".num-els-icon-wrap").html(v.num_els_icon(a.find(".num-els-icon").text())),r.find("input.sug-sel").add(e("#wizard-name")).each(function(){var t=e(this);t.get(0).scrollLeft=t.get(0).scrollWidth})},update_invalid_selector_msg:function(r,a,o){var n="",i="";for(var l in s.dom.sels.nothing)s.dom.sels.nothing.hasOwnProperty(l)&&(i+="<li>"+s.dom.sels.nothing[l].code+"</li>");r&&(a=a||s.dom.sels.nothing[0].code,n+='<li title="'+TvrLang.invalid_sel_long+'">'+a+"</li>"),e("#targets-nothing-sels").html(i),e("#targets-nothing-invalid").html(n),t.isDefined(o)&&o<1||s.dom.sels.nothing.length||r?(e("#targets-nothing").addClass("show"),v.stat.tvr.addClass("targets_nothing")):(e("#targets-nothing").removeClass("show"),v.stat.tvr.removeClass("targets_nothing")),r?e("#nothing-invalid").addClass("show"):e("#nothing-invalid").removeClass("show"),s.dom.sels.nothing.length?e("#nothing-valid").addClass("show"):e("#nothing-valid").removeClass("show")},num_els_icon:function(e,t){t=t||"";var s=e.toString(),r=1===e?tvrsprintf(TvrLang.n_els,s):tvrsprintf(TvrLang.n_els_plural,s+t);return'<span class="num-els-icon'+(0===e?" el-targets-nothing":"")+'" title="'+r+'">'+e+"</span>"},refresh_wizard_comp_css:function(){t.startT(arguments),v.filter_css_exceptions("intelli");var s=v.intelliCompProps=v.un_flatten_css(v.intelliCompProps),r=v.pgInFocusWiz;e("#comp-"+r).find("li.property-item").remove();var a="",o=1,n="";for(var i in s[r])if(s[r].hasOwnProperty(i)){n=t.isOdd(o)?"row-odd":"row-even";var l=i.replace(/-/g," "),c=s[r][i];c&&c.toString().indexOf("rgb")>-1&&(c=v.trans_gradient_box(c)+" "+t.maybe_to_hex(c)),a+='<li class="property-item accordion-item '+n+'">',a+='<span class="comp-prop-label">'+l+":</span> ",a+='<span class="comp-prop-value">'+c+"</span>",a+="</li>",++o}a+='<li class="property-item accordion-item bottom-gap"></li>',e("#comp-"+r).append(a),t.endT(arguments)},un_flatten_css:function(e){t.startT(arguments);var s=[];for(var r in v.cssProps)if(v.cssProps.hasOwnProperty(r)){s[r]=[];for(var a in v.cssProps[r])if(v.cssProps[r].hasOwnProperty(a)){var o=v.cssProps[r][a].cssf;"background-img-full"===o||"extracted-gradient"===o||"google-font"===o||v.propAliases[o]||"order-grid"===o||"text-shadow"===o||"box-shadow"===o||"background-image"===o&&"gradient"===r||(s[r][o]=e[o])}}return t.endT(arguments),s},wizard_new_or_update_selector:function(s,r,a){if(t.startT(arguments),v.pref.show_code_editor){if(!v.pref.buyer_validated&&o.count_editor_selectors()>15)return alert(TvrLang.trial_notice),!1;(a=a||e("#code-suggestions").find("li.in-focus .sug-sel").val())&&o.insert_code_view_selector(a)}else{var n=e("#wizard_folder").val();if(!t.hasValue(n)||n===TvrLang.wizard_folder)return alert(TvrLang.wizard_folder_alert),!1;var i;a?i=v.get_nice_name(a,!1,v.pref.selname_code_synced):(i=e("#wizard-name").val(),a=e("#code-suggestions").find("li.in-focus .sug-sel").val());var l=t.convert_to_param(n);if(v.uiData[l]&&t.obj_length(v.uiData[l])>=v.maxSelsPerFolder&&(n=v.ensure_unqique_name(n,!1,"folderWithSpace"),l=t.convert_to_param(n)),!t.isDomEl(e("#strk-"+l))&&!v.add_section(e("#new-section-add"),n))return!1;var c=v.get_meta(e("#strk-"+l),"section");if(r.indexOf("wizard-add")>=0){if(c.sectionM.find(".add-selector-form").find(".selector-name-input").val(i),c.sectionM.find(".add-selector-form").find(".selector-css-textarea").val(a),!v.add_selector(c.sectionM.find("span.add-selector")))return!1}else{var d=v.get_meta(e("#"+v.selInFocusID),"selector"),_=d.sectionSlug!==l&&l;if((_||d.selectorSlug!==t.convert_to_param(i)||d.selectorM.find(".selector-css-textarea").val()!==a)&&(d.selectorM.find(".selector-name-input").val(i),d.selectorM.find(".selector-css-textarea").val(a),!v.action_modify_selector(d.selectorM.find("span.edit-selector"),{},_)))return!1}}v.feature_off(!1,"hover_inspect",{noSave:1}),v.clear_css_filters(!0),t.endT(arguments)},ensure_backwards_compat:function(){t.startT(arguments),parseInt(v.pref.manual_recompile_all_css)&&v.compile_non_compiled_selectors(),t.endT(arguments)},compile_non_compiled_selectors:function(){v.uiData=i.filter_object_keys("clean",v.uiData,0);var s={M:{},template:"ui",no_style_node_update:!0,compile_non_compiled:!0,onlyRun:{recurse_key:["m_query"]},onlyLoop:{recurse_key:["m_query"]}},r={section:[{item:i.ensure_folder_label,args:[!1]},{item:i.update_item_index,args:[!1]},{item:i.check_values,args:[!1]}],selector:[{item:i.update_item_index,args:[!1]},{item:i.check_jsu,args:[!1]},{item:i.check_values,args:[!1]}],property:[{item:i.update_property_values_structure,args:[!1]}]},a={section:[{item:i.update_dots,args:[!1]}],selector:[{item:i.check_jsu,args:[!0]}],group:[{item:i.modify_item,args:["group_to_css",{}]},{item:i.check_values,args:[!1]}]};s.maxDepth="property",s.cb=r;var o=i.run(v.uiData,s).settings;s.settings=o,s.maxDepth="group",s.cb=a,o=i.run(v.uiData,s).settings;v.client_scss?o=i.run_global_scans(o,["scss_types"]):t.checkObject(v.uiData,["non_section","scss_usage"])&&delete v.uiData.non_section.scss_usage,(o=c.user_action(o,{items:["MT data structure updated"],icon:"data-structure lg-icon"})).savePackage&&o.savePackage.length&&(o.savePackage=!1,o.fullSCSSCompile=v.client_scss,c.ajax_save_settings({settings:o,serialise:!0})),parseInt(v.pref.manual_recompile_all_css)&&(v.pref.manual_recompile_all_css=0,e.get(v.ajaxUrl+"&manual_recompile_all_css=0",function(){}))},load_visual_view:function(s){if(t.startT(arguments),v.stat.body.addClass("tvr-visual"),o.init_editor_deps(),v.maybe_initiate_sass_js(),v.ensure_backwards_compat(),v.pref.detach_preview||MTlocal.maybe_load_site_preview(),v.pref.returned_ajax_msg&&!v.pref.returned_ajax_msg_seen)for(var r in v.pref.returned_ajax_msg)v.pref.returned_ajax_msg.hasOwnProperty(r)&&c.log(v.pref.returned_ajax_msg[parseInt(r)]);window.history.pushState&&parseInt(e("#clean-ui-url").attr("rel"))&&window.history.pushState(v.uiUrl,null,v.uiUrl),o.bind_editor(v.stat.inlineEditor,{filterClass:"custom-css-pre",mode:parseInt(v.pref.allow_scss)?"scss":"css",M:"css",directContent:"pending"}),_.bind_gridstack(),v.sidebar_showing()&&this.set_sidebar_size(v.editor_only_left(),!1),v.update_wizard_html({bindOnly:!0}),v.default_to_tab("mq"),v.default_to_sel(),v.toolbar_adjusted(),v.toggle_enabled_buttons(),v.pref.detach_preview&&this.retrieve_or_load_detached(),MTlocal.apply_rulers(),v.pref.show_code_editor&&v.default_to_tab("css"),v.pref.dock_wizard_right&&v.move_wizard_right(),window.launchMTUnlock&&v.show_dialog(e("#mt-renew-prompt")),v.adjust_scroll_buttons(!1,"responsive"),t.endT(arguments)},scss_div:"/*MTSCSSPART*/",sass_preloaded_files:[],sass_worker_to_mt_dir:"../../../../micro-themes/",maybe_initiate_sass_js:function(){if(v.client_scss){v.sass=new Sass;v.uiData.non_section.hand_coded_css;v.sass.options({style:Sass.style.expanded,indent:"\t"},function(){}),v.sass.importer(function(e,s){var r=e.resolved.replace("/sass/",""),a=v.check_file_exists(r,!0);a?t.in_array(a,v.sass_preloaded_files)?s({path:e.path}):c.simple_ajax_request({url:v.ajaxUrl+"&load_sass_import="+encodeURI(a),dataType:"json",plus:TvrLang.loading_sass_import,minus:TvrLang.loading_sass_import_failed,cbFunction:function(e,t){v.sass.writeFile(a,e.content,function(s){v.sass_preloaded_files.push(a),t({content:e.content})})},cbfArgs:[s]}):s({error:"Import failed, no file found: "+r+". Try refreshing Microthemer if path is definitely correct."})}),v.sass.writeFile(TvrMT.data.dyn.preloaded_sass_imports,function(e){v.sass_preloaded_files=Object.keys(TvrMT.data.dyn.preloaded_sass_imports),TvrMT.data.dyn.preloaded_sass_imports=null,v.sass.compile(v.uiData.non_section.hand_coded_css,function(e){})})}},parse_scss:function(e){try{return window.TvrSCSS.parse(e,{syntax:"scss"})}catch(e){}return!1},normalise_scss_type_name:function(e,s){var r=["variable","mixin","function"];return t.in_array(e,r)?s.replace(/-/g,"_"):s},get_ast_child_node:function(e,t,s){for(var r=0;r<e.length;r++){var a=e[r];if(a.type===t)return s?a[s]:a}return!1},get_variable_node_data:function(e,t,s,r){var a,o=t.content[0].content,n=t.insideFM||r.insideFM,i=r.isRelatedType;if("property"===s.type){var l="";if((a=v.get_ast_child_node(s.parent.content,"value"))&&(e={value:l=a.toString()}),i&&!v.is_scss_global_var(l))return r.localDecs[o]=1,!1}else if(i&&(r.localDecs[o]||t.insideArg&&!t.insideDec))return r.localDecs[o]=1,!1;return!(n&&r.onlyGlobalVars&&!v.is_scss_global_var(e.value)&&!v.is_scss_default_var(e.value))&&{name:o,value:e}},is_scss_global_var:function(e){return"string"==typeof e&&e.indexOf("!global")>-1},is_scss_default_var:function(e){return"string"==typeof e&&e.indexOf("!default")>-1},get_scss_types:function(e){var s=e.parseTree?e.parseTree:v.parse_scss(e.code);if(!s)return"parseFail";v.parseTreeDone||(v.parseTreeDone=!0);var r={},a=e.types?e.types:v.scss_types,o=!1;return s.traverse(function(s,n,i){var c,d=s.type,_=!1,u={value:1};("mixin"===d||i&&i.insideFM||"atrule"===d&&v.get_ast_child_node(s.content,"function"))&&(s.insideFM=1),("arguments"===d||i&&i.insideArg)&&(s.insideArg=1),("declaration"===d||i&&i.insideDec)&&(s.insideDec=1);var p=["property","variable","extend"],f=e.isRelatedType&&!t.in_array(d,p);if(!t.in_array(d,a)||f)return!1;switch(d){case"atkeyword":if("import"!==(d=v.get_ast_child_node(s.content,"ident","content")))return!1;c=v.get_ast_child_node(i.content,"string","content");break;case"property":return s.parent=i,!1;case"variable":var g=v.get_variable_node_data(u,s,i,e);if(!g)return!1;c=g.name,u=g.value;break;case"function":if(c=s.content[0].content,t.in_array(c,l.css_functions))return!1;"atrule"===i.type&&(u={value:i.toString()},_={node:i,parent:i});break;case"mixin":c=v.get_ast_child_node(s.content,"ident","content"),u={value:s.toString()},_={node:s,parent:i};break;case"include":d="mixin",c=v.get_ast_child_node(s.content,"ident","content");break;case"extend":c=v.get_ast_child_node(s.content,"selector").toString(),u={value:"extender"}}if(c=v.normalise_scss_type_name(d,c),t.checkObject(r,[d,c,"values"])||t.updateObject(r,[d,c,"values"],[]),r[d][c].values.push(u.value),!e.isRelatedType&&_){var m=v.get_scss_types({isRelatedType:1,parseTree:_.node,types:["property","variable","extend","include","function"],localDecs:{},insideFM:1});m&&(r[d][c].related_types=m)}1!==u.value&&(r[d][c].value=u.value,r[d][c].hasDeclaration=1),o=!0}),!!o&&r},maybe_merge_related_types:function(t,s){s&&(t.related_types||(t.related_types={}),t.related_types=e.extend(!0,t.related_types,s))},cross_update_related_types:function(e,s,r){for(var a=Object.keys(r),o=0;o<a.length;o++)for(var n=a[o],i=Object.keys(r[n]),l=0;l<i.length;l++){var c=i[l];t.checkObject(e,[n,c])||t.updateObject(e,[n,c],{}),v.maybe_merge_related_types(e[n][c],s)}},log_all_scss_usage:function(s,r,a,o,n){for(var l=Object.keys(a),c=0;c<l.length;c++)for(var d=l[c],_=a[d],u=Object.keys(_),p=0;p<u.length;p++){var f=u[p],g=e.extend(!0,{},a[d][f]),m=g.values,h=g.value,b=g.related_types;t.checkObject(r,[d,f,"deps"])||t.updateObject(r,[d,f,"deps"],[]),t.checkObject(r,[d,f,"values"])||t.updateObject(r,[d,f,"values"],[]);var y=r[d][f];if(m&&(y.values=y.values.concat(m)),b){v.maybe_merge_related_types(y,b);var w={};t.updateObject(w,[d,f],{}),v.cross_update_related_types(r,w,b)}h&&(y.finalDecVal=h);var T={};h&&(T.hasDeclaration=1),s&&(e.extend(!0,T,{trail:o.trail.selector,mq_key:o.recurse.mq_key,sectionSlug:o.section_key,selectorSlug:o.selector_key}),y.deps.push(T));var x=g.locMeta;if(x){var C=Object.keys(x);for(k=0;k<C.length;k++){var S=C[k],M=e.extend(!0,{},x[S]),j=M.trail.join(".");t.checkObject(y,["locDone",j])||(y.deps.push(M),t.updateObject(y,["locDone",j],1),"removed"===M.action&&i.updateObjectAndSavePackage(o.settings.savePackage,[{action:"delete",trail:o.trail.item.concat(["scss_types","extend",f,"locMeta"]),key:S}]))}}}},get_raw_scss_or_selector:function(e,t){var s=t||e;return e.raw_scss?e.raw_scss:s.label.split("|")[1]+" {\n\n}\n"},tag_extended:function(e,s,r){if(!e.settings.extend)return!1;for(var a=e.settings.extend,o=Object.keys(a),n=v.uiData[e.section_key][e.selector_key],i=v.get_raw_scss_or_selector(s,n),l=0;l<o.length;l++){var c=o[l],d=a[c],_=d.action;if(v.extender_match(c,i)&&d.actions)for(var u=0;u<d.actions.length;u++){_=d.actions[u].action,e.settings.active_scss_types||(e.settings.active_scss_types={}),t.checkObject(e.settings.active_scss_types,["extend",c,"locMeta"])||t.updateObject(e.settings.active_scss_types,["extend",c,"locMeta"],{});var p=e.trail.selector.join(".");e.settings.active_scss_types.extend[c].locMeta[p]={action:_,trail:e.trail.selector,mq_key:r,sectionSlug:e.section_key,selectorSlug:e.selector_key}}}},log_all_scss_selectors:function(e,t,s){var r=e.settings.deps,a=t.raw_scss;a||(a="");var o=e.trail.selector,n=e.section_key,i=v.get_selector_index_from_trail(n,o);r[s][i]={code:a,mq_key:s,sectionSlug:n,selectorSlug:e.selector_key,trail:o}},scss_types:["variable","function","mixin","include","extend","property","atkeyword"],prev_full_code_scss_types:{},compare_scss_types:function(s,r){s=s||{},r=r||{};for(var a=e.extend(!0,{},s),o=Object.keys(r),n=0;n<o.length;n++){var i=o[n],l=Object.keys(r[i]);s[i]||(a[i]={});for(var c=0;c<l.length;c++){var d=l[c],_=v.get_value_from_possible_object(t.checkObject(s,[i,d])),u=v.get_value_from_possible_object(r[i][d]);!1===_?a[i][d]={action:"added",actions:v.compare_add_remove_values(t.checkObject(s,[i,d,"values"]),t.checkObject(r,[i,d,"values"])),value:u,form:t.checkObject(w,[i,d,"hasDeclaration"])?"declaration":"instance"}:_===u&&delete a[i][d]}}for(var p=!1,f=Object.keys(a),g=0;g<f.length;g++){i=f[g],l=Object.keys(a[i]);for(var m=0;m<l.length;m++)if(p=!0,d=l[m],"added"!==a[i][d].action){var h=v.get_value_from_possible_object(t.checkObject(r,[i,d])),b=v.get_value_from_possible_object(t.checkObject(s,[i,d])),y=h?"changed":"removed",w=h?r:s,T=h||b,k=t.checkObject(w,[i,d,"hasDeclaration"])?"declaration":"instance",x={action:y,actions:v.compare_add_remove_values(t.checkObject(s,[i,d,"values"]),t.checkObject(r,[i,d,"values"])),value:T,form:k};"changed"===y&&(x.oldValue=b),a[i][d]=x}}return!!p&&a},compare_add_remove_values:function(e,s){var r=[];return t.compare_array_values(s,e,"added",r),t.compare_array_values(e,s,"removed",r),!!r.length&&r},get_value_from_possible_object:function(e){return e===Object(e)?t.combine_array_values(e.values):e},get_co_dependent_types:function(s,r,a){var o={},n=!1,i=["extend"];if(r||i.push("variable"),s)for(var l=0;l<i.length;l++){var c=i[l],d=t.checkObject(s,[c]);d&&(o[c]=d,n=!0)}if(a){var _=v.get_extenders(a);_&&(e.extend(!0,o,_),n=!0)}return!!n&&o},get_changed_and_co_dependents_types:function(e,t,s,r){var a=v.get_co_dependent_types(t,s,r);return!(!e&&!a)&&{changed:e,co_types:v.get_co_dependent_types(t,s,r)}},extender_match:function(e,s){var r=t.escapeRegExp(e),a=new RegExp("(?<!@extend\\s)"+r+"(?:[\\s{,]+)");return s.match(a)},get_extenders:function(e){var s=t.checkObject(v.uiData,e.split("."));if(!s)return!1;var r=t.checkObject(v.uiData,["non_section","scss_usage","extend"]);if(!r)return!1;for(var a=v.get_raw_scss_or_selector(s),o=!1,n=Object.keys(r),i={extend:{}},l=0;l<n.length;l++){var c=n[l];v.extender_match(c,a)&&(i.extend[c]={},o=!0)}return!!o&&i},cachedDeps:!1,prepare_scss_sources_obj:function(){return{sectionNodes:{},deps:v.cachedDeps?v.cachedDeps:v.prepare_dependent_sels_obj(),fullstring:"",parts:[]}},add_selective_sources:function(e,s,r){var a=v.get_changed_and_co_dependents_types(s.scss_types_changed,s.scss_types,s.codeEditorEdited,s.selIdentifier);if(r)e.fullstring+=s.code+v.scss_div,e.parts.push(s);else{var o=s.sectionIndex+s.index;e.deps[s.mq_key][o]=s}var n=t.checkObject(v.uiData,["non_section","scss_usage"]),i={selsAdded:{},relatedTypesChecked:{}},l=Object.keys(TvrMQsCombined);if(a&&n&&(e.deps=v.gather_dependent_selectors(e,a,n,i)),"hand_coded_css"!==s.editor_slug&&(s.scss_types||e.numSels>1)){var c=t.checkObject(v.uiData,["non_section","code_editors","hand_coded_css","scss_types"]);if(c){var d=v.get_co_dependent_types(c,!1,!1);d&&(e.deps=v.gather_dependent_selectors(e,{co_types:d},n,i))}v.scss_deps_to_string_parts(e,e.deps,l),v.add_full_code_scss_part(e)}else v.scss_deps_to_string_parts(e,e.deps,l)},prepare_dependent_sels_obj:function(e,t){e=e||{},t=t||Object.keys(TvrMQsCombined);for(var s=0;s<t.length;s++)e[t[s]]=[];return e},gather_dependent_selectors:function(s,r,a,o){for(var n,i=s.deps,l=Object.keys(r),c=0;c<l.length;c++){var d=l[c];if(r[d])for(var _=Object.keys(r[d]),u=0;u<_.length;u++)for(var p=_[u],f=Object.keys(r[d][p]),g=0;g<f.length;g++){var m=f[g],h=r[d][p][m],b="changed"===d?h:{};if(!t.checkObject(o.relatedTypesChecked,[p,m])){t.updateObject(o.relatedTypesChecked,[p,m],1);var y=t.checkObject(a,[p,m,"related_types"]);y&&(i=v.gather_dependent_selectors(s,{related_types:y},a,o))}var w=t.checkObject(a,[p,m,"deps"]);if(w&&w.length>0)for(var T=w.length-1;T>=0;T--)if(w[T]){var k=(n=e.extend(!0,{},w[T])).action,x=n.hasDeclaration;"changed"===d&&b.form;if(!("co_types"===d&&"variable"===p&&!x)){var C=n.trail,S=C.join(".");if(!o.selsAdded[S]){var M=t.checkObject(v.uiData,C);if(M){var j=v.get_selector_index_from_trail(n.sectionSlug,C);n.code=v.get_raw_scss_or_selector(M),i[n.mq_key][j]=n,o.selsAdded[S]=1,s.numSels++;var D=v.get_co_dependent_types(M.scss_types,!1,S);D&&(i=v.gather_dependent_selectors(s,{co_types:D},a,o))}}k&&("removed"===k?w.splice(T,1):"added"===k&&delete n.action)}}}}return i},toggle_scss_import_compile_note:function(e){"show"===e?(v.stat.scss_compile_notes.hide(),v.stat.scss_import_compile_notes.show()):(v.stat.scss_compile_notes.show(),v.stat.scss_import_compile_notes.hide())},log_client_scss_error:function(t,s,r,a){var o=s.file&&"stdin"!==s.file;if(t){if(o){var n=v.check_file_exists(s.file.replace("/sass/",""),!0);v.sass.readFile(n,function(e){v.log_client_scss_error(!1,s,e,a)}),v.toggle_scss_import_compile_note("show"),v.stat.scss_error_file.text(n)}else v.log_client_scss_error(!1,s,v.previousSCSSCompile,a),v.toggle_scss_import_compile_note("hide");return!1}var i=TvrLang.scss_error_line,l=v.stat.view.find(".tab-field-scss_compile").attr("rel"),d=o?v.stat.scss_import_compile_notes.html():"",_=s.message.replace(a,"");v.scss_error={log:{short:TvrLang.scss_error,long:"<p>"+TvrLang.scss_error_long+'.</p><p style="font-weight: bold">'+_+".</p>"+d+'<p><span id="scss-line-error" class="link show-dialog" rel="display-css-code" data-tab="'+l+'" data-line="'+s.line+'" title="'+i+'">'+i+"</span></p>"},tabKey:l,fullString:r},c.update_full_logs(v.scss_error.log),e.extend(!0,v.scss_error,s),v.stat.tvr.addClass("cur_scss_error")},clear_client_scss_error:function(){c.clear_messages(),v.stat.tvr.removeClass("cur_scss_error"),v.scss_error=!1,v.toggle_scss_import_compile_note("hide"),v.dialog_tab_pressed(v.stat.view.find("span.dialog-tab-"+v.pref.generated_css_focus))},scssCompileNext:{},compileQueue:[],enqeueCompile:function(e){v.compileQueue.push(e)},deqeueCompile:function(){v.compileQueue.shift()},pendingCompile:function(){return!!v.compileQueue[0]&&v.compileQueue[0]},mt_compile_scss:function(s,r,a,o,n){if(v.compilingSCSS)return v.enqeueCompile([s,r,a,o,n]),!1;t.startT("prep_and_compile_scss"),t.startT("prep_scss"),v.compilingSCSS=!0;var i=s.settings,l=i.preprocessor,d=v.prepare_scss_sources_obj(),_=i.fullSCSSCompile||l.importChanged||v.fullCompileNeeded;v.fullCompileNeeded=_,d.numSels=0,_&&!v.scssCompileNext.run?(c.update_prog_indicator("plus",TvrLang.compile_scss),v.scss_compile_everything(d)):v.add_selective_sources(d,l,o),v.cachedDeps=e.extend(!0,{},d.deps),t.endT("prep_scss",1),t.startT("compile_scss"),v.sass.compile(d.fullstring,function(e){_&&c.update_prog_indicator("minus",!1,TvrLang.compile_scss),t.endT("compile_scss",1),t.endT("prep_and_compile_scss"),v.compilingSCSS=!1,t.startT("post_scss_node_update_or_error");var o=new RegExp(t.escapeRegExp(v.scss_div),"g");v.previousSCSSCompile=d.fullstring.replace(o,""),e.status&&3!==e.status?v.log_client_scss_error(!0,e,!1,o):(v.fullCompileNeeded=!1,v.scss_error&&v.clear_client_scss_error(),i=v.update_nodes_with_compiled_css(i,d,e),v.cachedDeps=!1),t.endT("post_scss_node_update_or_error"),t.endT("user_input_to_style_render",1);var l=v.pendingCompile();if(l)return v.deqeueCompile(),v.mt_compile_scss.apply(this,l),!1;c.save_or_start_timer(s,r,a,n)})},update_nodes_with_compiled_css:function(e,r,a){var o=a.text?a.text.trim():"",n=v.extract_compiled_parts(o),l="";";"===n[n.length-1]&&n.pop(),r.parts.length,n.length;for(var d=0;d<n.length;d++){var _=r.parts[d];if(!(_.isJunk||_.trail&&!t.checkObject(v.uiData,_.trail))){var u=_.compiled_css_trail?_.compiled_css_trail:_.trail.concat(["compiled_css"]);l=n[d].trim()+"\n",_.node_trail&&(l=l.replace(c.full_editor_placeholder_comment,""));var p={action:"replace",trail:u,data:l=v.apply_sass_post_css(l)};e.savePackage?i.updateObjectAndSavePackage(e.savePackage,p):t.updateObject(v.uiData,u,l,p),_.node_trail&&s&&s.update_preview_style_node(_.node_trail,l)}}for(var f=Object.keys(r.sectionNodes),g=0;g<f.length;g++){var m=f[g].split("."),h=m[0],b=m[1],y=[h,b];l=i.get_section_css(!1,!1,i.get_js_object_data([b],h).data),s&&s.update_preview_style_node(y,l,i.get_media_query(h))}return e},apply_sass_post_css:function(e){var t=l.parse_css(e,!0);return t.stylesheet.rules=l.add_final_compile_data(t.stylesheet.rules),l.stringify_css(t,{opts:{},tabDepth:0,tab:""})},get_selector_index_from_trail:function(e,t){var s=v.get_section_index(e),r=t.length>2?t.slice(Math.max(t.length-2,1)):t;return s+v.get_selector_index(r)},scss_deps_to_string_parts:function(e,s,r){for(var a=0;a<r.length;a++){var o=r[a],n=s[o].filter(Boolean),i="all-devices"!==o&&n.length,l=i?"\t":"";if(i){var c=v.pref.m_queries[o],d="\n\n/*( "+c.label+" )*/\n";e.fullstring+=d+c.query+" {\n"+v.scss_div,e.parts.push({isJunk:!0})}for(var _ in n)if(n.hasOwnProperty(_)){var u=n[_];if(t.checkObject(v.uiData,[u.sectionSlug,u.selectorSlug])){var p="\n"+l+"/** "+v.get_section_name(u.sectionSlug)+" >> "+v.get_selector_name([u.sectionSlug,u.selectorSlug])+" **/\n"+l+v.scss_div;e.fullstring+=p,e.parts.push({isJunk:!0}),"all-devices"!==u.mq_key&&(u.code=u.code.replace(/\n/g,"\n\t")),e.fullstring+=u.code+v.scss_div,e.parts.push({trail:u.trail,mq_key:u.mq_key}),e.sectionNodes[u.mq_key+"."+u.sectionSlug]=1}}i&&(e.fullstring+="\n}\n"+v.scss_div,e.parts.push({isJunk:!0}))}},add_full_code_scss_part:function(t){if(!v.uiData.non_section.hand_coded_css)return!1;var s=l.get_trail_from_name("tvr_mcth[non_section][hand_coded_css_compiled]"),r=e.extend([],s),a="/*= Full Code Editor CSS ============ */\n\n"+v.scss_div;t.fullstring=v.uiData.non_section.hand_coded_css+v.scss_div+t.fullstring,t.parts.unshift({compiled_css_trail:s,node_trail:r}),t.fullstring=a+t.fullstring,t.parts.unshift({isJunk:!0})},scss_error:!1,scss_compile_everything:function(e){v.add_full_code_scss_part(e),e.deps=i.run_global_scans({},["get_all_scss"]).deps,v.scss_deps_to_string_parts(e,e.deps,Object.keys(TvrMQsCombined))},get_section_name:function(e){return t.checkObject(v.uiData,[e,"this","label"])},get_selector_name:function(e){return t.checkObject(v.uiData,e.concat(["label"])).split("|")[0]},get_section_index:function(e){return t.checkObject(v.uiData,[e,"this","index"])},get_selector_index:function(e){return t.checkObject(v.uiData,e.concat(["index"]))},check_update_scss_changes:function(e,s){var r=this.get_scss_types(s);if("parseFail"===r)return!1;var a=t.checkObject(v.uiData,s.scss_types_trail),o=v.compare_scss_types(a,r);if(o){if(t.obj_length(o.extend)>0&&(v.search_scss_extendable_selectors(e,s,o.extend,r),r=e.active_scss_types),r.extend)for(var n=Object.keys(r.extend),l=0;l<n.length;l++){var c=n[l];t.checkObject(o,["extend",c])||(r.extend[c]=a.extend[c])}i.updateObjectAndSavePackage(e.savePackage,{action:"replace",trail:s.scss_types_trail,data:r})}return o},search_scss_extendable_selectors:function(e,t,s,r){e.extend=s,e.active_scss_types=r,t.mq_key&&(e.mq_key=t.mq_key);var a=i.run_global_scans(e,["tag_extended"]);e.active_scss_types=a.active_scss_types},extract_compiled_parts:function(e){return e.split(v.scss_div).filter(Boolean)},check_file_exists:function(s,r){var a=TvrMT.data.dyn.micro_files,o=s.split("/"),n=o.length-1,i=o[n],l=[o];if(r){var c=t.file_extension(i);c&&(c=c[1]);var d=t.strip_extension(i).replace("_",""),_=c?[c]:["scss","sass","css"],u=[d,"_"+d];l=[];for(var p=0;p<_.length;p++)for(var f=0;f<u.length;f++){var g=u[f],m=_[p],v=e.extend([],o);v[n]=g+"."+m,l.push(v)}}for(var h=0;h<l.length;h++){var b=l[h];if(t.checkObject(a,b))return b.join("/")}return!1},toolbar_adjusted:function(e,s,r){return t.startT(arguments),t.startT("maybe_adjust_side_options"),v.maybe_adjust_side_options("height"),t.endT("maybe_adjust_side_options"),t.endT(arguments),!1},toggle_enabled_buttons:function(){t.startT(arguments),v.totalSels<1&&(v.reset_global_vars(),e("#starter-message").removeClass("hidden"),e("#quick-nav").addClass("hidden"),v.expanded("quick_section")&&v.close_quick_edit(),e("#current-selector").text(""),v.stat.tvr.removeClass("tvr-sels-exist").addClass("tvr-no-sels")),v.totalSels>0&&(e("#starter-message").addClass("hidden"),e("#quick-nav").removeClass("hidden"),v.stat.tvr.addClass("tvr-sels-exist").removeClass("tvr-no-sels")),t.endT(arguments)},activate_elementor:function(e){return!(TvrMT.integrate.elementor&&!e)&&(v.pageOrPostID?void(v.stat.iframeDoc.location=v.adminUrl+"post.php?post="+v.pageOrPostID+"&action=elementor"):(alert("This page cannot be edited with Elementor"),!1))},deactivate_elementor:function(){v.get_local_window_function("elementor_shift_rulers")(0),v.stat.iframeDoc.location=v.pref.preview_url,TvrMT.integrate.elementor=!1},remember_page_viewed:function(r){if(t.startT(arguments),!s)return!1;var a=s.get_current_url(),o=r||a;if(!o)return!1;o=t.strip_url_param(o,"preview",!0);var i=t.extract_url_path(o,v.blog_details),l=e("#previewPath");l.val();t.hasValue(o)&&!v.placeholderFrame&&(e.get(v.ajaxUrl+"&mt_preview_url="+encodeURIComponent(o)+"&mt_preview_path="+i,function(){e("#previewStatus").text("iframe-success")}),l.val(i),e("#back-to-frontend").attr("href",o),v.pref.preview_url=o,e("#pref-preview-url-input").val(o),!1===t.in_array(i,TvrMT.data.prog.combo.custom_paths)&&TvrMT.data.prog.combo.custom_paths.unshift(i)),o.indexOf("fl_builder")<0&&n.manually_turn_toggle("off","enable_beaver_builder"),t.endT(arguments)},bb_is_editing:function(){return s.stat.body.hasClass("fl-builder-edit")},bb_changes_made:function(){return s.stat.body.hasClass("fl-builder--layout-has-drafted-changes")},remember_css_import_file:function(){t.startT(arguments);var s=e("#stylesheet_to_import").val();if(!t.hasValue(s))return!1;e.get(v.ajaxUrl+"&import_css_url="+encodeURI(s));var r=t.in_array(s,TvrMT.data.prog.combo.viewed_import_stylesheets);!1!==r&&TvrMT.data.prog.combo.viewed_import_stylesheets.splice(r,1),TvrMT.data.prog.combo.viewed_import_stylesheets.unshift(s),t.endT(arguments)},exclStylesheetSubStrings:{always:[{str:"wp-includes/css",unless:null},{str:"wp-includes/js"},{str:"admin-bar"},{str:"dashicons"},{str:"font-awesome"},{str:"genericons"},{str:"microthemer/css/frontend"},{str:"animate.min.css"},{str:"fonts.googleapis.com"},{str:"elementor/assets",unless:"frontend.min.css"}],FLBuilder:[{str:"bb-plugin/css"},{str:"foundation-icons"}]},ignore_stylesheet:function(e){if(!e)return!1;var t=v.exclStylesheetSubStrings;for(var s in t)if(t.hasOwnProperty(s)&&("always"===s||TvrMT.integrate[s]))for(var r in t[s])if(t[s].hasOwnProperty(r)){var a=t[s][r];if(e.indexOf(a.str)>-1&&(!a.unless||e.indexOf(a.unless)<0))return!0}return!1},filter_excluded_stylesheets:function(e){for(var t=e.length-1;t>=0;t--)v.ignore_stylesheet(e[t].href)&&e.splice(t,1);return e},refresh_stylesheet_list:function(t){var r=t.siblings("input"),a=s.stat.doc.styleSheets,o=["admin-bar","dashicons","genericons","microthemer/css/frontend"],n=[];for(var i in a)if(a.hasOwnProperty(i)){var l=a[i].href,c=!1;if(l){for(var d in o)if(o.hasOwnProperty(d)&&l.indexOf(o[d])>-1){c=!0;break}c||n.push(l)}}TvrMT.data.prog.combo.viewed_import_stylesheets=e.extend(!0,[],n),r.focus().MTautocomplete().MTautocomplete("search","")},update_prev_next_sel_buttons:function(s){if(t.startT(arguments),!s)return e("#vb-focus-prev, #vb-focus-next").addClass("disabled"),!1;var r=v.slugs_from_id(s),a=e("#vb-focus-prev"),o=e("#vb-focus-next"),n=v.itemScan("selector","prev","getID",r.sectionSlug,r.selectorSlug,{incCurrentSection:!0}),i=v.itemScan("selector","next","getID",r.sectionSlug,r.selectorSlug,{incCurrentSection:!0});n?a.removeClass("disabled"):a.addClass("disabled"),i?o.removeClass("disabled"):o.addClass("disabled"),t.endT(arguments)},itemScan:function(e,r,a,o,n,l){var c=(l=l||{}).incCurrentSection?"IncCurrent":"",d=t.editArray(Object.keys(v.uiData),"non_section","remove");d=t.editArray(d,o,r+"Items"+c),"prev"===r&&d.reverse();for(var _=0;_<d.length;_++){var u=d[_];if("section"===e)switch(a){case"getPreviousNode":var p=i.format_css_node_id([l.mq_key,u]),f=s.frontend_jquery_select("#"+p);if(t.isDomEl(f))return f;break;case"getID":return"strk-"+u}if("selector"===e){var g=t.editArray(Object.keys(v.uiData[u]),"this","remove");g=o===u?t.editArray(g,n,r+"Items"):g,"prev"===r&&g.reverse();for(var m=0;m<g.length;m++){var h=g[m];switch(a){case"getPreviousNode":var b=i.format_css_node_id([l.mq_key,u,h]),y=s.frontend_jquery_select("#"+b);if(t.isDomEl(y))return y;break;case"getID":return"strk-"+u+"-"+h}}}}switch(a){case"getPreviousNode":return s.frontend_jquery_select("#"+i.format_css_node_id([l.mq_key]));case"getID":return!1}return!1},itemScanOld:function(e,r,a,o,n){var l=(n=n||{}).incCurrentSection?"IncCurrent":"",c=t.editArray(Object.keys(v.uiData),"non_section","remove");c=t.editArray(c,a,e+"Items"+l),"prev"===e&&c.reverse();for(var d=0;d<c.length;d++){var _=c[d],u=t.editArray(Object.keys(v.uiData[_]),"this","remove");u=a===_?t.editArray(u,o,e+"Items"):u,"prev"===e&&u.reverse();for(var p=0;p<u.length;p++){var f=u[p];switch(r){case"getPreviousNode":var g=i.format_css_node_id([n.mq_key,_,f]),m=s.frontend_jquery_select("#"+g);if(t.isDomEl(m))return m;break;case"getID":return"strk-"+_+"-"+f}}}switch(r){case"getPreviousNode":return s.frontend_jquery_select("#"+i.format_css_node_id([n.mq_key]));case"getID":return!1}return!1},tvr_iterate_selectors_v:function(s,r){t.startT(arguments),r=r||s.attr("id"),s=t.isDomEl(s,!0)?s:v.load_selector(v.slugs_from_id(r),{items:["selectorM"]}),v.stat.opts.add(v.stat.nav).find("li.in-focus").removeClass("in-focus");var a=v.get_meta(s,"selector"),o=v.load_selector(a,{items:["selector"]});(a=v.get_meta(o,"selector")).selector.add(a.selectorM).add(a.section).addClass("in-focus"),v.menuSelInFocusID!==a.selectorMID&&e("#"+v.menuSelInFocusID).remove(),v.update_global_vars(a),v.unload_all_option_selectors(),v.update_prev_next_sel_buttons(a.selectorID),v.maybe_default_to_pg(),v.js_check_values({},a),v.selector_check_disabled(a),v.toolbar_adjusted(),v.briefly_highlight_selector(),v.startSel=!1,t.endT(arguments)},briefly_highlight_selector:function(){t.startT(arguments),v.feature_on(0,"mt_highlight",{offFirst:{fHTML:1,noSave:1},fHTML:1,noSave:1,con:"reg"}),setTimeout(function(){v.feature_off(0,"mt_highlight",{fHTML:1,noSave:1})},1e3),t.endT(arguments)},iframe_functions_loaded:function(){return s},maybe_default_to_pg:function(){var e=v.pref.pg_focus,t=e?".pg-icon-"+e:".pg-icon-font";v.pg_icon_pressed(v.stat.css_icons.find(t),!0)},quick_nav:function(s){if(t.startT(arguments),s.hasClass("disabled")||!v.selInFocusID)return!1;var r=v.get_meta(e("#"+v.selInFocusID),"selector"),a="vb-focus-prev"===s.attr("id")?"prev":"next";v.tvr_iterate_selectors_v(!1,v.itemScan("selector",a,"getID",r.sectionSlug,r.selectorSlug,{incCurrentSection:!0}))}};var v=TvrMT.TvrUi;MTlocal.set_vars(),t.set_vars(),o.set_vars(),n.set_vars(),i.set_vars(),l.set_vars(),c.set_vars(),d.set_vars(),_.set_vars(),v.init()});